(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))i(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(d){if(d.ep)return;d.ep=!0;const h=r(d);fetch(d.href,h)}})();function Jm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var xd={exports:{}},ui={};var fm;function Ag(){if(fm)return ui;fm=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,d,h){var f=null;if(h!==void 0&&(f=""+h),d.key!==void 0&&(f=""+d.key),"key"in d){h={};for(var b in d)b!=="key"&&(h[b]=d[b])}else h=d;return d=h.ref,{$$typeof:l,type:i,key:f,ref:d!==void 0?d:null,props:h}}return ui.Fragment=n,ui.jsx=r,ui.jsxs=r,ui}var mm;function Eg(){return mm||(mm=1,xd.exports=Ag()),xd.exports}var o=Eg(),yd={exports:{}},ve={};var pm;function Cg(){if(pm)return ve;pm=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),_=Symbol.iterator;function T(A){return A===null||typeof A!="object"?null:(A=_&&A[_]||A["@@iterator"],typeof A=="function"?A:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,K={};function Q(A,I,F){this.props=A,this.context=I,this.refs=K,this.updater=F||k}Q.prototype.isReactComponent={},Q.prototype.setState=function(A,I){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,I,"setState")},Q.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function te(){}te.prototype=Q.prototype;function P(A,I,F){this.props=A,this.context=I,this.refs=K,this.updater=F||k}var he=P.prototype=new te;he.constructor=P,q(he,Q.prototype),he.isPureReactComponent=!0;var Re=Array.isArray;function Z(){}var ae={H:null,A:null,T:null,S:null},le=Object.prototype.hasOwnProperty;function Ve(A,I,F){var se=F.ref;return{$$typeof:l,type:A,key:I,ref:se!==void 0?se:null,props:F}}function Ts(A,I){return Ve(A.type,I,A.props)}function _a(A){return typeof A=="object"&&A!==null&&A.$$typeof===l}function Vt(A){var I={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(F){return I[F]})}var Yt=/\/+/g;function Ht(A,I){return typeof A=="object"&&A!==null&&A.key!=null?Vt(""+A.key):I.toString(36)}function Xt(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Z,Z):(A.status="pending",A.then(function(I){A.status==="pending"&&(A.status="fulfilled",A.value=I)},function(I){A.status==="pending"&&(A.status="rejected",A.reason=I)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function L(A,I,F,se,pe){var Te=typeof A;(Te==="undefined"||Te==="boolean")&&(A=null);var Me=!1;if(A===null)Me=!0;else switch(Te){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(A.$$typeof){case l:case n:Me=!0;break;case v:return Me=A._init,L(Me(A._payload),I,F,se,pe)}}if(Me)return pe=pe(A),Me=se===""?"."+Ht(A,0):se,Re(pe)?(F="",Me!=null&&(F=Me.replace(Yt,"$&/")+"/"),L(pe,I,F,"",function(ks){return ks})):pe!=null&&(_a(pe)&&(pe=Ts(pe,F+(pe.key==null||A&&A.key===pe.key?"":(""+pe.key).replace(Yt,"$&/")+"/")+Me)),I.push(pe)),1;Me=0;var Tt=se===""?".":se+":";if(Re(A))for(var it=0;it<A.length;it++)se=A[it],Te=Tt+Ht(se,it),Me+=L(se,I,F,Te,pe);else if(it=T(A),typeof it=="function")for(A=it.call(A),it=0;!(se=A.next()).done;)se=se.value,Te=Tt+Ht(se,it++),Me+=L(se,I,F,Te,pe);else if(Te==="object"){if(typeof A.then=="function")return L(Xt(A),I,F,se,pe);throw I=String(A),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ee(A,I,F){if(A==null)return A;var se=[],pe=0;return L(A,se,"","",function(Te){return I.call(F,Te,pe++)}),se}function fe(A){if(A._status===-1){var I=A._result;I=I(),I.then(function(F){(A._status===0||A._status===-1)&&(A._status=1,A._result=F)},function(F){(A._status===0||A._status===-1)&&(A._status=2,A._result=F)}),A._status===-1&&(A._status=0,A._result=I)}if(A._status===1)return A._result.default;throw A._result}var Be=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},He={map:ee,forEach:function(A,I,F){ee(A,function(){I.apply(this,arguments)},F)},count:function(A){var I=0;return ee(A,function(){I++}),I},toArray:function(A){return ee(A,function(I){return I})||[]},only:function(A){if(!_a(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return ve.Activity=S,ve.Children=He,ve.Component=Q,ve.Fragment=r,ve.Profiler=d,ve.PureComponent=P,ve.StrictMode=i,ve.Suspense=p,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,ve.__COMPILER_RUNTIME={__proto__:null,c:function(A){return ae.H.useMemoCache(A)}},ve.cache=function(A){return function(){return A.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(A,I,F){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var se=q({},A.props),pe=A.key;if(I!=null)for(Te in I.key!==void 0&&(pe=""+I.key),I)!le.call(I,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&I.ref===void 0||(se[Te]=I[Te]);var Te=arguments.length-2;if(Te===1)se.children=F;else if(1<Te){for(var Me=Array(Te),Tt=0;Tt<Te;Tt++)Me[Tt]=arguments[Tt+2];se.children=Me}return Ve(A.type,pe,se)},ve.createContext=function(A){return A={$$typeof:f,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:h,_context:A},A},ve.createElement=function(A,I,F){var se,pe={},Te=null;if(I!=null)for(se in I.key!==void 0&&(Te=""+I.key),I)le.call(I,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(pe[se]=I[se]);var Me=arguments.length-2;if(Me===1)pe.children=F;else if(1<Me){for(var Tt=Array(Me),it=0;it<Me;it++)Tt[it]=arguments[it+2];pe.children=Tt}if(A&&A.defaultProps)for(se in Me=A.defaultProps,Me)pe[se]===void 0&&(pe[se]=Me[se]);return Ve(A,Te,pe)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(A){return{$$typeof:b,render:A}},ve.isValidElement=_a,ve.lazy=function(A){return{$$typeof:v,_payload:{_status:-1,_result:A},_init:fe}},ve.memo=function(A,I){return{$$typeof:y,type:A,compare:I===void 0?null:I}},ve.startTransition=function(A){var I=ae.T,F={};ae.T=F;try{var se=A(),pe=ae.S;pe!==null&&pe(F,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Z,Be)}catch(Te){Be(Te)}finally{I!==null&&F.types!==null&&(I.types=F.types),ae.T=I}},ve.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},ve.use=function(A){return ae.H.use(A)},ve.useActionState=function(A,I,F){return ae.H.useActionState(A,I,F)},ve.useCallback=function(A,I){return ae.H.useCallback(A,I)},ve.useContext=function(A){return ae.H.useContext(A)},ve.useDebugValue=function(){},ve.useDeferredValue=function(A,I){return ae.H.useDeferredValue(A,I)},ve.useEffect=function(A,I){return ae.H.useEffect(A,I)},ve.useEffectEvent=function(A){return ae.H.useEffectEvent(A)},ve.useId=function(){return ae.H.useId()},ve.useImperativeHandle=function(A,I,F){return ae.H.useImperativeHandle(A,I,F)},ve.useInsertionEffect=function(A,I){return ae.H.useInsertionEffect(A,I)},ve.useLayoutEffect=function(A,I){return ae.H.useLayoutEffect(A,I)},ve.useMemo=function(A,I){return ae.H.useMemo(A,I)},ve.useOptimistic=function(A,I){return ae.H.useOptimistic(A,I)},ve.useReducer=function(A,I,F){return ae.H.useReducer(A,I,F)},ve.useRef=function(A){return ae.H.useRef(A)},ve.useState=function(A){return ae.H.useState(A)},ve.useSyncExternalStore=function(A,I,F){return ae.H.useSyncExternalStore(A,I,F)},ve.useTransition=function(){return ae.H.useTransition()},ve.version="19.2.3",ve}var gm;function Qd(){return gm||(gm=1,yd.exports=Cg()),yd.exports}var H=Qd();const Zd=Jm(H);var vd={exports:{}},di={},wd={exports:{}},Sd={};var bm;function Rg(){return bm||(bm=1,(function(l){function n(L,ee){var fe=L.length;L.push(ee);e:for(;0<fe;){var Be=fe-1>>>1,He=L[Be];if(0<d(He,ee))L[Be]=ee,L[fe]=He,fe=Be;else break e}}function r(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var ee=L[0],fe=L.pop();if(fe!==ee){L[0]=fe;e:for(var Be=0,He=L.length,A=He>>>1;Be<A;){var I=2*(Be+1)-1,F=L[I],se=I+1,pe=L[se];if(0>d(F,fe))se<He&&0>d(pe,F)?(L[Be]=pe,L[se]=fe,Be=se):(L[Be]=F,L[I]=fe,Be=I);else if(se<He&&0>d(pe,fe))L[Be]=pe,L[se]=fe,Be=se;else break e}}return ee}function d(L,ee){var fe=L.sortIndex-ee.sortIndex;return fe!==0?fe:L.id-ee.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;l.unstable_now=function(){return h.now()}}else{var f=Date,b=f.now();l.unstable_now=function(){return f.now()-b}}var p=[],y=[],v=1,S=null,_=3,T=!1,k=!1,q=!1,K=!1,Q=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function he(L){for(var ee=r(y);ee!==null;){if(ee.callback===null)i(y);else if(ee.startTime<=L)i(y),ee.sortIndex=ee.expirationTime,n(p,ee);else break;ee=r(y)}}function Re(L){if(q=!1,he(L),!k)if(r(p)!==null)k=!0,Z||(Z=!0,Vt());else{var ee=r(y);ee!==null&&Xt(Re,ee.startTime-L)}}var Z=!1,ae=-1,le=5,Ve=-1;function Ts(){return K?!0:!(l.unstable_now()-Ve<le)}function _a(){if(K=!1,Z){var L=l.unstable_now();Ve=L;var ee=!0;try{e:{k=!1,q&&(q=!1,te(ae),ae=-1),T=!0;var fe=_;try{t:{for(he(L),S=r(p);S!==null&&!(S.expirationTime>L&&Ts());){var Be=S.callback;if(typeof Be=="function"){S.callback=null,_=S.priorityLevel;var He=Be(S.expirationTime<=L);if(L=l.unstable_now(),typeof He=="function"){S.callback=He,he(L),ee=!0;break t}S===r(p)&&i(p),he(L)}else i(p);S=r(p)}if(S!==null)ee=!0;else{var A=r(y);A!==null&&Xt(Re,A.startTime-L),ee=!1}}break e}finally{S=null,_=fe,T=!1}ee=void 0}}finally{ee?Vt():Z=!1}}}var Vt;if(typeof P=="function")Vt=function(){P(_a)};else if(typeof MessageChannel<"u"){var Yt=new MessageChannel,Ht=Yt.port2;Yt.port1.onmessage=_a,Vt=function(){Ht.postMessage(null)}}else Vt=function(){Q(_a,0)};function Xt(L,ee){ae=Q(function(){L(l.unstable_now())},ee)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(L){L.callback=null},l.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<L?Math.floor(1e3/L):5},l.unstable_getCurrentPriorityLevel=function(){return _},l.unstable_next=function(L){switch(_){case 1:case 2:case 3:var ee=3;break;default:ee=_}var fe=_;_=ee;try{return L()}finally{_=fe}},l.unstable_requestPaint=function(){K=!0},l.unstable_runWithPriority=function(L,ee){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var fe=_;_=L;try{return ee()}finally{_=fe}},l.unstable_scheduleCallback=function(L,ee,fe){var Be=l.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Be+fe:Be):fe=Be,L){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=fe+He,L={id:v++,callback:ee,priorityLevel:L,startTime:fe,expirationTime:He,sortIndex:-1},fe>Be?(L.sortIndex=fe,n(y,L),r(p)===null&&L===r(y)&&(q?(te(ae),ae=-1):q=!0,Xt(Re,fe-Be))):(L.sortIndex=He,n(p,L),k||T||(k=!0,Z||(Z=!0,Vt()))),L},l.unstable_shouldYield=Ts,l.unstable_wrapCallback=function(L){var ee=_;return function(){var fe=_;_=ee;try{return L.apply(this,arguments)}finally{_=fe}}}})(Sd)),Sd}var xm;function Og(){return xm||(xm=1,wd.exports=Rg()),wd.exports}var _d={exports:{}},It={};var ym;function Dg(){if(ym)return It;ym=1;var l=Qd();function n(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(p,y,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:p,containerInfo:y,implementation:v}}var f=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return It.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,It.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return h(p,y,null,v)},It.flushSync=function(p){var y=f.T,v=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=y,i.p=v,i.d.f()}},It.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},It.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},It.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,S=b(v,y.crossOrigin),_=typeof y.integrity=="string"?y.integrity:void 0,T=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:_,fetchPriority:T}):v==="script"&&i.d.X(p,{crossOrigin:S,integrity:_,fetchPriority:T,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},It.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=b(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},It.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,S=b(v,y.crossOrigin);i.d.L(p,v,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},It.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=b(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},It.requestFormReset=function(p){i.d.r(p)},It.unstable_batchedUpdates=function(p,y){return p(y)},It.useFormState=function(p,y,v){return f.H.useFormState(p,y,v)},It.useFormStatus=function(){return f.H.useHostTransitionStatus()},It.version="19.2.3",It}var vm;function Mg(){if(vm)return _d.exports;vm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),_d.exports=Dg(),_d.exports}var wm;function Ug(){if(wm)return di;wm=1;var l=Og(),n=Qd(),r=Mg();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(h(e)!==e)throw Error(i(188))}function y(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,s=t;;){var c=a.return;if(c===null)break;var u=c.alternate;if(u===null){if(s=c.return,s!==null){a=s;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===a)return p(c),e;if(u===s)return p(c),t;u=u.sibling}throw Error(i(188))}if(a.return!==s.return)a=c,s=u;else{for(var m=!1,x=c.child;x;){if(x===a){m=!0,a=c,s=u;break}if(x===s){m=!0,s=c,a=u;break}x=x.sibling}if(!m){for(x=u.child;x;){if(x===a){m=!0,a=u,s=c;break}if(x===s){m=!0,s=u,a=c;break}x=x.sibling}if(!m)throw Error(i(189))}}if(a.alternate!==s)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,_=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),P=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),Ve=Symbol.for("react.activity"),Ts=Symbol.for("react.memo_cache_sentinel"),_a=Symbol.iterator;function Vt(e){return e===null||typeof e!="object"?null:(e=_a&&e[_a]||e["@@iterator"],typeof e=="function"?e:null)}var Yt=Symbol.for("react.client.reference");function Ht(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Yt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case Q:return"Profiler";case K:return"StrictMode";case Re:return"Suspense";case Z:return"SuspenseList";case Ve:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case P:return e.displayName||"Context";case te:return(e._context.displayName||"Context")+".Consumer";case he:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ae:return t=e.displayName||null,t!==null?t:Ht(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return Ht(e(t))}catch{}}return null}var Xt=Array.isArray,L=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Be=[],He=-1;function A(e){return{current:e}}function I(e){0>He||(e.current=Be[He],Be[He]=null,He--)}function F(e,t){He++,Be[He]=e.current,e.current=t}var se=A(null),pe=A(null),Te=A(null),Me=A(null);function Tt(e,t){switch(F(Te,t),F(pe,e),F(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?B0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=B0(t),e=q0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(se),F(se,e)}function it(){I(se),I(pe),I(Te)}function ks(e){e.memoizedState!==null&&F(Me,e);var t=se.current,a=q0(t,e.type);t!==a&&(F(pe,e),F(se,a))}function Ns(e){pe.current===e&&(I(se),I(pe)),Me.current===e&&(I(Me),li._currentValue=fe)}var As,ji;function cn(e){if(As===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);As=t&&t[1]||"",ji=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+As+e+ji}var nr=!1;function sr(e,t){if(!e||nr)return"";nr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(B){var U=B}Reflect.construct(e,[],G)}else{try{G.call()}catch(B){U=B}e.call(G.prototype)}}else{try{throw Error()}catch(B){U=B}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(B){if(B&&U&&typeof B.stack=="string")return[B.stack,U.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),m=u[0],x=u[1];if(m&&x){var j=m.split(`
`),M=x.split(`
`);for(c=s=0;s<j.length&&!j[s].includes("DetermineComponentFrameRoot");)s++;for(;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;if(s===j.length||c===M.length)for(s=j.length-1,c=M.length-1;1<=s&&0<=c&&j[s]!==M[c];)c--;for(;1<=s&&0<=c;s--,c--)if(j[s]!==M[c]){if(s!==1||c!==1)do if(s--,c--,0>c||j[s]!==M[c]){var z=`
`+j[s].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=s&&0<=c);break}}}finally{nr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?cn(a):""}function hc(e,t){switch(e.tag){case 26:case 27:case 5:return cn(e.type);case 16:return cn("Lazy");case 13:return e.child!==t&&t!==null?cn("Suspense Fallback"):cn("Suspense");case 19:return cn("SuspenseList");case 0:case 15:return sr(e.type,!1);case 11:return sr(e.type.render,!1);case 1:return sr(e.type,!0);case 31:return cn("Activity");default:return""}}function Ti(e){try{var t="",a=null;do t+=hc(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var rr=Object.prototype.hasOwnProperty,un=l.unstable_scheduleCallback,lr=l.unstable_cancelCallback,nh=l.unstable_shouldYield,sh=l.unstable_requestPaint,Qt=l.unstable_now,rh=l.unstable_getCurrentPriorityLevel,Fe=l.unstable_ImmediatePriority,sl=l.unstable_UserBlockingPriority,kt=l.unstable_NormalPriority,fc=l.unstable_LowPriority,ir=l.unstable_IdlePriority,rl=l.log,mc=l.unstable_setDisableYieldValue,dn=null,Pt=null;function ia(e){if(typeof rl=="function"&&mc(e),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(dn,e)}catch{}}var Zt=Math.clz32?Math.clz32:hn,pc=Math.log,ki=Math.LN2;function hn(e){return e>>>=0,e===0?32:31-(pc(e)/ki|0)|0}var fn=256,Ft=262144,Pa=4194304;function mn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ja(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var c=0,u=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var x=s&134217727;return x!==0?(s=x&~u,s!==0?c=mn(s):(m&=x,m!==0?c=mn(m):a||(a=x&~e,a!==0&&(c=mn(a))))):(x=s&~u,x!==0?c=mn(x):m!==0?c=mn(m):a||(a=s&~e,a!==0&&(c=mn(a)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:c}function pn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ma(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var e=Pa;return Pa<<=1,(Pa&62914560)===0&&(Pa=4194304),e}function Ua(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ct(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ll(e,t,a,s,c,u){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var x=e.entanglements,j=e.expirationTimes,M=e.hiddenUpdates;for(a=m&~a;0<a;){var z=31-Zt(a),G=1<<z;x[z]=0,j[z]=-1;var U=M[z];if(U!==null)for(M[z]=null,z=0;z<U.length;z++){var B=U[z];B!==null&&(B.lane&=-536870913)}a&=~G}s!==0&&gn(e,s,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(m&~t))}function gn(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Zt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function Pn(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-Zt(a),c=1<<s;c&t|e[s]&t&&(e[s]|=t),a&=~c}}function Ni(e,t){var a=t&-t;return a=(a&42)!==0?1:Ai(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ai(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ei(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gc(){var e=ee.p;return e!==0?e:(e=window.event,e===void 0?32:lm(e.type))}function Ci(e,t){var a=ee.p;try{return ee.p=e,t()}finally{ee.p=a}}var Ba=Math.random().toString(36).slice(2),De="__reactFiber$"+Ba,ft="__reactProps$"+Ba,Jn="__reactContainer$"+Ba,Kn="__reactEvents$"+Ba,lh="__reactListeners$"+Ba,bc="__reactHandles$"+Ba,or="__reactResources$"+Ba,Ka="__reactMarker$"+Ba;function il(e){delete e[De],delete e[ft],delete e[Kn],delete e[lh],delete e[bc]}function ja(e){var t=e[De];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Jn]||a[De]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=I0(e);e!==null;){if(a=e[De])return a;e=I0(e)}return t}e=a,a=e.parentNode}return null}function bn(e){if(e=e[De]||e[Jn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Xa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Qa(e){var t=e[or];return t||(t=e[or]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ka]=!0}var Za=new Set,Ri={};function qa(e,t){Xn(e,t),Xn(e+"Capture",t)}function Xn(e,t){for(Ri[e]=t,e=0;e<t.length;e++)Za.add(t[e])}var ol=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oi={},Je={};function Di(e){return rr.call(Je,e)?!0:rr.call(Oi,e)?!1:ol.test(e)?Je[e]=!0:(Oi[e]=!0,!1)}function cl(e,t,a){if(Di(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ul(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Fa(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function oa(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hl(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){a=""+m,u.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mi(e){if(!e._valueTracker){var t=dl(e)?"checked":"value";e._valueTracker=hl(e,t,""+e[t])}}function xc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=dl(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Nt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cr=/[\n"\\]/g;function ke(e){return e.replace(cr,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ta(e,t,a,s,c,u,m,x){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+oa(t)):e.value!==""+oa(t)&&(e.value=""+oa(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?ur(e,m,oa(t)):a!=null?ur(e,m,oa(a)):s!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+oa(x):e.removeAttribute("name")}function xn(e,t,a,s,c,u,m,x){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Mi(e);return}a=a!=null?""+oa(a):"",t=t!=null?""+oa(t):a,x||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=x?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Mi(e)}function ur(e,t,a){t==="number"&&Nt(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function $t(e,t,a,s){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&s&&(e[a].defaultSelected=!0)}else{for(a=""+oa(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function dr(e,t,a){if(t!=null&&(t=""+oa(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+oa(a):""}function Jt(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(i(92));if(Xt(s)){if(1<s.length)throw Error(i(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=oa(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Mi(e)}function Wa(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Wt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hr(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||Wt.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function yn(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&a[c]!==s&&hr(e,c,s)}else for(var u in t)t.hasOwnProperty(u)&&hr(e,u,t[u])}function Es(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function en(e){return fr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ea(){}var Qn=null;function fl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var La=null,vn=null;function tn(e){var t=bn(e);if(t&&(e=t.stateNode)){var a=e[ft]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ta(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ke(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var c=s[ft]||null;if(!c)throw Error(i(90));Ta(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&xc(s)}break e;case"textarea":dr(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&$t(e,!!a.multiple,t,!1)}}}var ml=!1;function Ui(e,t,a){if(ml)return e(t,a);ml=!0;try{var s=e(t);return s}finally{if(ml=!1,(La!==null||vn!==null)&&(Oo(),La&&(t=La,e=vn,vn=La=null,tn(t),e)))for(t=0;t<e.length;t++)tn(e[t])}}function wn(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ft]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pl=!1;if(za)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){pl=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{pl=!1}var ca=null,gl=null,mr=null;function Bi(){if(mr)return mr;var e,t=gl,a=t.length,s,c="value"in ca?ca.value:ca.textContent,u=c.length;for(e=0;e<a&&t[e]===c[e];e++);var m=a-e;for(s=1;s<=m&&t[a-s]===c[u-s];s++);return mr=c.slice(e,1<s?1-s:void 0)}function Zn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rs(){return!0}function W(){return!1}function at(e){function t(a,s,c,u,m){this._reactName=a,this._targetInst=c,this.type=s,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(a=e[x],this[x]=a?a(u):u[x]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Rs:W,this.isPropagationStopped=W,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),t}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=at(Sn),_n=S({},Sn,{view:0,detail:0}),jn=at(_n),pr,Et,da,gr=S({},_n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==da&&(da&&e.type==="mousemove"?(pr=e.screenX-da.screenX,Et=e.screenY-da.screenY):Et=pr=0,da=e),pr)},movementY:function(e){return"movementY"in e?e.movementY:Et}}),br=at(gr),yc=S({},gr,{dataTransfer:0}),bl=at(yc),qi=S({},_n,{relatedTarget:0}),Os=at(qi),xl=S({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0}),yl=at(xl),vl=S({},Sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wl=at(vl),Li=S({},Sn,{data:0}),Fn=at(Li),Sl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},an={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_l={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ha(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_l[e])?!!t[e]:!1}function xr(){return ha}var jl=S({},_n,{key:function(e){if(e.key){var t=Sl[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?an[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(e){return e.type==="keypress"?Zn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zi=at(jl),vc=S({},gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ue=at(vc),Ke=S({},_n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),wc=at(Ke),Sc=S({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_c=at(Sc),jc=S({},gr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tc=at(jc),Vi=S({},Sn,{newState:0,oldState:0}),Ds=at(Vi),Ot=[9,13,27,32],St=za&&"CompositionEvent"in window,fa=null;za&&"documentMode"in document&&(fa=document.documentMode);var Wn=za&&"TextEvent"in window&&!fa,Tn=za&&(!St||fa&&8<fa&&11>=fa),Tl=" ",kl=!1;function Nl(e,t){switch(e){case"keyup":return Ot.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Al(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kn=!1;function Hi(e,t){switch(e){case"compositionend":return Al(t);case"keypress":return t.which!==32?null:(kl=!0,Tl);case"textInput":return e=t.data,e===Tl&&kl?null:e;default:return null}}function ih(e,t){if(kn)return e==="compositionend"||!St&&Nl(e,t)?(e=Bi(),mr=gl=ca=null,kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&t.locale!=="ko"?null:t.data;default:return null}}var $i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gt(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$i[e.type]:t==="textarea"}function Gi(e,t,a,s){La?vn?vn.push(s):vn=[s]:La=s,t=zo(t,"onChange"),0<t.length&&(a=new ua("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Ms=null,Us=null;function kc(e){C0(e,0)}function es(e){var t=Xa(e);if(xc(t))return e}function Ii(e,t){if(e==="change")return t}var Yi=!1;if(za){var yr;if(za){var El="oninput"in document;if(!El){var Pi=document.createElement("div");Pi.setAttribute("oninput","return;"),El=typeof Pi.oninput=="function"}yr=El}else yr=!1;Yi=yr&&(!document.documentMode||9<document.documentMode)}function Ji(){Ms&&(Ms.detachEvent("onpropertychange",Cl),Us=Ms=null)}function Cl(e){if(e.propertyName==="value"&&es(Us)){var t=[];Gi(t,Us,e,fl(e)),Ui(kc,t)}}function Bs(e,t,a){e==="focusin"?(Ji(),Ms=t,Us=a,Ms.attachEvent("onpropertychange",Cl)):e==="focusout"&&Ji()}function Nc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return es(Us)}function Ac(e,t){if(e==="click")return es(t)}function Ec(e,t){if(e==="input"||e==="change")return es(t)}function Cc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dt=typeof Object.is=="function"?Object.is:Cc;function qs(e,t){if(Dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var c=a[s];if(!rr.call(t,c)||!Dt(e[c],t[c]))return!1}return!0}function Ki(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xi(e,t){var a=Ki(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ki(a)}}function nn(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nn(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qi(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Nt(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Nt(e.document)}return t}function g(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var w=za&&"documentMode"in document&&11>=document.documentMode,E=null,O=null,V=null,oe=!1;function ge(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;oe||E==null||E!==Nt(s)||(s=E,"selectionStart"in s&&g(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),V&&qs(V,s)||(V=s,s=zo(O,"onSelect"),0<s.length&&(t=new ua("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=E)))}function ye(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ue={animationend:ye("Animation","AnimationEnd"),animationiteration:ye("Animation","AnimationIteration"),animationstart:ye("Animation","AnimationStart"),transitionrun:ye("Transition","TransitionRun"),transitionstart:ye("Transition","TransitionStart"),transitioncancel:ye("Transition","TransitionCancel"),transitionend:ye("Transition","TransitionEnd")},Y={},J={};za&&(J=document.createElement("div").style,"AnimationEvent"in window||(delete ue.animationend.animation,delete ue.animationiteration.animation,delete ue.animationstart.animation),"TransitionEvent"in window||delete ue.transitionend.transition);function X(e){if(Y[e])return Y[e];if(!ue[e])return e;var t=ue[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in J)return Y[e]=t[a];return e}var ne=X("animationend"),Se=X("animationiteration"),qe=X("animationstart"),rt=X("transitionrun"),ta=X("transitionstart"),Rl=X("transitioncancel"),oh=X("transitionend"),ch=new Map,Rc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rc.push("scrollEnd");function Va(e,t){ch.set(e,t),qa(t,[e])}var Zi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ka=[],vr=0,Oc=0;function Fi(){for(var e=vr,t=Oc=vr=0;t<e;){var a=ka[t];ka[t++]=null;var s=ka[t];ka[t++]=null;var c=ka[t];ka[t++]=null;var u=ka[t];if(ka[t++]=null,s!==null&&c!==null){var m=s.pending;m===null?c.next=c:(c.next=m.next,m.next=c),s.pending=c}u!==0&&uh(a,c,u)}}function Wi(e,t,a,s){ka[vr++]=e,ka[vr++]=t,ka[vr++]=a,ka[vr++]=s,Oc|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Dc(e,t,a,s){return Wi(e,t,a,s),eo(e)}function Ls(e,t){return Wi(e,null,null,t),eo(e)}function uh(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var c=!1,u=e.return;u!==null;)u.childLanes|=a,s=u.alternate,s!==null&&(s.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Zt(a),e=u.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=a|536870912),u):null}function eo(e){if(50<Wl)throw Wl=0,$u=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var wr={};function dp(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ma(e,t,a,s){return new dp(e,t,a,s)}function Mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nn(e,t){var a=e.alternate;return a===null?(a=ma(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function dh(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function to(e,t,a,s,c,u){var m=0;if(s=e,typeof e=="function")Mc(e)&&(m=1);else if(typeof e=="string")m=gg(e,a,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ve:return e=ma(31,a,t,c),e.elementType=Ve,e.lanes=u,e;case q:return zs(a.children,c,u,t);case K:m=8,c|=24;break;case Q:return e=ma(12,a,t,c|2),e.elementType=Q,e.lanes=u,e;case Re:return e=ma(13,a,t,c),e.elementType=Re,e.lanes=u,e;case Z:return e=ma(19,a,t,c),e.elementType=Z,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:m=10;break e;case te:m=9;break e;case he:m=11;break e;case ae:m=14;break e;case le:m=16,s=null;break e}m=29,a=Error(i(130,e===null?"null":typeof e,"")),s=null}return t=ma(m,a,t,c),t.elementType=e,t.type=s,t.lanes=u,t}function zs(e,t,a,s){return e=ma(7,e,s,t),e.lanes=a,e}function Uc(e,t,a){return e=ma(6,e,null,t),e.lanes=a,e}function hh(e){var t=ma(18,null,null,0);return t.stateNode=e,t}function Bc(e,t,a){return t=ma(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var fh=new WeakMap;function Na(e,t){if(typeof e=="object"&&e!==null){var a=fh.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ti(t)},fh.set(e,t),t)}return{value:e,source:t,stack:Ti(t)}}var Sr=[],_r=0,ao=null,Ol=0,Aa=[],Ea=0,ts=null,sn=1,rn="";function An(e,t){Sr[_r++]=Ol,Sr[_r++]=ao,ao=e,Ol=t}function mh(e,t,a){Aa[Ea++]=sn,Aa[Ea++]=rn,Aa[Ea++]=ts,ts=e;var s=sn;e=rn;var c=32-Zt(s)-1;s&=~(1<<c),a+=1;var u=32-Zt(t)+c;if(30<u){var m=c-c%5;u=(s&(1<<m)-1).toString(32),s>>=m,c-=m,sn=1<<32-Zt(t)+c|a<<c|s,rn=u+e}else sn=1<<u|a<<c|s,rn=e}function qc(e){e.return!==null&&(An(e,1),mh(e,1,0))}function Lc(e){for(;e===ao;)ao=Sr[--_r],Sr[_r]=null,Ol=Sr[--_r],Sr[_r]=null;for(;e===ts;)ts=Aa[--Ea],Aa[Ea]=null,rn=Aa[--Ea],Aa[Ea]=null,sn=Aa[--Ea],Aa[Ea]=null}function ph(e,t){Aa[Ea++]=sn,Aa[Ea++]=rn,Aa[Ea++]=ts,sn=t.id,rn=t.overflow,ts=e}var Mt=null,nt=null,Oe=!1,as=null,Ca=!1,zc=Error(i(519));function ns(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(Na(t,e)),zc}function gh(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[De]=e,t[ft]=s,a){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(a=0;a<ti.length;a++)Ae(ti[a],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),xn(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),Jt(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||M0(t.textContent,a)?(s.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),s.onScroll!=null&&Ae("scroll",t),s.onScrollEnd!=null&&Ae("scrollend",t),s.onClick!=null&&(t.onclick=ea),t=!0):t=!1,t||ns(e,!0)}function bh(e){for(Mt=e.return;Mt;)switch(Mt.tag){case 5:case 31:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:Mt=Mt.return}}function jr(e){if(e!==Mt)return!1;if(!Oe)return bh(e),Oe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||nd(e.type,e.memoizedProps)),a=!a),a&&nt&&ns(e),bh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));nt=G0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));nt=G0(e)}else t===27?(t=nt,bs(e.type)?(e=od,od=null,nt=e):nt=t):nt=Mt?Oa(e.stateNode.nextSibling):null;return!0}function Vs(){nt=Mt=null,Oe=!1}function Vc(){var e=as;return e!==null&&(ra===null?ra=e:ra.push.apply(ra,e),as=null),e}function Dl(e){as===null?as=[e]:as.push(e)}var Hc=A(null),Hs=null,En=null;function ss(e,t,a){F(Hc,t._currentValue),t._currentValue=a}function Cn(e){e._currentValue=Hc.current,I(Hc)}function $c(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Gc(e,t,a,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var m=c.child;u=u.firstContext;e:for(;u!==null;){var x=u;u=c;for(var j=0;j<t.length;j++)if(x.context===t[j]){u.lanes|=a,x=u.alternate,x!==null&&(x.lanes|=a),$c(u.return,a,e),s||(m=null);break e}u=x.next}}else if(c.tag===18){if(m=c.return,m===null)throw Error(i(341));m.lanes|=a,u=m.alternate,u!==null&&(u.lanes|=a),$c(m,a,e),m=null}else m=c.child;if(m!==null)m.return=c;else for(m=c;m!==null;){if(m===e){m=null;break}if(c=m.sibling,c!==null){c.return=m.return,m=c;break}m=m.return}c=m}}function Tr(e,t,a,s){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var m=c.alternate;if(m===null)throw Error(i(387));if(m=m.memoizedProps,m!==null){var x=c.type;Dt(c.pendingProps.value,m.value)||(e!==null?e.push(x):e=[x])}}else if(c===Me.current){if(m=c.alternate,m===null)throw Error(i(387));m.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(li):e=[li])}c=c.return}e!==null&&Gc(t,e,a,s),t.flags|=262144}function no(e){for(e=e.firstContext;e!==null;){if(!Dt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $s(e){Hs=e,En=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ut(e){return xh(Hs,e)}function so(e,t){return Hs===null&&$s(e),xh(e,t)}function xh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},En===null){if(e===null)throw Error(i(308));En=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else En=En.next=t;return a}var hp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},fp=l.unstable_scheduleCallback,mp=l.unstable_NormalPriority,gt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ic(){return{controller:new hp,data:new Map,refCount:0}}function Ml(e){e.refCount--,e.refCount===0&&fp(mp,function(){e.controller.abort()})}var Ul=null,Yc=0,kr=0,Nr=null;function pp(e,t){if(Ul===null){var a=Ul=[];Yc=0,kr=Ku(),Nr={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Yc++,t.then(yh,yh),t}function yh(){if(--Yc===0&&Ul!==null){Nr!==null&&(Nr.status="fulfilled");var e=Ul;Ul=null,kr=0,Nr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function gp(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),s}var vh=L.S;L.S=function(e,t){s0=Qt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&pp(e,t),vh!==null&&vh(e,t)};var Gs=A(null);function Pc(){var e=Gs.current;return e!==null?e:We.pooledCache}function ro(e,t){t===null?F(Gs,Gs.current):F(Gs,t.pool)}function wh(){var e=Pc();return e===null?null:{parent:gt._currentValue,pool:e}}var Ar=Error(i(460)),Jc=Error(i(474)),lo=Error(i(542)),io={then:function(){}};function Sh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _h(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ea,ea),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Th(e),e;default:if(typeof t.status=="string")t.then(ea,ea);else{if(e=We,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Th(e),e}throw Ys=t,Ar}}function Is(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ys=a,Ar):a}}var Ys=null;function jh(){if(Ys===null)throw Error(i(459));var e=Ys;return Ys=null,e}function Th(e){if(e===Ar||e===lo)throw Error(i(483))}var Er=null,Bl=0;function oo(e){var t=Bl;return Bl+=1,Er===null&&(Er=[]),_h(Er,e,t)}function ql(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function co(e,t){throw t.$$typeof===_?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function kh(e){function t(C,N){if(e){var D=C.deletions;D===null?(C.deletions=[N],C.flags|=16):D.push(N)}}function a(C,N){if(!e)return null;for(;N!==null;)t(C,N),N=N.sibling;return null}function s(C){for(var N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function c(C,N){return C=Nn(C,N),C.index=0,C.sibling=null,C}function u(C,N,D){return C.index=D,e?(D=C.alternate,D!==null?(D=D.index,D<N?(C.flags|=67108866,N):D):(C.flags|=67108866,N)):(C.flags|=1048576,N)}function m(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function x(C,N,D,$){return N===null||N.tag!==6?(N=Uc(D,C.mode,$),N.return=C,N):(N=c(N,D),N.return=C,N)}function j(C,N,D,$){var de=D.type;return de===q?z(C,N,D.props.children,$,D.key):N!==null&&(N.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===le&&Is(de)===N.type)?(N=c(N,D.props),ql(N,D),N.return=C,N):(N=to(D.type,D.key,D.props,null,C.mode,$),ql(N,D),N.return=C,N)}function M(C,N,D,$){return N===null||N.tag!==4||N.stateNode.containerInfo!==D.containerInfo||N.stateNode.implementation!==D.implementation?(N=Bc(D,C.mode,$),N.return=C,N):(N=c(N,D.children||[]),N.return=C,N)}function z(C,N,D,$,de){return N===null||N.tag!==7?(N=zs(D,C.mode,$,de),N.return=C,N):(N=c(N,D),N.return=C,N)}function G(C,N,D){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Uc(""+N,C.mode,D),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case T:return D=to(N.type,N.key,N.props,null,C.mode,D),ql(D,N),D.return=C,D;case k:return N=Bc(N,C.mode,D),N.return=C,N;case le:return N=Is(N),G(C,N,D)}if(Xt(N)||Vt(N))return N=zs(N,C.mode,D,null),N.return=C,N;if(typeof N.then=="function")return G(C,oo(N),D);if(N.$$typeof===P)return G(C,so(C,N),D);co(C,N)}return null}function U(C,N,D,$){var de=N!==null?N.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return de!==null?null:x(C,N,""+D,$);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case T:return D.key===de?j(C,N,D,$):null;case k:return D.key===de?M(C,N,D,$):null;case le:return D=Is(D),U(C,N,D,$)}if(Xt(D)||Vt(D))return de!==null?null:z(C,N,D,$,null);if(typeof D.then=="function")return U(C,N,oo(D),$);if(D.$$typeof===P)return U(C,N,so(C,D),$);co(C,D)}return null}function B(C,N,D,$,de){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return C=C.get(D)||null,x(N,C,""+$,de);if(typeof $=="object"&&$!==null){switch($.$$typeof){case T:return C=C.get($.key===null?D:$.key)||null,j(N,C,$,de);case k:return C=C.get($.key===null?D:$.key)||null,M(N,C,$,de);case le:return $=Is($),B(C,N,D,$,de)}if(Xt($)||Vt($))return C=C.get(D)||null,z(N,C,$,de,null);if(typeof $.then=="function")return B(C,N,D,oo($),de);if($.$$typeof===P)return B(C,N,D,so(N,$),de);co(N,$)}return null}function re(C,N,D,$){for(var de=null,Le=null,ie=N,je=N=0,Ce=null;ie!==null&&je<D.length;je++){ie.index>je?(Ce=ie,ie=null):Ce=ie.sibling;var ze=U(C,ie,D[je],$);if(ze===null){ie===null&&(ie=Ce);break}e&&ie&&ze.alternate===null&&t(C,ie),N=u(ze,N,je),Le===null?de=ze:Le.sibling=ze,Le=ze,ie=Ce}if(je===D.length)return a(C,ie),Oe&&An(C,je),de;if(ie===null){for(;je<D.length;je++)ie=G(C,D[je],$),ie!==null&&(N=u(ie,N,je),Le===null?de=ie:Le.sibling=ie,Le=ie);return Oe&&An(C,je),de}for(ie=s(ie);je<D.length;je++)Ce=B(ie,C,je,D[je],$),Ce!==null&&(e&&Ce.alternate!==null&&ie.delete(Ce.key===null?je:Ce.key),N=u(Ce,N,je),Le===null?de=Ce:Le.sibling=Ce,Le=Ce);return e&&ie.forEach(function(Ss){return t(C,Ss)}),Oe&&An(C,je),de}function me(C,N,D,$){if(D==null)throw Error(i(151));for(var de=null,Le=null,ie=N,je=N=0,Ce=null,ze=D.next();ie!==null&&!ze.done;je++,ze=D.next()){ie.index>je?(Ce=ie,ie=null):Ce=ie.sibling;var Ss=U(C,ie,ze.value,$);if(Ss===null){ie===null&&(ie=Ce);break}e&&ie&&Ss.alternate===null&&t(C,ie),N=u(Ss,N,je),Le===null?de=Ss:Le.sibling=Ss,Le=Ss,ie=Ce}if(ze.done)return a(C,ie),Oe&&An(C,je),de;if(ie===null){for(;!ze.done;je++,ze=D.next())ze=G(C,ze.value,$),ze!==null&&(N=u(ze,N,je),Le===null?de=ze:Le.sibling=ze,Le=ze);return Oe&&An(C,je),de}for(ie=s(ie);!ze.done;je++,ze=D.next())ze=B(ie,C,je,ze.value,$),ze!==null&&(e&&ze.alternate!==null&&ie.delete(ze.key===null?je:ze.key),N=u(ze,N,je),Le===null?de=ze:Le.sibling=ze,Le=ze);return e&&ie.forEach(function(Ng){return t(C,Ng)}),Oe&&An(C,je),de}function Ze(C,N,D,$){if(typeof D=="object"&&D!==null&&D.type===q&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case T:e:{for(var de=D.key;N!==null;){if(N.key===de){if(de=D.type,de===q){if(N.tag===7){a(C,N.sibling),$=c(N,D.props.children),$.return=C,C=$;break e}}else if(N.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===le&&Is(de)===N.type){a(C,N.sibling),$=c(N,D.props),ql($,D),$.return=C,C=$;break e}a(C,N);break}else t(C,N);N=N.sibling}D.type===q?($=zs(D.props.children,C.mode,$,D.key),$.return=C,C=$):($=to(D.type,D.key,D.props,null,C.mode,$),ql($,D),$.return=C,C=$)}return m(C);case k:e:{for(de=D.key;N!==null;){if(N.key===de)if(N.tag===4&&N.stateNode.containerInfo===D.containerInfo&&N.stateNode.implementation===D.implementation){a(C,N.sibling),$=c(N,D.children||[]),$.return=C,C=$;break e}else{a(C,N);break}else t(C,N);N=N.sibling}$=Bc(D,C.mode,$),$.return=C,C=$}return m(C);case le:return D=Is(D),Ze(C,N,D,$)}if(Xt(D))return re(C,N,D,$);if(Vt(D)){if(de=Vt(D),typeof de!="function")throw Error(i(150));return D=de.call(D),me(C,N,D,$)}if(typeof D.then=="function")return Ze(C,N,oo(D),$);if(D.$$typeof===P)return Ze(C,N,so(C,D),$);co(C,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,N!==null&&N.tag===6?(a(C,N.sibling),$=c(N,D),$.return=C,C=$):(a(C,N),$=Uc(D,C.mode,$),$.return=C,C=$),m(C)):a(C,N)}return function(C,N,D,$){try{Bl=0;var de=Ze(C,N,D,$);return Er=null,de}catch(ie){if(ie===Ar||ie===lo)throw ie;var Le=ma(29,ie,null,C.mode);return Le.lanes=$,Le.return=C,Le}finally{}}}var Ps=kh(!0),Nh=kh(!1),rs=!1;function Kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ls(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function is(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,($e&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=eo(e),uh(e,null,a),t}return Wi(e,s,t,a),eo(e)}function Ll(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Pn(e,a)}}function Qc(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var c=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?c=u=m:u=u.next=m,a=a.next}while(a!==null);u===null?c=u=t:u=u.next=t}else c=u=t;a={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Zc=!1;function zl(){if(Zc){var e=Nr;if(e!==null)throw e}}function Vl(e,t,a,s){Zc=!1;var c=e.updateQueue;rs=!1;var u=c.firstBaseUpdate,m=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var j=x,M=j.next;j.next=null,m===null?u=M:m.next=M,m=j;var z=e.alternate;z!==null&&(z=z.updateQueue,x=z.lastBaseUpdate,x!==m&&(x===null?z.firstBaseUpdate=M:x.next=M,z.lastBaseUpdate=j))}if(u!==null){var G=c.baseState;m=0,z=M=j=null,x=u;do{var U=x.lane&-536870913,B=U!==x.lane;if(B?(Ee&U)===U:(s&U)===U){U!==0&&U===kr&&(Zc=!0),z!==null&&(z=z.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var re=e,me=x;U=t;var Ze=a;switch(me.tag){case 1:if(re=me.payload,typeof re=="function"){G=re.call(Ze,G,U);break e}G=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=me.payload,U=typeof re=="function"?re.call(Ze,G,U):re,U==null)break e;G=S({},G,U);break e;case 2:rs=!0}}U=x.callback,U!==null&&(e.flags|=64,B&&(e.flags|=8192),B=c.callbacks,B===null?c.callbacks=[U]:B.push(U))}else B={lane:U,tag:x.tag,payload:x.payload,callback:x.callback,next:null},z===null?(M=z=B,j=G):z=z.next=B,m|=U;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;B=x,x=B.next,B.next=null,c.lastBaseUpdate=B,c.shared.pending=null}}while(!0);z===null&&(j=G),c.baseState=j,c.firstBaseUpdate=M,c.lastBaseUpdate=z,u===null&&(c.shared.lanes=0),hs|=m,e.lanes=m,e.memoizedState=G}}function Ah(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Eh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ah(a[e],t)}var Cr=A(null),uo=A(0);function Ch(e,t){e=zn,F(uo,e),F(Cr,t),zn=e|t.baseLanes}function Fc(){F(uo,zn),F(Cr,Cr.current)}function Wc(){zn=uo.current,I(Cr),I(uo)}var pa=A(null),Ra=null;function os(e){var t=e.alternate;F(mt,mt.current&1),F(pa,e),Ra===null&&(t===null||Cr.current!==null||t.memoizedState!==null)&&(Ra=e)}function eu(e){F(mt,mt.current),F(pa,e),Ra===null&&(Ra=e)}function Rh(e){e.tag===22?(F(mt,mt.current),F(pa,e),Ra===null&&(Ra=e)):cs()}function cs(){F(mt,mt.current),F(pa,pa.current)}function ga(e){I(pa),Ra===e&&(Ra=null),I(mt)}var mt=A(0);function ho(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ld(a)||id(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rn=0,_e=null,Xe=null,bt=null,fo=!1,Rr=!1,Js=!1,mo=0,Hl=0,Or=null,bp=0;function ut(){throw Error(i(321))}function tu(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Dt(e[a],t[a]))return!1;return!0}function au(e,t,a,s,c,u){return Rn=u,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=e===null||e.memoizedState===null?pf:bu,Js=!1,u=a(s,c),Js=!1,Rr&&(u=Dh(t,a,s,c)),Oh(e),u}function Oh(e){L.H=Il;var t=Xe!==null&&Xe.next!==null;if(Rn=0,bt=Xe=_e=null,fo=!1,Hl=0,Or=null,t)throw Error(i(300));e===null||xt||(e=e.dependencies,e!==null&&no(e)&&(xt=!0))}function Dh(e,t,a,s){_e=e;var c=0;do{if(Rr&&(Or=null),Hl=0,Rr=!1,25<=c)throw Error(i(301));if(c+=1,bt=Xe=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}L.H=gf,u=t(a,s)}while(Rr);return u}function xp(){var e=L.H,t=e.useState()[0];return t=typeof t.then=="function"?$l(t):t,e=e.useState()[0],(Xe!==null?Xe.memoizedState:null)!==e&&(_e.flags|=1024),t}function nu(){var e=mo!==0;return mo=0,e}function su(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ru(e){if(fo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fo=!1}Rn=0,bt=Xe=_e=null,Rr=!1,Hl=mo=0,Or=null}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?_e.memoizedState=bt=e:bt=bt.next=e,bt}function pt(){if(Xe===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=bt===null?_e.memoizedState:bt.next;if(t!==null)bt=t,Xe=e;else{if(e===null)throw _e.alternate===null?Error(i(467)):Error(i(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},bt===null?_e.memoizedState=bt=e:bt=bt.next=e}return bt}function po(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(e){var t=Hl;return Hl+=1,Or===null&&(Or=[]),e=_h(Or,e,t),t=_e,(bt===null?t.memoizedState:bt.next)===null&&(t=t.alternate,L.H=t===null||t.memoizedState===null?pf:bu),e}function go(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $l(e);if(e.$$typeof===P)return Ut(e)}throw Error(i(438,String(e)))}function lu(e){var t=null,a=_e.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=_e.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=po(),_e.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=Ts;return t.index++,a}function On(e,t){return typeof t=="function"?t(e):t}function bo(e){var t=pt();return iu(t,Xe,e)}function iu(e,t,a){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=a;var c=e.baseQueue,u=s.pending;if(u!==null){if(c!==null){var m=c.next;c.next=u.next,u.next=m}t.baseQueue=c=u,s.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var x=m=null,j=null,M=t,z=!1;do{var G=M.lane&-536870913;if(G!==M.lane?(Ee&G)===G:(Rn&G)===G){var U=M.revertLane;if(U===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),G===kr&&(z=!0);else if((Rn&U)===U){M=M.next,U===kr&&(z=!0);continue}else G={lane:0,revertLane:M.revertLane,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},j===null?(x=j=G,m=u):j=j.next=G,_e.lanes|=U,hs|=U;G=M.action,Js&&a(u,G),u=M.hasEagerState?M.eagerState:a(u,G)}else U={lane:G,revertLane:M.revertLane,gesture:M.gesture,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},j===null?(x=j=U,m=u):j=j.next=U,_e.lanes|=G,hs|=G;M=M.next}while(M!==null&&M!==t);if(j===null?m=u:j.next=x,!Dt(u,e.memoizedState)&&(xt=!0,z&&(a=Nr,a!==null)))throw a;e.memoizedState=u,e.baseState=m,e.baseQueue=j,s.lastRenderedState=u}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function ou(e){var t=pt(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var s=a.dispatch,c=a.pending,u=t.memoizedState;if(c!==null){a.pending=null;var m=c=c.next;do u=e(u,m.action),m=m.next;while(m!==c);Dt(u,t.memoizedState)||(xt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,s]}function Mh(e,t,a){var s=_e,c=pt(),u=Oe;if(u){if(a===void 0)throw Error(i(407));a=a()}else a=t();var m=!Dt((Xe||c).memoizedState,a);if(m&&(c.memoizedState=a,xt=!0),c=c.queue,du(qh.bind(null,s,c,e),[e]),c.getSnapshot!==t||m||bt!==null&&bt.memoizedState.tag&1){if(s.flags|=2048,Dr(9,{destroy:void 0},Bh.bind(null,s,c,a,t),null),We===null)throw Error(i(349));u||(Rn&127)!==0||Uh(s,t,a)}return a}function Uh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=_e.updateQueue,t===null?(t=po(),_e.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Bh(e,t,a,s){t.value=a,t.getSnapshot=s,Lh(t)&&zh(e)}function qh(e,t,a){return a(function(){Lh(t)&&zh(e)})}function Lh(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Dt(e,a)}catch{return!0}}function zh(e){var t=Ls(e,2);t!==null&&la(t,e,2)}function cu(e){var t=Kt();if(typeof e=="function"){var a=e;if(e=a(),Js){ia(!0);try{a()}finally{ia(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:e},t}function Vh(e,t,a,s){return e.baseState=a,iu(e,Xe,typeof s=="function"?s:On)}function yp(e,t,a,s,c){if(vo(e))throw Error(i(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){u.listeners.push(m)}};L.T!==null?a(!0):u.isTransition=!1,s(u),a=t.pending,a===null?(u.next=t.pending=u,Hh(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Hh(e,t){var a=t.action,s=t.payload,c=e.state;if(t.isTransition){var u=L.T,m={};L.T=m;try{var x=a(c,s),j=L.S;j!==null&&j(m,x),$h(e,t,x)}catch(M){uu(e,t,M)}finally{u!==null&&m.types!==null&&(u.types=m.types),L.T=u}}else try{u=a(c,s),$h(e,t,u)}catch(M){uu(e,t,M)}}function $h(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Gh(e,t,s)},function(s){return uu(e,t,s)}):Gh(e,t,a)}function Gh(e,t,a){t.status="fulfilled",t.value=a,Ih(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Hh(e,a)))}function uu(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Ih(t),t=t.next;while(t!==s)}e.action=null}function Ih(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Yh(e,t){return t}function Ph(e,t){if(Oe){var a=We.formState;if(a!==null){e:{var s=_e;if(Oe){if(nt){t:{for(var c=nt,u=Ca;c.nodeType!==8;){if(!u){c=null;break t}if(c=Oa(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){nt=Oa(c.nextSibling),s=c.data==="F!";break e}}ns(s)}s=!1}s&&(t=a[0])}}return a=Kt(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yh,lastRenderedState:t},a.queue=s,a=hf.bind(null,_e,s),s.dispatch=a,s=cu(!1),u=gu.bind(null,_e,!1,s.queue),s=Kt(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,a=yp.bind(null,_e,c,u,a),c.dispatch=a,s.memoizedState=e,[t,a,!1]}function Jh(e){var t=pt();return Kh(t,Xe,e)}function Kh(e,t,a){if(t=iu(e,t,Yh)[0],e=bo(On)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=$l(t)}catch(m){throw m===Ar?lo:m}else s=t;t=pt();var c=t.queue,u=c.dispatch;return a!==t.memoizedState&&(_e.flags|=2048,Dr(9,{destroy:void 0},vp.bind(null,c,a),null)),[s,u,e]}function vp(e,t){e.action=t}function Xh(e){var t=pt(),a=Xe;if(a!==null)return Kh(t,a,e);pt(),t=t.memoizedState,a=pt();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Dr(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=_e.updateQueue,t===null&&(t=po(),_e.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Qh(){return pt().memoizedState}function xo(e,t,a,s){var c=Kt();_e.flags|=e,c.memoizedState=Dr(1|t,{destroy:void 0},a,s===void 0?null:s)}function yo(e,t,a,s){var c=pt();s=s===void 0?null:s;var u=c.memoizedState.inst;Xe!==null&&s!==null&&tu(s,Xe.memoizedState.deps)?c.memoizedState=Dr(t,u,a,s):(_e.flags|=e,c.memoizedState=Dr(1|t,u,a,s))}function Zh(e,t){xo(8390656,8,e,t)}function du(e,t){yo(2048,8,e,t)}function wp(e){_e.flags|=4;var t=_e.updateQueue;if(t===null)t=po(),_e.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Fh(e){var t=pt().memoizedState;return wp({ref:t,nextImpl:e}),function(){if(($e&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Wh(e,t){return yo(4,2,e,t)}function ef(e,t){return yo(4,4,e,t)}function tf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function af(e,t,a){a=a!=null?a.concat([e]):null,yo(4,4,tf.bind(null,t,e),a)}function hu(){}function nf(e,t){var a=pt();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&tu(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function sf(e,t){var a=pt();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&tu(t,s[1]))return s[0];if(s=e(),Js){ia(!0);try{e()}finally{ia(!1)}}return a.memoizedState=[s,t],s}function fu(e,t,a){return a===void 0||(Rn&1073741824)!==0&&(Ee&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=l0(),_e.lanes|=e,hs|=e,a)}function rf(e,t,a,s){return Dt(a,t)?a:Cr.current!==null?(e=fu(e,a,s),Dt(e,t)||(xt=!0),e):(Rn&42)===0||(Rn&1073741824)!==0&&(Ee&261930)===0?(xt=!0,e.memoizedState=a):(e=l0(),_e.lanes|=e,hs|=e,t)}function lf(e,t,a,s,c){var u=ee.p;ee.p=u!==0&&8>u?u:8;var m=L.T,x={};L.T=x,gu(e,!1,t,a);try{var j=c(),M=L.S;if(M!==null&&M(x,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var z=gp(j,s);Gl(e,t,z,ya(e))}else Gl(e,t,s,ya(e))}catch(G){Gl(e,t,{then:function(){},status:"rejected",reason:G},ya())}finally{ee.p=u,m!==null&&x.types!==null&&(m.types=x.types),L.T=m}}function Sp(){}function mu(e,t,a,s){if(e.tag!==5)throw Error(i(476));var c=of(e).queue;lf(e,c,t,fe,a===null?Sp:function(){return cf(e),a(s)})}function of(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:fe},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function cf(e){var t=of(e);t.next===null&&(t=e.alternate.memoizedState),Gl(e,t.next.queue,{},ya())}function pu(){return Ut(li)}function uf(){return pt().memoizedState}function df(){return pt().memoizedState}function _p(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=ya();e=ls(a);var s=is(t,e,a);s!==null&&(la(s,t,a),Ll(s,t,a)),t={cache:Ic()},e.payload=t;return}t=t.return}}function jp(e,t,a){var s=ya();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},vo(e)?ff(t,a):(a=Dc(e,t,a,s),a!==null&&(la(a,e,s),mf(a,t,s)))}function hf(e,t,a){var s=ya();Gl(e,t,a,s)}function Gl(e,t,a,s){var c={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(vo(e))ff(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var m=t.lastRenderedState,x=u(m,a);if(c.hasEagerState=!0,c.eagerState=x,Dt(x,m))return Wi(e,t,c,0),We===null&&Fi(),!1}catch{}finally{}if(a=Dc(e,t,c,s),a!==null)return la(a,e,s),mf(a,t,s),!0}return!1}function gu(e,t,a,s){if(s={lane:2,revertLane:Ku(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},vo(e)){if(t)throw Error(i(479))}else t=Dc(e,a,s,2),t!==null&&la(t,e,2)}function vo(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function ff(e,t){Rr=fo=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function mf(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Pn(e,a)}}var Il={readContext:Ut,use:go,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};Il.useEffectEvent=ut;var pf={readContext:Ut,use:go,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:Zh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,xo(4194308,4,tf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return xo(4194308,4,e,t)},useInsertionEffect:function(e,t){xo(4,2,e,t)},useMemo:function(e,t){var a=Kt();t=t===void 0?null:t;var s=e();if(Js){ia(!0);try{e()}finally{ia(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=Kt();if(a!==void 0){var c=a(t);if(Js){ia(!0);try{a(t)}finally{ia(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=jp.bind(null,_e,e),[s.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:function(e){e=cu(e);var t=e.queue,a=hf.bind(null,_e,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:hu,useDeferredValue:function(e,t){var a=Kt();return fu(a,e,t)},useTransition:function(){var e=cu(!1);return e=lf.bind(null,_e,e.queue,!0,!1),Kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=_e,c=Kt();if(Oe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),We===null)throw Error(i(349));(Ee&127)!==0||Uh(s,t,a)}c.memoizedState=a;var u={value:a,getSnapshot:t};return c.queue=u,Zh(qh.bind(null,s,u,e),[e]),s.flags|=2048,Dr(9,{destroy:void 0},Bh.bind(null,s,u,a,t),null),a},useId:function(){var e=Kt(),t=We.identifierPrefix;if(Oe){var a=rn,s=sn;a=(s&~(1<<32-Zt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=mo++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=bp++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:pu,useFormState:Ph,useActionState:Ph,useOptimistic:function(e){var t=Kt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=gu.bind(null,_e,!0,a),a.dispatch=t,[e,t]},useMemoCache:lu,useCacheRefresh:function(){return Kt().memoizedState=_p.bind(null,_e)},useEffectEvent:function(e){var t=Kt(),a={impl:e};return t.memoizedState=a,function(){if(($e&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},bu={readContext:Ut,use:go,useCallback:nf,useContext:Ut,useEffect:du,useImperativeHandle:af,useInsertionEffect:Wh,useLayoutEffect:ef,useMemo:sf,useReducer:bo,useRef:Qh,useState:function(){return bo(On)},useDebugValue:hu,useDeferredValue:function(e,t){var a=pt();return rf(a,Xe.memoizedState,e,t)},useTransition:function(){var e=bo(On)[0],t=pt().memoizedState;return[typeof e=="boolean"?e:$l(e),t]},useSyncExternalStore:Mh,useId:uf,useHostTransitionStatus:pu,useFormState:Jh,useActionState:Jh,useOptimistic:function(e,t){var a=pt();return Vh(a,Xe,e,t)},useMemoCache:lu,useCacheRefresh:df};bu.useEffectEvent=Fh;var gf={readContext:Ut,use:go,useCallback:nf,useContext:Ut,useEffect:du,useImperativeHandle:af,useInsertionEffect:Wh,useLayoutEffect:ef,useMemo:sf,useReducer:ou,useRef:Qh,useState:function(){return ou(On)},useDebugValue:hu,useDeferredValue:function(e,t){var a=pt();return Xe===null?fu(a,e,t):rf(a,Xe.memoizedState,e,t)},useTransition:function(){var e=ou(On)[0],t=pt().memoizedState;return[typeof e=="boolean"?e:$l(e),t]},useSyncExternalStore:Mh,useId:uf,useHostTransitionStatus:pu,useFormState:Xh,useActionState:Xh,useOptimistic:function(e,t){var a=pt();return Xe!==null?Vh(a,Xe,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:lu,useCacheRefresh:df};gf.useEffectEvent=Fh;function xu(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:S({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var yu={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=ya(),c=ls(s);c.payload=t,a!=null&&(c.callback=a),t=is(e,c,s),t!==null&&(la(t,e,s),Ll(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=ya(),c=ls(s);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=is(e,c,s),t!==null&&(la(t,e,s),Ll(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ya(),s=ls(a);s.tag=2,t!=null&&(s.callback=t),t=is(e,s,a),t!==null&&(la(t,e,a),Ll(t,e,a))}};function bf(e,t,a,s,c,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,m):t.prototype&&t.prototype.isPureReactComponent?!qs(a,s)||!qs(c,u):!0}function xf(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&yu.enqueueReplaceState(t,t.state,null)}function Ks(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=S({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function yf(e){Zi(e)}function vf(e){console.error(e)}function wf(e){Zi(e)}function wo(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Sf(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function vu(e,t,a){return a=ls(a),a.tag=3,a.payload={element:null},a.callback=function(){wo(e,t)},a}function _f(e){return e=ls(e),e.tag=3,e}function jf(e,t,a,s){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var u=s.value;e.payload=function(){return c(u)},e.callback=function(){Sf(t,a,s)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Sf(t,a,s),typeof c!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})})}function Tp(e,t,a,s,c){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Tr(t,a,c,!0),a=pa.current,a!==null){switch(a.tag){case 31:case 13:return Ra===null?Do():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=c,s===io?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Yu(e,s,c)),!1;case 22:return a.flags|=65536,s===io?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Yu(e,s,c)),!1}throw Error(i(435,a.tag))}return Yu(e,s,c),Do(),!1}if(Oe)return t=pa.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==zc&&(e=Error(i(422),{cause:s}),Dl(Na(e,a)))):(s!==zc&&(t=Error(i(423),{cause:s}),Dl(Na(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=Na(s,a),c=vu(e.stateNode,s,c),Qc(e,c),dt!==4&&(dt=2)),!1;var u=Error(i(520),{cause:s});if(u=Na(u,a),Fl===null?Fl=[u]:Fl.push(u),dt!==4&&(dt=2),t===null)return!0;s=Na(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=vu(a.stateNode,s,e),Qc(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(fs===null||!fs.has(u))))return a.flags|=65536,c&=-c,a.lanes|=c,c=_f(c),jf(c,e,a,s),Qc(a,c),!1}a=a.return}while(a!==null);return!1}var wu=Error(i(461)),xt=!1;function Bt(e,t,a,s){t.child=e===null?Nh(t,null,a,s):Ps(t,e.child,a,s)}function Tf(e,t,a,s,c){a=a.render;var u=t.ref;if("ref"in s){var m={};for(var x in s)x!=="ref"&&(m[x]=s[x])}else m=s;return $s(t),s=au(e,t,a,m,u,c),x=nu(),e!==null&&!xt?(su(e,t,c),Dn(e,t,c)):(Oe&&x&&qc(t),t.flags|=1,Bt(e,t,s,c),t.child)}function kf(e,t,a,s,c){if(e===null){var u=a.type;return typeof u=="function"&&!Mc(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,Nf(e,t,u,s,c)):(e=to(a.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Eu(e,c)){var m=u.memoizedProps;if(a=a.compare,a=a!==null?a:qs,a(m,s)&&e.ref===t.ref)return Dn(e,t,c)}return t.flags|=1,e=Nn(u,s),e.ref=t.ref,e.return=t,t.child=e}function Nf(e,t,a,s,c){if(e!==null){var u=e.memoizedProps;if(qs(u,s)&&e.ref===t.ref)if(xt=!1,t.pendingProps=s=u,Eu(e,c))(e.flags&131072)!==0&&(xt=!0);else return t.lanes=e.lanes,Dn(e,t,c)}return Su(e,t,a,s,c)}function Af(e,t,a,s){var c=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~u}else s=0,t.child=null;return Ef(e,t,u,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ro(t,u!==null?u.cachePool:null),u!==null?Ch(t,u):Fc(),Rh(t);else return s=t.lanes=536870912,Ef(e,t,u!==null?u.baseLanes|a:a,a,s)}else u!==null?(ro(t,u.cachePool),Ch(t,u),cs(),t.memoizedState=null):(e!==null&&ro(t,null),Fc(),cs());return Bt(e,t,c,a),t.child}function Yl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ef(e,t,a,s,c){var u=Pc();return u=u===null?null:{parent:gt._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&ro(t,null),Fc(),Rh(t),e!==null&&Tr(e,t,s,!0),t.childLanes=c,null}function So(e,t){return t=jo({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Cf(e,t,a){return Ps(t,e.child,null,a),e=So(t,t.pendingProps),e.flags|=2,ga(t),t.memoizedState=null,e}function kp(e,t,a){var s=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Oe){if(s.mode==="hidden")return e=So(t,s),t.lanes=536870912,Yl(null,e);if(eu(t),(e=nt)?(e=$0(e,Ca),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ts!==null?{id:sn,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},a=hh(e),a.return=t,t.child=a,Mt=t,nt=null)):e=null,e===null)throw ns(t);return t.lanes=536870912,null}return So(t,s)}var u=e.memoizedState;if(u!==null){var m=u.dehydrated;if(eu(t),c)if(t.flags&256)t.flags&=-257,t=Cf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(xt||Tr(e,t,a,!1),c=(a&e.childLanes)!==0,xt||c){if(s=We,s!==null&&(m=Ni(s,a),m!==0&&m!==u.retryLane))throw u.retryLane=m,Ls(e,m),la(s,e,m),wu;Do(),t=Cf(e,t,a)}else e=u.treeContext,nt=Oa(m.nextSibling),Mt=t,Oe=!0,as=null,Ca=!1,e!==null&&ph(t,e),t=So(t,s),t.flags|=4096;return t}return e=Nn(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function _o(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Su(e,t,a,s,c){return $s(t),a=au(e,t,a,s,void 0,c),s=nu(),e!==null&&!xt?(su(e,t,c),Dn(e,t,c)):(Oe&&s&&qc(t),t.flags|=1,Bt(e,t,a,c),t.child)}function Rf(e,t,a,s,c,u){return $s(t),t.updateQueue=null,a=Dh(t,s,a,c),Oh(e),s=nu(),e!==null&&!xt?(su(e,t,u),Dn(e,t,u)):(Oe&&s&&qc(t),t.flags|=1,Bt(e,t,a,u),t.child)}function Of(e,t,a,s,c){if($s(t),t.stateNode===null){var u=wr,m=a.contextType;typeof m=="object"&&m!==null&&(u=Ut(m)),u=new a(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=yu,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},Kc(t),m=a.contextType,u.context=typeof m=="object"&&m!==null?Ut(m):wr,u.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(xu(t,a,m,s),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(m=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),m!==u.state&&yu.enqueueReplaceState(u,u.state,null),Vl(t,s,u,c),zl(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var x=t.memoizedProps,j=Ks(a,x);u.props=j;var M=u.context,z=a.contextType;m=wr,typeof z=="object"&&z!==null&&(m=Ut(z));var G=a.getDerivedStateFromProps;z=typeof G=="function"||typeof u.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,z||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(x||M!==m)&&xf(t,u,s,m),rs=!1;var U=t.memoizedState;u.state=U,Vl(t,s,u,c),zl(),M=t.memoizedState,x||U!==M||rs?(typeof G=="function"&&(xu(t,a,G,s),M=t.memoizedState),(j=rs||bf(t,a,j,s,U,M,m))?(z||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=M),u.props=s,u.state=M,u.context=m,s=j):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,Xc(e,t),m=t.memoizedProps,z=Ks(a,m),u.props=z,G=t.pendingProps,U=u.context,M=a.contextType,j=wr,typeof M=="object"&&M!==null&&(j=Ut(M)),x=a.getDerivedStateFromProps,(M=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m!==G||U!==j)&&xf(t,u,s,j),rs=!1,U=t.memoizedState,u.state=U,Vl(t,s,u,c),zl();var B=t.memoizedState;m!==G||U!==B||rs||e!==null&&e.dependencies!==null&&no(e.dependencies)?(typeof x=="function"&&(xu(t,a,x,s),B=t.memoizedState),(z=rs||bf(t,a,z,s,U,B,j)||e!==null&&e.dependencies!==null&&no(e.dependencies))?(M||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,B,j),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,B,j)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=B),u.props=s,u.state=B,u.context=j,s=z):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,_o(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=Ps(t,e.child,null,c),t.child=Ps(t,null,a,c)):Bt(e,t,a,c),t.memoizedState=u.state,e=t.child):e=Dn(e,t,c),e}function Df(e,t,a,s){return Vs(),t.flags|=256,Bt(e,t,a,s),t.child}var _u={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ju(e){return{baseLanes:e,cachePool:wh()}}function Tu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=xa),e}function Mf(e,t,a){var s=t.pendingProps,c=!1,u=(t.flags&128)!==0,m;if((m=u)||(m=e!==null&&e.memoizedState===null?!1:(mt.current&2)!==0),m&&(c=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Oe){if(c?os(t):cs(),(e=nt)?(e=$0(e,Ca),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ts!==null?{id:sn,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},a=hh(e),a.return=t,t.child=a,Mt=t,nt=null)):e=null,e===null)throw ns(t);return id(e)?t.lanes=32:t.lanes=536870912,null}var x=s.children;return s=s.fallback,c?(cs(),c=t.mode,x=jo({mode:"hidden",children:x},c),s=zs(s,c,a,null),x.return=t,s.return=t,x.sibling=s,t.child=x,s=t.child,s.memoizedState=ju(a),s.childLanes=Tu(e,m,a),t.memoizedState=_u,Yl(null,s)):(os(t),ku(t,x))}var j=e.memoizedState;if(j!==null&&(x=j.dehydrated,x!==null)){if(u)t.flags&256?(os(t),t.flags&=-257,t=Nu(e,t,a)):t.memoizedState!==null?(cs(),t.child=e.child,t.flags|=128,t=null):(cs(),x=s.fallback,c=t.mode,s=jo({mode:"visible",children:s.children},c),x=zs(x,c,a,null),x.flags|=2,s.return=t,x.return=t,s.sibling=x,t.child=s,Ps(t,e.child,null,a),s=t.child,s.memoizedState=ju(a),s.childLanes=Tu(e,m,a),t.memoizedState=_u,t=Yl(null,s));else if(os(t),id(x)){if(m=x.nextSibling&&x.nextSibling.dataset,m)var M=m.dgst;m=M,s=Error(i(419)),s.stack="",s.digest=m,Dl({value:s,source:null,stack:null}),t=Nu(e,t,a)}else if(xt||Tr(e,t,a,!1),m=(a&e.childLanes)!==0,xt||m){if(m=We,m!==null&&(s=Ni(m,a),s!==0&&s!==j.retryLane))throw j.retryLane=s,Ls(e,s),la(m,e,s),wu;ld(x)||Do(),t=Nu(e,t,a)}else ld(x)?(t.flags|=192,t.child=e.child,t=null):(e=j.treeContext,nt=Oa(x.nextSibling),Mt=t,Oe=!0,as=null,Ca=!1,e!==null&&ph(t,e),t=ku(t,s.children),t.flags|=4096);return t}return c?(cs(),x=s.fallback,c=t.mode,j=e.child,M=j.sibling,s=Nn(j,{mode:"hidden",children:s.children}),s.subtreeFlags=j.subtreeFlags&65011712,M!==null?x=Nn(M,x):(x=zs(x,c,a,null),x.flags|=2),x.return=t,s.return=t,s.sibling=x,t.child=s,Yl(null,s),s=t.child,x=e.child.memoizedState,x===null?x=ju(a):(c=x.cachePool,c!==null?(j=gt._currentValue,c=c.parent!==j?{parent:j,pool:j}:c):c=wh(),x={baseLanes:x.baseLanes|a,cachePool:c}),s.memoizedState=x,s.childLanes=Tu(e,m,a),t.memoizedState=_u,Yl(e.child,s)):(os(t),a=e.child,e=a.sibling,a=Nn(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function ku(e,t){return t=jo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function jo(e,t){return e=ma(22,e,null,t),e.lanes=0,e}function Nu(e,t,a){return Ps(t,e.child,null,a),e=ku(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Uf(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),$c(e.return,t,a)}function Au(e,t,a,s,c,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:c,treeForkCount:u}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=a,m.tailMode=c,m.treeForkCount=u)}function Bf(e,t,a){var s=t.pendingProps,c=s.revealOrder,u=s.tail;s=s.children;var m=mt.current,x=(m&2)!==0;if(x?(m=m&1|2,t.flags|=128):m&=1,F(mt,m),Bt(e,t,s,a),s=Oe?Ol:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uf(e,a,t);else if(e.tag===19)Uf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&ho(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Au(t,!1,c,a,u,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ho(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Au(t,!0,a,null,u,s);break;case"together":Au(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Dn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),hs|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Tr(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=Nn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Nn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Eu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&no(e)))}function Np(e,t,a){switch(t.tag){case 3:Tt(t,t.stateNode.containerInfo),ss(t,gt,e.memoizedState.cache),Vs();break;case 27:case 5:ks(t);break;case 4:Tt(t,t.stateNode.containerInfo);break;case 10:ss(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,eu(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(os(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Mf(e,t,a):(os(t),e=Dn(e,t,a),e!==null?e.sibling:null);os(t);break;case 19:var c=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Tr(e,t,a,!1),s=(a&t.childLanes)!==0),c){if(s)return Bf(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),F(mt,mt.current),s)break;return null;case 22:return t.lanes=0,Af(e,t,a,t.pendingProps);case 24:ss(t,gt,e.memoizedState.cache)}return Dn(e,t,a)}function qf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)xt=!0;else{if(!Eu(e,a)&&(t.flags&128)===0)return xt=!1,Np(e,t,a);xt=(e.flags&131072)!==0}else xt=!1,Oe&&(t.flags&1048576)!==0&&mh(t,Ol,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=Is(t.elementType),t.type=e,typeof e=="function")Mc(e)?(s=Ks(e,s),t.tag=1,t=Of(null,t,e,s,a)):(t.tag=0,t=Su(null,t,e,s,a));else{if(e!=null){var c=e.$$typeof;if(c===he){t.tag=11,t=Tf(null,t,e,s,a);break e}else if(c===ae){t.tag=14,t=kf(null,t,e,s,a);break e}}throw t=Ht(e)||e,Error(i(306,t,""))}}return t;case 0:return Su(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,c=Ks(s,t.pendingProps),Of(e,t,s,c,a);case 3:e:{if(Tt(t,t.stateNode.containerInfo),e===null)throw Error(i(387));s=t.pendingProps;var u=t.memoizedState;c=u.element,Xc(e,t),Vl(t,s,null,a);var m=t.memoizedState;if(s=m.cache,ss(t,gt,s),s!==u.cache&&Gc(t,[gt],a,!0),zl(),s=m.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Df(e,t,s,a);break e}else if(s!==c){c=Na(Error(i(424)),t),Dl(c),t=Df(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(nt=Oa(e.firstChild),Mt=t,Oe=!0,as=null,Ca=!0,a=Nh(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vs(),s===c){t=Dn(e,t,a);break e}Bt(e,t,s,a)}t=t.child}return t;case 26:return _o(e,t),e===null?(a=K0(t.type,null,t.pendingProps,null))?t.memoizedState=a:Oe||(a=t.type,e=t.pendingProps,s=Vo(Te.current).createElement(a),s[De]=t,s[ft]=e,qt(s,a,e),et(s),t.stateNode=s):t.memoizedState=K0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ks(t),e===null&&Oe&&(s=t.stateNode=Y0(t.type,t.pendingProps,Te.current),Mt=t,Ca=!0,c=nt,bs(t.type)?(od=c,nt=Oa(s.firstChild)):nt=c),Bt(e,t,t.pendingProps.children,a),_o(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Oe&&((c=s=nt)&&(s=ng(s,t.type,t.pendingProps,Ca),s!==null?(t.stateNode=s,Mt=t,nt=Oa(s.firstChild),Ca=!1,c=!0):c=!1),c||ns(t)),ks(t),c=t.type,u=t.pendingProps,m=e!==null?e.memoizedProps:null,s=u.children,nd(c,u)?s=null:m!==null&&nd(c,m)&&(t.flags|=32),t.memoizedState!==null&&(c=au(e,t,xp,null,null,a),li._currentValue=c),_o(e,t),Bt(e,t,s,a),t.child;case 6:return e===null&&Oe&&((e=a=nt)&&(a=sg(a,t.pendingProps,Ca),a!==null?(t.stateNode=a,Mt=t,nt=null,e=!0):e=!1),e||ns(t)),null;case 13:return Mf(e,t,a);case 4:return Tt(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ps(t,null,s,a):Bt(e,t,s,a),t.child;case 11:return Tf(e,t,t.type,t.pendingProps,a);case 7:return Bt(e,t,t.pendingProps,a),t.child;case 8:return Bt(e,t,t.pendingProps.children,a),t.child;case 12:return Bt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,ss(t,t.type,s.value),Bt(e,t,s.children,a),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,$s(t),c=Ut(c),s=s(c),t.flags|=1,Bt(e,t,s,a),t.child;case 14:return kf(e,t,t.type,t.pendingProps,a);case 15:return Nf(e,t,t.type,t.pendingProps,a);case 19:return Bf(e,t,a);case 31:return kp(e,t,a);case 22:return Af(e,t,a,t.pendingProps);case 24:return $s(t),s=Ut(gt),e===null?(c=Pc(),c===null&&(c=We,u=Ic(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=a),c=u),t.memoizedState={parent:s,cache:c},Kc(t),ss(t,gt,c)):((e.lanes&a)!==0&&(Xc(e,t),Vl(t,null,null,a),zl()),c=e.memoizedState,u=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ss(t,gt,s)):(s=u.cache,ss(t,gt,s),s!==c.cache&&Gc(t,[gt],a,!0))),Bt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Mn(e){e.flags|=4}function Cu(e,t,a,s,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(u0())e.flags|=8192;else throw Ys=io,Jc}else e.flags&=-16777217}function Lf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!W0(t))if(u0())e.flags|=8192;else throw Ys=io,Jc}function To(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?wt():536870912,e.lanes|=t,qr|=t)}function Pl(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function Ap(e,t,a){var s=t.pendingProps;switch(Lc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Cn(gt),it(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(jr(t)?Mn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Vc())),st(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(Mn(t),u!==null?(st(t),Lf(t,u)):(st(t),Cu(t,c,null,s,a))):u?u!==e.memoizedState?(Mn(t),st(t),Lf(t,u)):(st(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Mn(t),st(t),Cu(t,c,e,s,a)),null;case 27:if(Ns(t),a=Te.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Mn(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return st(t),null}e=se.current,jr(t)?gh(t):(e=Y0(c,s,a),t.stateNode=e,Mn(t))}return st(t),null;case 5:if(Ns(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Mn(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return st(t),null}if(u=se.current,jr(t))gh(t);else{var m=Vo(Te.current);switch(u){case 1:u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=m.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?m.createElement(c,{is:s.is}):m.createElement(c)}}u[De]=t,u[ft]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=u;e:switch(qt(u,c,s),c){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Mn(t)}}return st(t),Cu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Mn(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(e=Te.current,jr(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,c=Mt,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[De]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||M0(e.nodeValue,a)),e||ns(t,!0)}else e=Vo(e).createTextNode(s),e[De]=t,t.stateNode=e}return st(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=jr(t),a!==null){if(e===null){if(!s)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[De]=t}else Vs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),e=!1}else a=Vc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(ga(t),t):(ga(t),null);if((t.flags&128)!==0)throw Error(i(558))}return st(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=jr(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(i(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));c[De]=t}else Vs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),c=!1}else c=Vc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(ga(t),t):(ga(t),null)}return ga(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==c&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),To(t,t.updateQueue),st(t),null);case 4:return it(),e===null&&Fu(t.stateNode.containerInfo),st(t),null;case 10:return Cn(t.type),st(t),null;case 19:if(I(mt),s=t.memoizedState,s===null)return st(t),null;if(c=(t.flags&128)!==0,u=s.rendering,u===null)if(c)Pl(s,!1);else{if(dt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=ho(e),u!==null){for(t.flags|=128,Pl(s,!1),e=u.updateQueue,t.updateQueue=e,To(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)dh(a,e),a=a.sibling;return F(mt,mt.current&1|2),Oe&&An(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Qt()>Co&&(t.flags|=128,c=!0,Pl(s,!1),t.lanes=4194304)}else{if(!c)if(e=ho(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,To(t,e),Pl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!Oe)return st(t),null}else 2*Qt()-s.renderingStartTime>Co&&a!==536870912&&(t.flags|=128,c=!0,Pl(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,a=mt.current,F(mt,c?a&1|2:a&1),Oe&&An(t,s.treeForkCount),e):(st(t),null);case 22:case 23:return ga(t),Wc(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),a=t.updateQueue,a!==null&&To(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&I(Gs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Cn(gt),st(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Ep(e,t){switch(Lc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(gt),it(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ns(t),null;case 31:if(t.memoizedState!==null){if(ga(t),t.alternate===null)throw Error(i(340));Vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ga(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(mt),null;case 4:return it(),null;case 10:return Cn(t.type),null;case 22:case 23:return ga(t),Wc(),e!==null&&I(Gs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Cn(gt),null;case 25:return null;default:return null}}function zf(e,t){switch(Lc(t),t.tag){case 3:Cn(gt),it();break;case 26:case 27:case 5:Ns(t);break;case 4:it();break;case 31:t.memoizedState!==null&&ga(t);break;case 13:ga(t);break;case 19:I(mt);break;case 10:Cn(t.type);break;case 22:case 23:ga(t),Wc(),e!==null&&I(Gs);break;case 24:Cn(gt)}}function Jl(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var c=s.next;a=c;do{if((a.tag&e)===e){s=void 0;var u=a.create,m=a.inst;s=u(),m.destroy=s}a=a.next}while(a!==c)}}catch(x){Ye(t,t.return,x)}}function us(e,t,a){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var u=c.next;s=u;do{if((s.tag&e)===e){var m=s.inst,x=m.destroy;if(x!==void 0){m.destroy=void 0,c=t;var j=a,M=x;try{M()}catch(z){Ye(c,j,z)}}}s=s.next}while(s!==u)}}catch(z){Ye(t,t.return,z)}}function Vf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Eh(t,a)}catch(s){Ye(e,e.return,s)}}}function Hf(e,t,a){a.props=Ks(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Ye(e,t,s)}}function Kl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(c){Ye(e,t,c)}}function ln(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(c){Ye(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Ye(e,t,c)}else a.current=null}function $f(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(c){Ye(e,e.return,c)}}function Ru(e,t,a){try{var s=e.stateNode;Zp(s,e.type,a,t),s[ft]=t}catch(c){Ye(e,e.return,c)}}function Gf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&bs(e.type)||e.tag===4}function Ou(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&bs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Du(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ea));else if(s!==4&&(s===27&&bs(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Du(e,t,a),e=e.sibling;e!==null;)Du(e,t,a),e=e.sibling}function ko(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&bs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ko(e,t,a),e=e.sibling;e!==null;)ko(e,t,a),e=e.sibling}function If(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);qt(t,s,a),t[De]=e,t[ft]=a}catch(u){Ye(e,e.return,u)}}var Un=!1,yt=!1,Mu=!1,Yf=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function Cp(e,t){if(e=e.containerInfo,td=Jo,e=Qi(e),g(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var c=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var m=0,x=-1,j=-1,M=0,z=0,G=e,U=null;t:for(;;){for(var B;G!==a||c!==0&&G.nodeType!==3||(x=m+c),G!==u||s!==0&&G.nodeType!==3||(j=m+s),G.nodeType===3&&(m+=G.nodeValue.length),(B=G.firstChild)!==null;)U=G,G=B;for(;;){if(G===e)break t;if(U===a&&++M===c&&(x=m),U===u&&++z===s&&(j=m),(B=G.nextSibling)!==null)break;G=U,U=G.parentNode}G=B}a=x===-1||j===-1?null:{start:x,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(ad={focusedElem:e,selectionRange:a},Jo=!1,Ct=t;Ct!==null;)if(t=Ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ct=e;else for(;Ct!==null;){switch(t=Ct,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,c=u.memoizedProps,u=u.memoizedState,s=a.stateNode;try{var re=Ks(a.type,c);e=s.getSnapshotBeforeUpdate(re,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(me){Ye(a,a.return,me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)rd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":rd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Ct=e;break}Ct=t.return}}function Pf(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:qn(e,a),s&4&&Jl(5,a);break;case 1:if(qn(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){Ye(a,a.return,m)}else{var c=Ks(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Ye(a,a.return,m)}}s&64&&Vf(a),s&512&&Kl(a,a.return);break;case 3:if(qn(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Eh(e,t)}catch(m){Ye(a,a.return,m)}}break;case 27:t===null&&s&4&&If(a);case 26:case 5:qn(e,a),t===null&&s&4&&$f(a),s&512&&Kl(a,a.return);break;case 12:qn(e,a);break;case 31:qn(e,a),s&4&&Xf(e,a);break;case 13:qn(e,a),s&4&&Qf(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=zp.bind(null,a),rg(e,a))));break;case 22:if(s=a.memoizedState!==null||Un,!s){t=t!==null&&t.memoizedState!==null||yt,c=Un;var u=yt;Un=s,(yt=t)&&!u?Ln(e,a,(a.subtreeFlags&8772)!==0):qn(e,a),Un=c,yt=u}break;case 30:break;default:qn(e,a)}}function Jf(e){var t=e.alternate;t!==null&&(e.alternate=null,Jf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&il(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var lt=null,aa=!1;function Bn(e,t,a){for(a=a.child;a!==null;)Kf(e,t,a),a=a.sibling}function Kf(e,t,a){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(dn,a)}catch{}switch(a.tag){case 26:yt||ln(a,t),Bn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||ln(a,t);var s=lt,c=aa;bs(a.type)&&(lt=a.stateNode,aa=!1),Bn(e,t,a),ni(a.stateNode),lt=s,aa=c;break;case 5:yt||ln(a,t);case 6:if(s=lt,c=aa,lt=null,Bn(e,t,a),lt=s,aa=c,lt!==null)if(aa)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(u){Ye(a,t,u)}else try{lt.removeChild(a.stateNode)}catch(u){Ye(a,t,u)}break;case 18:lt!==null&&(aa?(e=lt,V0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Yr(e)):V0(lt,a.stateNode));break;case 4:s=lt,c=aa,lt=a.stateNode.containerInfo,aa=!0,Bn(e,t,a),lt=s,aa=c;break;case 0:case 11:case 14:case 15:us(2,a,t),yt||us(4,a,t),Bn(e,t,a);break;case 1:yt||(ln(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Hf(a,t,s)),Bn(e,t,a);break;case 21:Bn(e,t,a);break;case 22:yt=(s=yt)||a.memoizedState!==null,Bn(e,t,a),yt=s;break;default:Bn(e,t,a)}}function Xf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Yr(e)}catch(a){Ye(t,t.return,a)}}}function Qf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Yr(e)}catch(a){Ye(t,t.return,a)}}function Rp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Yf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Yf),t;default:throw Error(i(435,e.tag))}}function No(e,t){var a=Rp(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var c=Vp.bind(null,e,s);s.then(c,c)}})}function na(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var c=a[s],u=e,m=t,x=m;e:for(;x!==null;){switch(x.tag){case 27:if(bs(x.type)){lt=x.stateNode,aa=!1;break e}break;case 5:lt=x.stateNode,aa=!1;break e;case 3:case 4:lt=x.stateNode.containerInfo,aa=!0;break e}x=x.return}if(lt===null)throw Error(i(160));Kf(u,m,c),lt=null,aa=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Zf(t,e),t=t.sibling}var Ha=null;function Zf(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:na(t,e),sa(e),s&4&&(us(3,e,e.return),Jl(3,e),us(5,e,e.return));break;case 1:na(t,e),sa(e),s&512&&(yt||a===null||ln(a,a.return)),s&64&&Un&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var c=Ha;if(na(t,e),sa(e),s&512&&(yt||a===null||ln(a,a.return)),s&4){var u=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":u=c.getElementsByTagName("title")[0],(!u||u[Ka]||u[De]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(s),c.head.insertBefore(u,c.querySelector("head > title"))),qt(u,s,a),u[De]=e,et(u),s=u;break e;case"link":var m=Z0("link","href",c).get(s+(a.href||""));if(m){for(var x=0;x<m.length;x++)if(u=m[x],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(x,1);break t}}u=c.createElement(s),qt(u,s,a),c.head.appendChild(u);break;case"meta":if(m=Z0("meta","content",c).get(s+(a.content||""))){for(x=0;x<m.length;x++)if(u=m[x],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(x,1);break t}}u=c.createElement(s),qt(u,s,a),c.head.appendChild(u);break;default:throw Error(i(468,s))}u[De]=e,et(u),s=u}e.stateNode=s}else F0(c,e.type,e.stateNode);else e.stateNode=Q0(c,s,e.memoizedProps);else u!==s?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,s===null?F0(c,e.type,e.stateNode):Q0(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Ru(e,e.memoizedProps,a.memoizedProps)}break;case 27:na(t,e),sa(e),s&512&&(yt||a===null||ln(a,a.return)),a!==null&&s&4&&Ru(e,e.memoizedProps,a.memoizedProps);break;case 5:if(na(t,e),sa(e),s&512&&(yt||a===null||ln(a,a.return)),e.flags&32){c=e.stateNode;try{Wa(c,"")}catch(re){Ye(e,e.return,re)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,Ru(e,c,a!==null?a.memoizedProps:c)),s&1024&&(Mu=!0);break;case 6:if(na(t,e),sa(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(re){Ye(e,e.return,re)}}break;case 3:if(Go=null,c=Ha,Ha=Ho(t.containerInfo),na(t,e),Ha=c,sa(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Yr(t.containerInfo)}catch(re){Ye(e,e.return,re)}Mu&&(Mu=!1,Ff(e));break;case 4:s=Ha,Ha=Ho(e.stateNode.containerInfo),na(t,e),sa(e),Ha=s;break;case 12:na(t,e),sa(e);break;case 31:na(t,e),sa(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,No(e,s)));break;case 13:na(t,e),sa(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Eo=Qt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,No(e,s)));break;case 22:c=e.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,M=Un,z=yt;if(Un=M||c,yt=z||j,na(t,e),yt=z,Un=M,sa(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||j||Un||yt||Xs(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){j=a=t;try{if(u=j.stateNode,c)m=u.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{x=j.stateNode;var G=j.memoizedProps.style,U=G!=null&&G.hasOwnProperty("display")?G.display:null;x.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(re){Ye(j,j.return,re)}}}else if(t.tag===6){if(a===null){j=t;try{j.stateNode.nodeValue=c?"":j.memoizedProps}catch(re){Ye(j,j.return,re)}}}else if(t.tag===18){if(a===null){j=t;try{var B=j.stateNode;c?H0(B,!0):H0(j.stateNode,!1)}catch(re){Ye(j,j.return,re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,No(e,a))));break;case 19:na(t,e),sa(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,No(e,s)));break;case 30:break;case 21:break;default:na(t,e),sa(e)}}function sa(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Gf(s)){a=s;break}s=s.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var c=a.stateNode,u=Ou(e);ko(e,u,c);break;case 5:var m=a.stateNode;a.flags&32&&(Wa(m,""),a.flags&=-33);var x=Ou(e);ko(e,x,m);break;case 3:case 4:var j=a.stateNode.containerInfo,M=Ou(e);Du(e,M,j);break;default:throw Error(i(161))}}catch(z){Ye(e,e.return,z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ff(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ff(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function qn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Pf(e,t.alternate,t),t=t.sibling}function Xs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:us(4,t,t.return),Xs(t);break;case 1:ln(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Hf(t,t.return,a),Xs(t);break;case 27:ni(t.stateNode);case 26:case 5:ln(t,t.return),Xs(t);break;case 22:t.memoizedState===null&&Xs(t);break;case 30:Xs(t);break;default:Xs(t)}e=e.sibling}}function Ln(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,u=t,m=u.flags;switch(u.tag){case 0:case 11:case 15:Ln(c,u,a),Jl(4,u);break;case 1:if(Ln(c,u,a),s=u,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(M){Ye(s,s.return,M)}if(s=u,c=s.updateQueue,c!==null){var x=s.stateNode;try{var j=c.shared.hiddenCallbacks;if(j!==null)for(c.shared.hiddenCallbacks=null,c=0;c<j.length;c++)Ah(j[c],x)}catch(M){Ye(s,s.return,M)}}a&&m&64&&Vf(u),Kl(u,u.return);break;case 27:If(u);case 26:case 5:Ln(c,u,a),a&&s===null&&m&4&&$f(u),Kl(u,u.return);break;case 12:Ln(c,u,a);break;case 31:Ln(c,u,a),a&&m&4&&Xf(c,u);break;case 13:Ln(c,u,a),a&&m&4&&Qf(c,u);break;case 22:u.memoizedState===null&&Ln(c,u,a),Kl(u,u.return);break;case 30:break;default:Ln(c,u,a)}t=t.sibling}}function Uu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ml(a))}function Bu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ml(e))}function $a(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wf(e,t,a,s),t=t.sibling}function Wf(e,t,a,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:$a(e,t,a,s),c&2048&&Jl(9,t);break;case 1:$a(e,t,a,s);break;case 3:$a(e,t,a,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ml(e)));break;case 12:if(c&2048){$a(e,t,a,s),e=t.stateNode;try{var u=t.memoizedProps,m=u.id,x=u.onPostCommit;typeof x=="function"&&x(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Ye(t,t.return,j)}}else $a(e,t,a,s);break;case 31:$a(e,t,a,s);break;case 13:$a(e,t,a,s);break;case 23:break;case 22:u=t.stateNode,m=t.alternate,t.memoizedState!==null?u._visibility&2?$a(e,t,a,s):Xl(e,t):u._visibility&2?$a(e,t,a,s):(u._visibility|=2,Mr(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Uu(m,t);break;case 24:$a(e,t,a,s),c&2048&&Bu(t.alternate,t);break;default:$a(e,t,a,s)}}function Mr(e,t,a,s,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,m=t,x=a,j=s,M=m.flags;switch(m.tag){case 0:case 11:case 15:Mr(u,m,x,j,c),Jl(8,m);break;case 23:break;case 22:var z=m.stateNode;m.memoizedState!==null?z._visibility&2?Mr(u,m,x,j,c):Xl(u,m):(z._visibility|=2,Mr(u,m,x,j,c)),c&&M&2048&&Uu(m.alternate,m);break;case 24:Mr(u,m,x,j,c),c&&M&2048&&Bu(m.alternate,m);break;default:Mr(u,m,x,j,c)}t=t.sibling}}function Xl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,c=s.flags;switch(s.tag){case 22:Xl(a,s),c&2048&&Uu(s.alternate,s);break;case 24:Xl(a,s),c&2048&&Bu(s.alternate,s);break;default:Xl(a,s)}t=t.sibling}}var Ql=8192;function Ur(e,t,a){if(e.subtreeFlags&Ql)for(e=e.child;e!==null;)e0(e,t,a),e=e.sibling}function e0(e,t,a){switch(e.tag){case 26:Ur(e,t,a),e.flags&Ql&&e.memoizedState!==null&&bg(a,Ha,e.memoizedState,e.memoizedProps);break;case 5:Ur(e,t,a);break;case 3:case 4:var s=Ha;Ha=Ho(e.stateNode.containerInfo),Ur(e,t,a),Ha=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Ql,Ql=16777216,Ur(e,t,a),Ql=s):Ur(e,t,a));break;default:Ur(e,t,a)}}function t0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Zl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ct=s,n0(s,e)}t0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)a0(e),e=e.sibling}function a0(e){switch(e.tag){case 0:case 11:case 15:Zl(e),e.flags&2048&&us(9,e,e.return);break;case 3:Zl(e);break;case 12:Zl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ao(e)):Zl(e);break;default:Zl(e)}}function Ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ct=s,n0(s,e)}t0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:us(8,t,t.return),Ao(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ao(t));break;default:Ao(t)}e=e.sibling}}function n0(e,t){for(;Ct!==null;){var a=Ct;switch(a.tag){case 0:case 11:case 15:us(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ml(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Ct=s;else e:for(a=e;Ct!==null;){s=Ct;var c=s.sibling,u=s.return;if(Jf(s),s===a){Ct=null;break e}if(c!==null){c.return=u,Ct=c;break e}Ct=u}}}var Op={getCacheForType:function(e){var t=Ut(gt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Ut(gt).controller.signal}},Dp=typeof WeakMap=="function"?WeakMap:Map,$e=0,We=null,Ne=null,Ee=0,Ie=0,ba=null,ds=!1,Br=!1,qu=!1,zn=0,dt=0,hs=0,Qs=0,Lu=0,xa=0,qr=0,Fl=null,ra=null,zu=!1,Eo=0,s0=0,Co=1/0,Ro=null,fs=null,_t=0,ms=null,Lr=null,Vn=0,Vu=0,Hu=null,r0=null,Wl=0,$u=null;function ya(){return($e&2)!==0&&Ee!==0?Ee&-Ee:L.T!==null?Ku():gc()}function l0(){if(xa===0)if((Ee&536870912)===0||Oe){var e=Ft;Ft<<=1,(Ft&3932160)===0&&(Ft=262144),xa=e}else xa=536870912;return e=pa.current,e!==null&&(e.flags|=32),xa}function la(e,t,a){(e===We&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&(zr(e,0),ps(e,Ee,xa,!1)),ct(e,a),(($e&2)===0||e!==We)&&(e===We&&(($e&2)===0&&(Qs|=a),dt===4&&ps(e,Ee,xa,!1)),on(e))}function i0(e,t,a){if(($e&6)!==0)throw Error(i(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||pn(e,t),c=s?Bp(e,t):Iu(e,t,!0),u=s;do{if(c===0){Br&&!s&&ps(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Mp(a)){c=Iu(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var x=e;c=Fl;var j=x.current.memoizedState.isDehydrated;if(j&&(zr(x,m).flags|=256),m=Iu(x,m,!1),m!==2){if(qu&&!j){x.errorRecoveryDisabledLanes|=u,Qs|=u,c=4;break e}u=ra,ra=c,u!==null&&(ra===null?ra=u:ra.push.apply(ra,u))}c=m}if(u=!1,c!==2)continue}}if(c===1){zr(e,0),ps(e,t,0,!0);break}e:{switch(s=e,u=c,u){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:ps(s,t,xa,!ds);break e;case 2:ra=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(c=Eo+300-Qt(),10<c)){if(ps(s,t,xa,!ds),Ja(s,0,!0)!==0)break e;Vn=t,s.timeoutHandle=L0(o0.bind(null,s,a,ra,Ro,zu,t,xa,Qs,qr,ds,u,"Throttled",-0,0),c);break e}o0(s,a,ra,Ro,zu,t,xa,Qs,qr,ds,u,null,-0,0)}}break}while(!0);on(e)}function o0(e,t,a,s,c,u,m,x,j,M,z,G,U,B){if(e.timeoutHandle=-1,G=t.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ea},e0(t,u,G);var re=(u&62914560)===u?Eo-Qt():(u&4194048)===u?s0-Qt():0;if(re=xg(G,re),re!==null){Vn=u,e.cancelPendingCommit=re(g0.bind(null,e,t,u,a,s,c,m,x,j,z,G,null,U,B)),ps(e,u,m,!M);return}}g0(e,t,u,a,s,c,m,x,j)}function Mp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var c=a[s],u=c.getSnapshot;c=c.value;try{if(!Dt(u(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ps(e,t,a,s){t&=~Lu,t&=~Qs,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var u=31-Zt(c),m=1<<u;s[u]=-1,c&=~m}a!==0&&gn(e,a,t)}function Oo(){return($e&6)===0?(ei(0),!1):!0}function Gu(){if(Ne!==null){if(Ie===0)var e=Ne.return;else e=Ne,En=Hs=null,ru(e),Er=null,Bl=0,e=Ne;for(;e!==null;)zf(e.alternate,e),e=e.return;Ne=null}}function zr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,eg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Vn=0,Gu(),We=e,Ne=a=Nn(e.current,null),Ee=t,Ie=0,ba=null,ds=!1,Br=pn(e,t),qu=!1,qr=xa=Lu=Qs=hs=dt=0,ra=Fl=null,zu=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-Zt(s),u=1<<c;t|=e[c],s&=~u}return zn=t,Fi(),a}function c0(e,t){_e=null,L.H=Il,t===Ar||t===lo?(t=jh(),Ie=3):t===Jc?(t=jh(),Ie=4):Ie=t===wu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ba=t,Ne===null&&(dt=1,wo(e,Na(t,e.current)))}function u0(){var e=pa.current;return e===null?!0:(Ee&4194048)===Ee?Ra===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?e===Ra:!1}function d0(){var e=L.H;return L.H=Il,e===null?Il:e}function h0(){var e=L.A;return L.A=Op,e}function Do(){dt=4,ds||(Ee&4194048)!==Ee&&pa.current!==null||(Br=!0),(hs&134217727)===0&&(Qs&134217727)===0||We===null||ps(We,Ee,xa,!1)}function Iu(e,t,a){var s=$e;$e|=2;var c=d0(),u=h0();(We!==e||Ee!==t)&&(Ro=null,zr(e,t)),t=!1;var m=dt;e:do try{if(Ie!==0&&Ne!==null){var x=Ne,j=ba;switch(Ie){case 8:Gu(),m=6;break e;case 3:case 2:case 9:case 6:pa.current===null&&(t=!0);var M=Ie;if(Ie=0,ba=null,Vr(e,x,j,M),a&&Br){m=0;break e}break;default:M=Ie,Ie=0,ba=null,Vr(e,x,j,M)}}Up(),m=dt;break}catch(z){c0(e,z)}while(!0);return t&&e.shellSuspendCounter++,En=Hs=null,$e=s,L.H=c,L.A=u,Ne===null&&(We=null,Ee=0,Fi()),m}function Up(){for(;Ne!==null;)f0(Ne)}function Bp(e,t){var a=$e;$e|=2;var s=d0(),c=h0();We!==e||Ee!==t?(Ro=null,Co=Qt()+500,zr(e,t)):Br=pn(e,t);e:do try{if(Ie!==0&&Ne!==null){t=Ne;var u=ba;t:switch(Ie){case 1:Ie=0,ba=null,Vr(e,t,u,1);break;case 2:case 9:if(Sh(u)){Ie=0,ba=null,m0(t);break}t=function(){Ie!==2&&Ie!==9||We!==e||(Ie=7),on(e)},u.then(t,t);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Sh(u)?(Ie=0,ba=null,m0(t)):(Ie=0,ba=null,Vr(e,t,u,7));break;case 5:var m=null;switch(Ne.tag){case 26:m=Ne.memoizedState;case 5:case 27:var x=Ne;if(m?W0(m):x.stateNode.complete){Ie=0,ba=null;var j=x.sibling;if(j!==null)Ne=j;else{var M=x.return;M!==null?(Ne=M,Mo(M)):Ne=null}break t}}Ie=0,ba=null,Vr(e,t,u,5);break;case 6:Ie=0,ba=null,Vr(e,t,u,6);break;case 8:Gu(),dt=6;break e;default:throw Error(i(462))}}qp();break}catch(z){c0(e,z)}while(!0);return En=Hs=null,L.H=s,L.A=c,$e=a,Ne!==null?0:(We=null,Ee=0,Fi(),dt)}function qp(){for(;Ne!==null&&!nh();)f0(Ne)}function f0(e){var t=qf(e.alternate,e,zn);e.memoizedProps=e.pendingProps,t===null?Mo(e):Ne=t}function m0(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Rf(a,t,t.pendingProps,t.type,void 0,Ee);break;case 11:t=Rf(a,t,t.pendingProps,t.type.render,t.ref,Ee);break;case 5:ru(t);default:zf(a,t),t=Ne=dh(t,zn),t=qf(a,t,zn)}e.memoizedProps=e.pendingProps,t===null?Mo(e):Ne=t}function Vr(e,t,a,s){En=Hs=null,ru(t),Er=null,Bl=0;var c=t.return;try{if(Tp(e,c,t,a,Ee)){dt=1,wo(e,Na(a,e.current)),Ne=null;return}}catch(u){if(c!==null)throw Ne=c,u;dt=1,wo(e,Na(a,e.current)),Ne=null;return}t.flags&32768?(Oe||s===1?e=!0:Br||(Ee&536870912)!==0?e=!1:(ds=e=!0,(s===2||s===9||s===3||s===6)&&(s=pa.current,s!==null&&s.tag===13&&(s.flags|=16384))),p0(t,e)):Mo(t)}function Mo(e){var t=e;do{if((t.flags&32768)!==0){p0(t,ds);return}e=t.return;var a=Ap(t.alternate,t,zn);if(a!==null){Ne=a;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);dt===0&&(dt=5)}function p0(e,t){do{var a=Ep(e.alternate,e);if(a!==null){a.flags&=32767,Ne=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=a}while(e!==null);dt=6,Ne=null}function g0(e,t,a,s,c,u,m,x,j){e.cancelPendingCommit=null;do Uo();while(_t!==0);if(($e&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(u=t.lanes|t.childLanes,u|=Oc,ll(e,a,u,m,x,j),e===We&&(Ne=We=null,Ee=0),Lr=t,ms=e,Vn=a,Vu=u,Hu=c,r0=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Hp(kt,function(){return w0(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=L.T,L.T=null,c=ee.p,ee.p=2,m=$e,$e|=4;try{Cp(e,t,a)}finally{$e=m,ee.p=c,L.T=s}}_t=1,b0(),x0(),y0()}}function b0(){if(_t===1){_t=0;var e=ms,t=Lr,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=L.T,L.T=null;var s=ee.p;ee.p=2;var c=$e;$e|=4;try{Zf(t,e);var u=ad,m=Qi(e.containerInfo),x=u.focusedElem,j=u.selectionRange;if(m!==x&&x&&x.ownerDocument&&nn(x.ownerDocument.documentElement,x)){if(j!==null&&g(x)){var M=j.start,z=j.end;if(z===void 0&&(z=M),"selectionStart"in x)x.selectionStart=M,x.selectionEnd=Math.min(z,x.value.length);else{var G=x.ownerDocument||document,U=G&&G.defaultView||window;if(U.getSelection){var B=U.getSelection(),re=x.textContent.length,me=Math.min(j.start,re),Ze=j.end===void 0?me:Math.min(j.end,re);!B.extend&&me>Ze&&(m=Ze,Ze=me,me=m);var C=Xi(x,me),N=Xi(x,Ze);if(C&&N&&(B.rangeCount!==1||B.anchorNode!==C.node||B.anchorOffset!==C.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var D=G.createRange();D.setStart(C.node,C.offset),B.removeAllRanges(),me>Ze?(B.addRange(D),B.extend(N.node,N.offset)):(D.setEnd(N.node,N.offset),B.addRange(D))}}}}for(G=[],B=x;B=B.parentNode;)B.nodeType===1&&G.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<G.length;x++){var $=G[x];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Jo=!!td,ad=td=null}finally{$e=c,ee.p=s,L.T=a}}e.current=t,_t=2}}function x0(){if(_t===2){_t=0;var e=ms,t=Lr,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=L.T,L.T=null;var s=ee.p;ee.p=2;var c=$e;$e|=4;try{Pf(e,t.alternate,t)}finally{$e=c,ee.p=s,L.T=a}}_t=3}}function y0(){if(_t===4||_t===3){_t=0,sh();var e=ms,t=Lr,a=Vn,s=r0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?_t=5:(_t=0,Lr=ms=null,v0(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(fs=null),Ei(a),t=t.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(dn,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=L.T,c=ee.p,ee.p=2,L.T=null;try{for(var u=e.onRecoverableError,m=0;m<s.length;m++){var x=s[m];u(x.value,{componentStack:x.stack})}}finally{L.T=t,ee.p=c}}(Vn&3)!==0&&Uo(),on(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===$u?Wl++:(Wl=0,$u=e):Wl=0,ei(0)}}function v0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ml(t)))}function Uo(){return b0(),x0(),y0(),w0()}function w0(){if(_t!==5)return!1;var e=ms,t=Vu;Vu=0;var a=Ei(Vn),s=L.T,c=ee.p;try{ee.p=32>a?32:a,L.T=null,a=Hu,Hu=null;var u=ms,m=Vn;if(_t=0,Lr=ms=null,Vn=0,($e&6)!==0)throw Error(i(331));var x=$e;if($e|=4,a0(u.current),Wf(u,u.current,m,a),$e=x,ei(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(dn,u)}catch{}return!0}finally{ee.p=c,L.T=s,v0(e,t)}}function S0(e,t,a){t=Na(a,t),t=vu(e.stateNode,t,2),e=is(e,t,2),e!==null&&(ct(e,2),on(e))}function Ye(e,t,a){if(e.tag===3)S0(e,e,a);else for(;t!==null;){if(t.tag===3){S0(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(fs===null||!fs.has(s))){e=Na(a,e),a=_f(2),s=is(t,a,2),s!==null&&(jf(a,s,t,e),ct(s,2),on(s));break}}t=t.return}}function Yu(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new Dp;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(a)||(qu=!0,c.add(a),e=Lp.bind(null,e,t,a),t.then(e,e))}function Lp(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,We===e&&(Ee&a)===a&&(dt===4||dt===3&&(Ee&62914560)===Ee&&300>Qt()-Eo?($e&2)===0&&zr(e,0):Lu|=a,qr===Ee&&(qr=0)),on(e)}function _0(e,t){t===0&&(t=wt()),e=Ls(e,t),e!==null&&(ct(e,t),on(e))}function zp(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),_0(e,a)}function Vp(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(t),_0(e,a)}function Hp(e,t){return un(e,t)}var Bo=null,Hr=null,Pu=!1,qo=!1,Ju=!1,gs=0;function on(e){e!==Hr&&e.next===null&&(Hr===null?Bo=Hr=e:Hr=Hr.next=e),qo=!0,Pu||(Pu=!0,Gp())}function ei(e,t){if(!Ju&&qo){Ju=!0;do for(var a=!1,s=Bo;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var u=0;else{var m=s.suspendedLanes,x=s.pingedLanes;u=(1<<31-Zt(42|e)+1)-1,u&=c&~(m&~x),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,N0(s,u))}else u=Ee,u=Ja(s,s===We?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||pn(s,u)||(a=!0,N0(s,u));s=s.next}while(a);Ju=!1}}function $p(){j0()}function j0(){qo=Pu=!1;var e=0;gs!==0&&Wp()&&(e=gs);for(var t=Qt(),a=null,s=Bo;s!==null;){var c=s.next,u=T0(s,t);u===0?(s.next=null,a===null?Bo=c:a.next=c,c===null&&(Hr=a)):(a=s,(e!==0||(u&3)!==0)&&(qo=!0)),s=c}_t!==0&&_t!==5||ei(e),gs!==0&&(gs=0)}function T0(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var m=31-Zt(u),x=1<<m,j=c[m];j===-1?((x&a)===0||(x&s)!==0)&&(c[m]=Ma(x,t)):j<=t&&(e.expiredLanes|=x),u&=~x}if(t=We,a=Ee,a=Ja(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&lr(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||pn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&lr(s),Ei(a)){case 2:case 8:a=sl;break;case 32:a=kt;break;case 268435456:a=ir;break;default:a=kt}return s=k0.bind(null,e),a=un(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&lr(s),e.callbackPriority=2,e.callbackNode=null,2}function k0(e,t){if(_t!==0&&_t!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Uo()&&e.callbackNode!==a)return null;var s=Ee;return s=Ja(e,e===We?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(i0(e,s,t),T0(e,Qt()),e.callbackNode!=null&&e.callbackNode===a?k0.bind(null,e):null)}function N0(e,t){if(Uo())return null;i0(e,t,!0)}function Gp(){tg(function(){($e&6)!==0?un(Fe,$p):j0()})}function Ku(){if(gs===0){var e=kr;e===0&&(e=fn,fn<<=1,(fn&261888)===0&&(fn=256)),gs=e}return gs}function A0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:en(""+e)}function E0(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Ip(e,t,a,s,c){if(t==="submit"&&a&&a.stateNode===c){var u=A0((c[ft]||null).action),m=s.submitter;m&&(t=(t=m[ft]||null)?A0(t.formAction):m.getAttribute("formAction"),t!==null&&(u=t,m=null));var x=new ua("action","action",null,s,c);e.push({event:x,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(gs!==0){var j=m?E0(c,m):new FormData(c);mu(a,{pending:!0,data:j,method:c.method,action:u},null,j)}}else typeof u=="function"&&(x.preventDefault(),j=m?E0(c,m):new FormData(c),mu(a,{pending:!0,data:j,method:c.method,action:u},u,j))},currentTarget:c}]})}}for(var Xu=0;Xu<Rc.length;Xu++){var Qu=Rc[Xu],Yp=Qu.toLowerCase(),Pp=Qu[0].toUpperCase()+Qu.slice(1);Va(Yp,"on"+Pp)}Va(ne,"onAnimationEnd"),Va(Se,"onAnimationIteration"),Va(qe,"onAnimationStart"),Va("dblclick","onDoubleClick"),Va("focusin","onFocus"),Va("focusout","onBlur"),Va(rt,"onTransitionRun"),Va(ta,"onTransitionStart"),Va(Rl,"onTransitionCancel"),Va(oh,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ti));function C0(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],c=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var m=s.length-1;0<=m;m--){var x=s[m],j=x.instance,M=x.currentTarget;if(x=x.listener,j!==u&&c.isPropagationStopped())break e;u=x,c.currentTarget=M;try{u(c)}catch(z){Zi(z)}c.currentTarget=null,u=j}else for(m=0;m<s.length;m++){if(x=s[m],j=x.instance,M=x.currentTarget,x=x.listener,j!==u&&c.isPropagationStopped())break e;u=x,c.currentTarget=M;try{u(c)}catch(z){Zi(z)}c.currentTarget=null,u=j}}}}function Ae(e,t){var a=t[Kn];a===void 0&&(a=t[Kn]=new Set);var s=e+"__bubble";a.has(s)||(R0(t,e,2,!1),a.add(s))}function Zu(e,t,a){var s=0;t&&(s|=4),R0(a,e,s,t)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function Fu(e){if(!e[Lo]){e[Lo]=!0,Za.forEach(function(a){a!=="selectionchange"&&(Jp.has(a)||Zu(a,!1,e),Zu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lo]||(t[Lo]=!0,Zu("selectionchange",!1,t))}}function R0(e,t,a,s){switch(lm(t)){case 2:var c=wg;break;case 8:c=Sg;break;default:c=fd}a=c.bind(null,t,a,e),c=void 0,!pl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function Wu(e,t,a,s,c){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var x=s.stateNode.containerInfo;if(x===c)break;if(m===4)for(m=s.return;m!==null;){var j=m.tag;if((j===3||j===4)&&m.stateNode.containerInfo===c)return;m=m.return}for(;x!==null;){if(m=ja(x),m===null)return;if(j=m.tag,j===5||j===6||j===26||j===27){s=u=m;continue e}x=x.parentNode}}s=s.return}Ui(function(){var M=u,z=fl(a),G=[];e:{var U=ch.get(e);if(U!==void 0){var B=ua,re=e;switch(e){case"keypress":if(Zn(a)===0)break e;case"keydown":case"keyup":B=zi;break;case"focusin":re="focus",B=Os;break;case"focusout":re="blur",B=Os;break;case"beforeblur":case"afterblur":B=Os;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=br;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=wc;break;case ne:case Se:case qe:B=yl;break;case oh:B=_c;break;case"scroll":case"scrollend":B=jn;break;case"wheel":B=Tc;break;case"copy":case"cut":case"paste":B=wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Ue;break;case"toggle":case"beforetoggle":B=Ds}var me=(t&4)!==0,Ze=!me&&(e==="scroll"||e==="scrollend"),C=me?U!==null?U+"Capture":null:U;me=[];for(var N=M,D;N!==null;){var $=N;if(D=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||D===null||C===null||($=wn(N,C),$!=null&&me.push(ai(N,$,D))),Ze)break;N=N.return}0<me.length&&(U=new B(U,re,null,a,z),G.push({event:U,listeners:me}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",U&&a!==Qn&&(re=a.relatedTarget||a.fromElement)&&(ja(re)||re[Jn]))break e;if((B||U)&&(U=z.window===z?z:(U=z.ownerDocument)?U.defaultView||U.parentWindow:window,B?(re=a.relatedTarget||a.toElement,B=M,re=re?ja(re):null,re!==null&&(Ze=h(re),me=re.tag,re!==Ze||me!==5&&me!==27&&me!==6)&&(re=null)):(B=null,re=M),B!==re)){if(me=br,$="onMouseLeave",C="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(me=Ue,$="onPointerLeave",C="onPointerEnter",N="pointer"),Ze=B==null?U:Xa(B),D=re==null?U:Xa(re),U=new me($,N+"leave",B,a,z),U.target=Ze,U.relatedTarget=D,$=null,ja(z)===M&&(me=new me(C,N+"enter",re,a,z),me.target=D,me.relatedTarget=Ze,$=me),Ze=$,B&&re)t:{for(me=Kp,C=B,N=re,D=0,$=C;$;$=me($))D++;$=0;for(var de=N;de;de=me(de))$++;for(;0<D-$;)C=me(C),D--;for(;0<$-D;)N=me(N),$--;for(;D--;){if(C===N||N!==null&&C===N.alternate){me=C;break t}C=me(C),N=me(N)}me=null}else me=null;B!==null&&O0(G,U,B,me,!1),re!==null&&Ze!==null&&O0(G,Ze,re,me,!0)}}e:{if(U=M?Xa(M):window,B=U.nodeName&&U.nodeName.toLowerCase(),B==="select"||B==="input"&&U.type==="file")var Le=Ii;else if(Gt(U))if(Yi)Le=Ec;else{Le=Nc;var ie=Bs}else B=U.nodeName,!B||B.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?M&&Es(M.elementType)&&(Le=Ii):Le=Ac;if(Le&&(Le=Le(e,M))){Gi(G,Le,a,z);break e}ie&&ie(e,U,M),e==="focusout"&&M&&U.type==="number"&&M.memoizedProps.value!=null&&ur(U,"number",U.value)}switch(ie=M?Xa(M):window,e){case"focusin":(Gt(ie)||ie.contentEditable==="true")&&(E=ie,O=M,V=null);break;case"focusout":V=O=E=null;break;case"mousedown":oe=!0;break;case"contextmenu":case"mouseup":case"dragend":oe=!1,ge(G,a,z);break;case"selectionchange":if(w)break;case"keydown":case"keyup":ge(G,a,z)}var je;if(St)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else kn?Nl(e,a)&&(Ce="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(Tn&&a.locale!=="ko"&&(kn||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&kn&&(je=Bi()):(ca=z,gl="value"in ca?ca.value:ca.textContent,kn=!0)),ie=zo(M,Ce),0<ie.length&&(Ce=new Fn(Ce,e,null,a,z),G.push({event:Ce,listeners:ie}),je?Ce.data=je:(je=Al(a),je!==null&&(Ce.data=je)))),(je=Wn?Hi(e,a):ih(e,a))&&(Ce=zo(M,"onBeforeInput"),0<Ce.length&&(ie=new Fn("onBeforeInput","beforeinput",null,a,z),G.push({event:ie,listeners:Ce}),ie.data=je)),Ip(G,e,M,a,z)}C0(G,t)})}function ai(e,t,a){return{instance:e,listener:t,currentTarget:a}}function zo(e,t){for(var a=t+"Capture",s=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=wn(e,a),c!=null&&s.unshift(ai(e,c,u)),c=wn(e,t),c!=null&&s.push(ai(e,c,u))),e.tag===3)return s;e=e.return}return[]}function Kp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function O0(e,t,a,s,c){for(var u=t._reactName,m=[];a!==null&&a!==s;){var x=a,j=x.alternate,M=x.stateNode;if(x=x.tag,j!==null&&j===s)break;x!==5&&x!==26&&x!==27||M===null||(j=M,c?(M=wn(a,u),M!=null&&m.unshift(ai(a,M,j))):c||(M=wn(a,u),M!=null&&m.push(ai(a,M,j)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var Xp=/\r\n?/g,Qp=/\u0000|\uFFFD/g;function D0(e){return(typeof e=="string"?e:""+e).replace(Xp,`
`).replace(Qp,"")}function M0(e,t){return t=D0(t),D0(e)===t}function Qe(e,t,a,s,c,u){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Wa(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Wa(e,""+s);break;case"className":ul(e,"class",s);break;case"tabIndex":ul(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ul(e,a,s);break;case"style":yn(e,s,u);break;case"data":if(t!=="object"){ul(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=en(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&Qe(e,t,"name",c.name,c,null),Qe(e,t,"formEncType",c.formEncType,c,null),Qe(e,t,"formMethod",c.formMethod,c,null),Qe(e,t,"formTarget",c.formTarget,c,null)):(Qe(e,t,"encType",c.encType,c,null),Qe(e,t,"method",c.method,c,null),Qe(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=en(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=ea);break;case"onScroll":s!=null&&Ae("scroll",e);break;case"onScrollEnd":s!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=en(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),cl(e,"popover",s);break;case"xlinkActuate":Fa(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Fa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Fa(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Fa(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Fa(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Fa(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Fa(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Fa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Fa(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":cl(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=At.get(a)||a,cl(e,a,s))}}function ed(e,t,a,s,c,u){switch(a){case"style":yn(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(a=s.__html,a!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Wa(e,s):(typeof s=="number"||typeof s=="bigint")&&Wa(e,""+s);break;case"onScroll":s!=null&&Ae("scroll",e);break;case"onScrollEnd":s!=null&&Ae("scrollend",e);break;case"onClick":s!=null&&(e.onclick=ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ri.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),u=e[ft]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof s=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,c);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):cl(e,a,s)}}}function qt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var s=!1,c=!1,u;for(u in a)if(a.hasOwnProperty(u)){var m=a[u];if(m!=null)switch(u){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Qe(e,t,u,m,a,null)}}c&&Qe(e,t,"srcSet",a.srcSet,a,null),s&&Qe(e,t,"src",a.src,a,null);return;case"input":Ae("invalid",e);var x=u=m=c=null,j=null,M=null;for(s in a)if(a.hasOwnProperty(s)){var z=a[s];if(z!=null)switch(s){case"name":c=z;break;case"type":m=z;break;case"checked":j=z;break;case"defaultChecked":M=z;break;case"value":u=z;break;case"defaultValue":x=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,t));break;default:Qe(e,t,s,z,a,null)}}xn(e,u,x,j,M,m,c,!1);return;case"select":Ae("invalid",e),s=m=u=null;for(c in a)if(a.hasOwnProperty(c)&&(x=a[c],x!=null))switch(c){case"value":u=x;break;case"defaultValue":m=x;break;case"multiple":s=x;default:Qe(e,t,c,x,a,null)}t=u,a=m,e.multiple=!!s,t!=null?$t(e,!!s,t,!1):a!=null&&$t(e,!!s,a,!0);return;case"textarea":Ae("invalid",e),u=c=s=null;for(m in a)if(a.hasOwnProperty(m)&&(x=a[m],x!=null))switch(m){case"value":s=x;break;case"defaultValue":c=x;break;case"children":u=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:Qe(e,t,m,x,a,null)}Jt(e,s,c,u);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(s=a[j],s!=null))switch(j){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Qe(e,t,j,s,a,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(s=0;s<ti.length;s++)Ae(ti[s],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in a)if(a.hasOwnProperty(M)&&(s=a[M],s!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Qe(e,t,M,s,a,null)}return;default:if(Es(t)){for(z in a)a.hasOwnProperty(z)&&(s=a[z],s!==void 0&&ed(e,t,z,s,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(s=a[x],s!=null&&Qe(e,t,x,s,a,null))}function Zp(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,m=null,x=null,j=null,M=null,z=null;for(B in a){var G=a[B];if(a.hasOwnProperty(B)&&G!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":j=G;default:s.hasOwnProperty(B)||Qe(e,t,B,null,s,G)}}for(var U in s){var B=s[U];if(G=a[U],s.hasOwnProperty(U)&&(B!=null||G!=null))switch(U){case"type":u=B;break;case"name":c=B;break;case"checked":M=B;break;case"defaultChecked":z=B;break;case"value":m=B;break;case"defaultValue":x=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(137,t));break;default:B!==G&&Qe(e,t,U,B,s,G)}}Ta(e,m,x,j,M,z,u,c);return;case"select":B=m=x=U=null;for(u in a)if(j=a[u],a.hasOwnProperty(u)&&j!=null)switch(u){case"value":break;case"multiple":B=j;default:s.hasOwnProperty(u)||Qe(e,t,u,null,s,j)}for(c in s)if(u=s[c],j=a[c],s.hasOwnProperty(c)&&(u!=null||j!=null))switch(c){case"value":U=u;break;case"defaultValue":x=u;break;case"multiple":m=u;default:u!==j&&Qe(e,t,c,u,s,j)}t=x,a=m,s=B,U!=null?$t(e,!!a,U,!1):!!s!=!!a&&(t!=null?$t(e,!!a,t,!0):$t(e,!!a,a?[]:"",!1));return;case"textarea":B=U=null;for(x in a)if(c=a[x],a.hasOwnProperty(x)&&c!=null&&!s.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Qe(e,t,x,null,s,c)}for(m in s)if(c=s[m],u=a[m],s.hasOwnProperty(m)&&(c!=null||u!=null))switch(m){case"value":U=c;break;case"defaultValue":B=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(i(91));break;default:c!==u&&Qe(e,t,m,c,s,u)}dr(e,U,B);return;case"option":for(var re in a)if(U=a[re],a.hasOwnProperty(re)&&U!=null&&!s.hasOwnProperty(re))switch(re){case"selected":e.selected=!1;break;default:Qe(e,t,re,null,s,U)}for(j in s)if(U=s[j],B=a[j],s.hasOwnProperty(j)&&U!==B&&(U!=null||B!=null))switch(j){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Qe(e,t,j,U,s,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in a)U=a[me],a.hasOwnProperty(me)&&U!=null&&!s.hasOwnProperty(me)&&Qe(e,t,me,null,s,U);for(M in s)if(U=s[M],B=a[M],s.hasOwnProperty(M)&&U!==B&&(U!=null||B!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,t));break;default:Qe(e,t,M,U,s,B)}return;default:if(Es(t)){for(var Ze in a)U=a[Ze],a.hasOwnProperty(Ze)&&U!==void 0&&!s.hasOwnProperty(Ze)&&ed(e,t,Ze,void 0,s,U);for(z in s)U=s[z],B=a[z],!s.hasOwnProperty(z)||U===B||U===void 0&&B===void 0||ed(e,t,z,U,s,B);return}}for(var C in a)U=a[C],a.hasOwnProperty(C)&&U!=null&&!s.hasOwnProperty(C)&&Qe(e,t,C,null,s,U);for(G in s)U=s[G],B=a[G],!s.hasOwnProperty(G)||U===B||U==null&&B==null||Qe(e,t,G,U,s,B)}function U0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var c=a[s],u=c.transferSize,m=c.initiatorType,x=c.duration;if(u&&x&&U0(m)){for(m=0,x=c.responseEnd,s+=1;s<a.length;s++){var j=a[s],M=j.startTime;if(M>x)break;var z=j.transferSize,G=j.initiatorType;z&&U0(G)&&(j=j.responseEnd,m+=z*(j<x?1:(x-M)/(j-M)))}if(--s,t+=8*(u+m)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var td=null,ad=null;function Vo(e){return e.nodeType===9?e:e.ownerDocument}function B0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function nd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sd=null;function Wp(){var e=window.event;return e&&e.type==="popstate"?e===sd?!1:(sd=e,!0):(sd=null,!1)}var L0=typeof setTimeout=="function"?setTimeout:void 0,eg=typeof clearTimeout=="function"?clearTimeout:void 0,z0=typeof Promise=="function"?Promise:void 0,tg=typeof queueMicrotask=="function"?queueMicrotask:typeof z0<"u"?function(e){return z0.resolve(null).then(e).catch(ag)}:L0;function ag(e){setTimeout(function(){throw e})}function bs(e){return e==="head"}function V0(e,t){var a=t,s=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(c),Yr(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")ni(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ni(a);for(var u=a.firstChild;u;){var m=u.nextSibling,x=u.nodeName;u[Ka]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=m}}else a==="body"&&ni(e.ownerDocument.body);a=c}while(a);Yr(t)}function H0(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function rd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":rd(a),il(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ng(e,t,a,s){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ka])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Oa(e.nextSibling),e===null)break}return null}function sg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Oa(e.nextSibling),e===null))return null;return e}function $0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Oa(e.nextSibling),e===null))return null;return e}function ld(e){return e.data==="$?"||e.data==="$~"}function id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rg(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Oa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var od=null;function G0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Oa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function I0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Y0(e,t,a){switch(t=Vo(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function ni(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);il(e)}var Da=new Map,P0=new Set;function Ho(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hn=ee.d;ee.d={f:lg,r:ig,D:og,C:cg,L:ug,m:dg,X:fg,S:hg,M:mg};function lg(){var e=Hn.f(),t=Oo();return e||t}function ig(e){var t=bn(e);t!==null&&t.tag===5&&t.type==="form"?cf(t):Hn.r(e)}var $r=typeof document>"u"?null:document;function J0(e,t,a){var s=$r;if(s&&typeof t=="string"&&t){var c=ke(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),P0.has(c)||(P0.add(c),e={rel:e,crossOrigin:a,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),qt(t,"link",e),et(t),s.head.appendChild(t)))}}function og(e){Hn.D(e),J0("dns-prefetch",e,null)}function cg(e,t){Hn.C(e,t),J0("preconnect",e,t)}function ug(e,t,a){Hn.L(e,t,a);var s=$r;if(s&&e&&t){var c='link[rel="preload"][as="'+ke(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+ke(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+ke(a.imageSizes)+'"]')):c+='[href="'+ke(e)+'"]';var u=c;switch(t){case"style":u=Gr(e);break;case"script":u=Ir(e)}Da.has(u)||(e=S({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Da.set(u,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(si(u))||t==="script"&&s.querySelector(ri(u))||(t=s.createElement("link"),qt(t,"link",e),et(t),s.head.appendChild(t)))}}function dg(e,t){Hn.m(e,t);var a=$r;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+ke(s)+'"][href="'+ke(e)+'"]',u=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Ir(e)}if(!Da.has(u)&&(e=S({rel:"modulepreload",href:e},t),Da.set(u,e),a.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ri(u)))return}s=a.createElement("link"),qt(s,"link",e),et(s),a.head.appendChild(s)}}}function hg(e,t,a){Hn.S(e,t,a);var s=$r;if(s&&e){var c=Qa(s).hoistableStyles,u=Gr(e);t=t||"default";var m=c.get(u);if(!m){var x={loading:0,preload:null};if(m=s.querySelector(si(u)))x.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Da.get(u))&&cd(e,a);var j=m=s.createElement("link");et(j),qt(j,"link",e),j._p=new Promise(function(M,z){j.onload=M,j.onerror=z}),j.addEventListener("load",function(){x.loading|=1}),j.addEventListener("error",function(){x.loading|=2}),x.loading|=4,$o(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:x},c.set(u,m)}}}function fg(e,t){Hn.X(e,t);var a=$r;if(a&&e){var s=Qa(a).hoistableScripts,c=Ir(e),u=s.get(c);u||(u=a.querySelector(ri(c)),u||(e=S({src:e,async:!0},t),(t=Da.get(c))&&ud(e,t),u=a.createElement("script"),et(u),qt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function mg(e,t){Hn.M(e,t);var a=$r;if(a&&e){var s=Qa(a).hoistableScripts,c=Ir(e),u=s.get(c);u||(u=a.querySelector(ri(c)),u||(e=S({src:e,async:!0,type:"module"},t),(t=Da.get(c))&&ud(e,t),u=a.createElement("script"),et(u),qt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function K0(e,t,a,s){var c=(c=Te.current)?Ho(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Gr(a.href),a=Qa(c).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Gr(a.href);var u=Qa(c).hoistableStyles,m=u.get(e);if(m||(c=c.ownerDocument||c,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,m),(u=c.querySelector(si(e)))&&!u._p&&(m.instance=u,m.state.loading=5),Da.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Da.set(e,a),u||pg(c,e,a,m.state))),t&&s===null)throw Error(i(528,""));return m}if(t&&s!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ir(a),a=Qa(c).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Gr(e){return'href="'+ke(e)+'"'}function si(e){return'link[rel="stylesheet"]['+e+"]"}function X0(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function pg(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),qt(t,"link",a),et(t),e.head.appendChild(t))}function Ir(e){return'[src="'+ke(e)+'"]'}function ri(e){return"script[async]"+e}function Q0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+ke(a.href)+'"]');if(s)return t.instance=s,et(s),s;var c=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),et(s),qt(s,"style",c),$o(s,a.precedence,e),t.instance=s;case"stylesheet":c=Gr(a.href);var u=e.querySelector(si(c));if(u)return t.state.loading|=4,t.instance=u,et(u),u;s=X0(a),(c=Da.get(c))&&cd(s,c),u=(e.ownerDocument||e).createElement("link"),et(u);var m=u;return m._p=new Promise(function(x,j){m.onload=x,m.onerror=j}),qt(u,"link",s),t.state.loading|=4,$o(u,a.precedence,e),t.instance=u;case"script":return u=Ir(a.src),(c=e.querySelector(ri(u)))?(t.instance=c,et(c),c):(s=a,(c=Da.get(u))&&(s=S({},a),ud(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),et(c),qt(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,$o(s,a.precedence,e));return t.instance}function $o(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,u=c,m=0;m<s.length;m++){var x=s[m];if(x.dataset.precedence===t)u=x;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function cd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ud(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Go=null;function Z0(e,t,a){if(Go===null){var s=new Map,c=Go=new Map;c.set(a,s)}else c=Go,s=c.get(a),s||(s=new Map,c.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var u=a[c];if(!(u[Ka]||u[De]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var m=u.getAttribute(t)||"";m=e+m;var x=s.get(m);x?x.push(u):s.set(m,[u])}}return s}function F0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function gg(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function W0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function bg(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Gr(s.href),u=t.querySelector(si(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Io.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,et(u);return}u=t.ownerDocument||t,s=X0(s),(c=Da.get(c))&&cd(s,c),u=u.createElement("link"),et(u);var m=u;m._p=new Promise(function(x,j){m.onload=x,m.onerror=j}),qt(u,"link",s),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Io.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var dd=0;function xg(e,t){return e.stylesheets&&e.count===0&&Po(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&Po(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&dd===0&&(dd=62500*Fp());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Po(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>dd?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(c)}}:null}function Io(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Po(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yo=null;function Po(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yo=new Map,t.forEach(yg,e),Yo=null,Io.call(e))}function yg(e,t){if(!(t.state.loading&4)){var a=Yo.get(e);if(a)var s=a.get(null);else{a=new Map,Yo.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var m=c[u];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),s=m)}s&&a.set(null,s)}c=t.instance,m=c.getAttribute("data-precedence"),u=a.get(m)||s,u===s&&a.set(null,c),a.set(m,c),this.count++,s=Io.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var li={$$typeof:P,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function vg(e,t,a,s,c,u,m,x,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.hiddenUpdates=Ua(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function em(e,t,a,s,c,u,m,x,j,M,z,G){return e=new vg(e,t,a,m,j,M,z,G,x),t=1,u===!0&&(t|=24),u=ma(3,null,null,t),e.current=u,u.stateNode=e,t=Ic(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:a,cache:t},Kc(u),e}function tm(e){return e?(e=wr,e):wr}function am(e,t,a,s,c,u){c=tm(c),s.context===null?s.context=c:s.pendingContext=c,s=ls(t),s.payload={element:a},u=u===void 0?null:u,u!==null&&(s.callback=u),a=is(e,s,t),a!==null&&(la(a,e,t),Ll(a,e,t))}function nm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function hd(e,t){nm(e,t),(e=e.alternate)&&nm(e,t)}function sm(e){if(e.tag===13||e.tag===31){var t=Ls(e,67108864);t!==null&&la(t,e,67108864),hd(e,67108864)}}function rm(e){if(e.tag===13||e.tag===31){var t=ya();t=Ai(t);var a=Ls(e,t);a!==null&&la(a,e,t),hd(e,t)}}var Jo=!0;function wg(e,t,a,s){var c=L.T;L.T=null;var u=ee.p;try{ee.p=2,fd(e,t,a,s)}finally{ee.p=u,L.T=c}}function Sg(e,t,a,s){var c=L.T;L.T=null;var u=ee.p;try{ee.p=8,fd(e,t,a,s)}finally{ee.p=u,L.T=c}}function fd(e,t,a,s){if(Jo){var c=md(s);if(c===null)Wu(e,t,s,Ko,a),im(e,s);else if(jg(c,e,t,a,s))s.stopPropagation();else if(im(e,s),t&4&&-1<_g.indexOf(e)){for(;c!==null;){var u=bn(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var m=mn(u.pendingLanes);if(m!==0){var x=u;for(x.pendingLanes|=2,x.entangledLanes|=2;m;){var j=1<<31-Zt(m);x.entanglements[1]|=j,m&=~j}on(u),($e&6)===0&&(Co=Qt()+500,ei(0))}}break;case 31:case 13:x=Ls(u,2),x!==null&&la(x,u,2),Oo(),hd(u,2)}if(u=md(s),u===null&&Wu(e,t,s,Ko,a),u===c)break;c=u}c!==null&&s.stopPropagation()}else Wu(e,t,s,null,a)}}function md(e){return e=fl(e),pd(e)}var Ko=null;function pd(e){if(Ko=null,e=ja(e),e!==null){var t=h(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=b(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ko=e,null}function lm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rh()){case Fe:return 2;case sl:return 8;case kt:case fc:return 32;case ir:return 268435456;default:return 32}default:return 32}}var gd=!1,xs=null,ys=null,vs=null,ii=new Map,oi=new Map,ws=[],_g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function im(e,t){switch(e){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oi.delete(t.pointerId)}}function ci(e,t,a,s,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:u,targetContainers:[c]},t!==null&&(t=bn(t),t!==null&&sm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function jg(e,t,a,s,c){switch(t){case"focusin":return xs=ci(xs,e,t,a,s,c),!0;case"dragenter":return ys=ci(ys,e,t,a,s,c),!0;case"mouseover":return vs=ci(vs,e,t,a,s,c),!0;case"pointerover":var u=c.pointerId;return ii.set(u,ci(ii.get(u)||null,e,t,a,s,c)),!0;case"gotpointercapture":return u=c.pointerId,oi.set(u,ci(oi.get(u)||null,e,t,a,s,c)),!0}return!1}function om(e){var t=ja(e.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Ci(e.priority,function(){rm(a)});return}}else if(t===31){if(t=b(a),t!==null){e.blockedOn=t,Ci(e.priority,function(){rm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=md(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Qn=s,a.target.dispatchEvent(s),Qn=null}else return t=bn(a),t!==null&&sm(t),e.blockedOn=a,!1;t.shift()}return!0}function cm(e,t,a){Xo(e)&&a.delete(t)}function Tg(){gd=!1,xs!==null&&Xo(xs)&&(xs=null),ys!==null&&Xo(ys)&&(ys=null),vs!==null&&Xo(vs)&&(vs=null),ii.forEach(cm),oi.forEach(cm)}function Qo(e,t){e.blockedOn===t&&(e.blockedOn=null,gd||(gd=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Tg)))}var Zo=null;function um(e){Zo!==e&&(Zo=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Zo===e&&(Zo=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(pd(s||a)===null)continue;break}var u=bn(a);u!==null&&(e.splice(t,3),t-=3,mu(u,{pending:!0,data:c,method:a.method,action:s},s,c))}}))}function Yr(e){function t(j){return Qo(j,e)}xs!==null&&Qo(xs,e),ys!==null&&Qo(ys,e),vs!==null&&Qo(vs,e),ii.forEach(t),oi.forEach(t);for(var a=0;a<ws.length;a++){var s=ws[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<ws.length&&(a=ws[0],a.blockedOn===null);)om(a),a.blockedOn===null&&ws.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var c=a[s],u=a[s+1],m=c[ft]||null;if(typeof u=="function")m||um(a);else if(m){var x=null;if(u&&u.hasAttribute("formAction")){if(c=u,m=u[ft]||null)x=m.formAction;else if(pd(c)!==null)continue}else x=m.action;typeof x=="function"?a[s+1]=x:(a.splice(s,3),s-=3),um(a)}}}function dm(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(m){return c=m})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function bd(e){this._internalRoot=e}Fo.prototype.render=bd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,s=ya();am(a,s,e,t,null,null)},Fo.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;am(e.current,2,null,e,null,null),Oo(),t[Jn]=null}};function Fo(e){this._internalRoot=e}Fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=gc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ws.length&&t!==0&&t<ws[a].priority;a++);ws.splice(a,0,e),a===0&&om(e)}};var hm=n.version;if(hm!=="19.2.3")throw Error(i(527,hm,"19.2.3"));ee.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var kg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{dn=Wo.inject(kg),Pt=Wo}catch{}}return di.createRoot=function(e,t){if(!d(e))throw Error(i(299));var a=!1,s="",c=yf,u=vf,m=wf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=em(e,1,!1,null,null,a,s,null,c,u,m,dm),e[Jn]=t.current,Fu(e),new bd(t)},di.hydrateRoot=function(e,t,a){if(!d(e))throw Error(i(299));var s=!1,c="",u=yf,m=vf,x=wf,j=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),t=em(e,1,!0,t,a??null,s,c,j,u,m,x,dm),t.context=tm(null),a=t.current,s=ya(),s=Ai(s),c=ls(s),c.callback=null,is(a,c,s),a=s,t.current.lanes=a,ct(t,a),on(t),e[Jn]=t.current,Fu(e),new Fo(t)},di.version="19.2.3",di}var Sm;function Bg(){if(Sm)return vd.exports;Sm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),vd.exports=Ug(),vd.exports}var qg=Bg();const Lg=Jm(qg);function cc(l,n){var r={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&n.indexOf(i)<0&&(r[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,i=Object.getOwnPropertySymbols(l);d<i.length;d++)n.indexOf(i[d])<0&&Object.prototype.propertyIsEnumerable.call(l,i[d])&&(r[i[d]]=l[i[d]]);return r}function zg(l,n,r,i){function d(h){return h instanceof r?h:new r(function(f){f(h)})}return new(r||(r=Promise))(function(h,f){function b(v){try{y(i.next(v))}catch(S){f(S)}}function p(v){try{y(i.throw(v))}catch(S){f(S)}}function y(v){v.done?h(v.value):d(v.value).then(b,p)}y((i=i.apply(l,n||[])).next())})}const Vg=l=>l?(...n)=>l(...n):(...n)=>fetch(...n);class Fd extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class Hg extends Fd{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class _m extends Fd{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class jm extends Fd{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var qd;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(qd||(qd={}));class $g{constructor(n,{headers:r={},customFetch:i,region:d=qd.Any}={}){this.url=n,this.headers=r,this.region=d,this.fetch=Vg(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return zg(this,arguments,void 0,function*(r,i={}){var d;let h,f;try{const{headers:b,method:p,body:y,signal:v,timeout:S}=i;let _={},{region:T}=i;T||(T=this.region);const k=new URL(`${this.url}/${r}`);T&&T!=="any"&&(_["x-region"]=T,k.searchParams.set("forceFunctionRegion",T));let q;y&&(b&&!Object.prototype.hasOwnProperty.call(b,"Content-Type")||!b)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",q=y):typeof y=="string"?(_["Content-Type"]="text/plain",q=y):typeof FormData<"u"&&y instanceof FormData?q=y:(_["Content-Type"]="application/json",q=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?q=JSON.stringify(y):q=y;let K=v;S&&(f=new AbortController,h=setTimeout(()=>f.abort(),S),v?(K=f.signal,v.addEventListener("abort",()=>f.abort())):K=f.signal);const Q=yield this.fetch(k.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),b),body:q,signal:K}).catch(Re=>{throw new Hg(Re)}),te=Q.headers.get("x-relay-error");if(te&&te==="true")throw new _m(Q);if(!Q.ok)throw new jm(Q);let P=((d=Q.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),he;return P==="application/json"?he=yield Q.json():P==="application/octet-stream"||P==="application/pdf"?he=yield Q.blob():P==="text/event-stream"?he=Q:P==="multipart/form-data"?he=yield Q.formData():he=yield Q.text(),{data:he,error:null,response:Q}}catch(b){return{data:null,error:b,response:b instanceof jm||b instanceof _m?b.context:void 0}}finally{h&&clearTimeout(h)}})}}var Gg=class extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}},Ig=class{constructor(l){var n,r;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(n=l.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=l.signal,this.isMaybeSingle=(r=l.isMaybeSingle)!==null&&r!==void 0?r:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,n){return this.headers=new Headers(this.headers),this.headers.set(l,n),this}then(l,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let d=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,b=null,p=null,y=h.status,v=h.statusText;if(h.ok){var S,_;if(r.method!=="HEAD"){var T;const Q=await h.text();Q===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((T=r.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?b=Q:b=JSON.parse(Q))}const q=(S=r.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),K=(_=h.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");q&&K&&K.length>1&&(p=parseInt(K[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(b)&&(b.length>1?(f={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,p=null,y=406,v="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{var k;const q=await h.text();try{f=JSON.parse(q),Array.isArray(f)&&h.status===404&&(b=[],f=null,y=200,v="OK")}catch{h.status===404&&q===""?(y=204,v="No Content"):f={message:q}}if(f&&r.isMaybeSingle&&(!(f==null||(k=f.details)===null||k===void 0)&&k.includes("0 rows"))&&(f=null,y=200,v="OK"),f&&r.shouldThrowOnError)throw new Gg(f)}return{error:f,data:b,count:p,status:y,statusText:v}});return this.shouldThrowOnError||(d=d.catch(h=>{var f;let b="";const p=h?.cause;if(p){var y,v,S,_;const k=(y=p?.message)!==null&&y!==void 0?y:"",q=(v=p?.code)!==null&&v!==void 0?v:"";b=`${(S=h?.name)!==null&&S!==void 0?S:"FetchError"}: ${h?.message}`,b+=`

Caused by: ${(_=p?.name)!==null&&_!==void 0?_:"Error"}: ${k}`,q&&(b+=` (${q})`),p?.stack&&(b+=`
${p.stack}`)}else{var T;b=(T=h?.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:b,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(l,n)}returns(){return this}overrideTypes(){return this}},Yg=class extends Ig{select(l){let n=!1;const r=(l??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:d=i}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${l}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${l}`),this}range(l,n,{foreignTable:r,referencedTable:i=r}={}){const d=typeof i>"u"?"offset":`${i}.offset`,h=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(d,`${l}`),this.url.searchParams.set(h,`${n-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:d=!1,format:h="text"}={}){var f;const b=[l?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,d?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${p}"; options=${b};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}};const Tm=new RegExp("[,()]");var Wr=class extends Yg{eq(l,n){return this.url.searchParams.append(l,`eq.${n}`),this}neq(l,n){return this.url.searchParams.append(l,`neq.${n}`),this}gt(l,n){return this.url.searchParams.append(l,`gt.${n}`),this}gte(l,n){return this.url.searchParams.append(l,`gte.${n}`),this}lt(l,n){return this.url.searchParams.append(l,`lt.${n}`),this}lte(l,n){return this.url.searchParams.append(l,`lte.${n}`),this}like(l,n){return this.url.searchParams.append(l,`like.${n}`),this}likeAllOf(l,n){return this.url.searchParams.append(l,`like(all).{${n.join(",")}}`),this}likeAnyOf(l,n){return this.url.searchParams.append(l,`like(any).{${n.join(",")}}`),this}ilike(l,n){return this.url.searchParams.append(l,`ilike.${n}`),this}ilikeAllOf(l,n){return this.url.searchParams.append(l,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(l,n){return this.url.searchParams.append(l,`ilike(any).{${n.join(",")}}`),this}regexMatch(l,n){return this.url.searchParams.append(l,`match.${n}`),this}regexIMatch(l,n){return this.url.searchParams.append(l,`imatch.${n}`),this}is(l,n){return this.url.searchParams.append(l,`is.${n}`),this}isDistinct(l,n){return this.url.searchParams.append(l,`isdistinct.${n}`),this}in(l,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&Tm.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(l,`in.(${r})`),this}notIn(l,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&Tm.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(l,`not.in.(${r})`),this}contains(l,n){return typeof n=="string"?this.url.searchParams.append(l,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(l,`cs.{${n.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(n)}`),this}containedBy(l,n){return typeof n=="string"?this.url.searchParams.append(l,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(l,`cd.{${n.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(n)}`),this}rangeGt(l,n){return this.url.searchParams.append(l,`sr.${n}`),this}rangeGte(l,n){return this.url.searchParams.append(l,`nxl.${n}`),this}rangeLt(l,n){return this.url.searchParams.append(l,`sl.${n}`),this}rangeLte(l,n){return this.url.searchParams.append(l,`nxr.${n}`),this}rangeAdjacent(l,n){return this.url.searchParams.append(l,`adj.${n}`),this}overlaps(l,n){return typeof n=="string"?this.url.searchParams.append(l,`ov.${n}`):this.url.searchParams.append(l,`ov.{${n.join(",")}}`),this}textSearch(l,n,{config:r,type:i}={}){let d="";i==="plain"?d="pl":i==="phrase"?d="ph":i==="websearch"&&(d="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(l,`${d}fts${h}.${n}`),this}match(l){return Object.entries(l).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(l,n,r){return this.url.searchParams.append(l,`not.${n}.${r}`),this}or(l,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${l})`),this}filter(l,n,r){return this.url.searchParams.append(l,`${n}.${r}`),this}},Pg=class{constructor(l,{headers:n={},schema:r,fetch:i}){this.url=l,this.headers=new Headers(n),this.schema=r,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(l,n){const{head:r=!1,count:i}=n??{},d=r?"HEAD":"GET";let h=!1;const f=(l??"*").split("").map(y=>/\s/.test(y)&&!h?"":(y==='"'&&(h=!h),y)).join(""),{url:b,headers:p}=this.cloneRequestState();return b.searchParams.set("select",f),i&&p.append("Prefer",`count=${i}`),new Wr({method:d,url:b,headers:p,schema:this.schema,fetch:this.fetch})}insert(l,{count:n,defaultToNull:r=!0}={}){var i;const d="POST",{url:h,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(l)){const b=l.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(b.length>0){const p=[...new Set(b)].map(y=>`"${y}"`);h.searchParams.set("columns",p.join(","))}}return new Wr({method:d,url:h,headers:f,schema:this.schema,body:l,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(l,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:d=!0}={}){var h;const f="POST",{url:b,headers:p}=this.cloneRequestState();if(p.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&b.searchParams.set("on_conflict",n),i&&p.append("Prefer",`count=${i}`),d||p.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((v,S)=>v.concat(Object.keys(S)),[]);if(y.length>0){const v=[...new Set(y)].map(S=>`"${S}"`);b.searchParams.set("columns",v.join(","))}}return new Wr({method:f,url:b,headers:p,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(l,{count:n}={}){var r;const i="PATCH",{url:d,headers:h}=this.cloneRequestState();return n&&h.append("Prefer",`count=${n}`),new Wr({method:i,url:d,headers:h,schema:this.schema,body:l,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:l}={}){var n;const r="DELETE",{url:i,headers:d}=this.cloneRequestState();return l&&d.append("Prefer",`count=${l}`),new Wr({method:r,url:i,headers:d,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},Jg=class Km{constructor(n,{headers:r={},schema:i,fetch:d}={}){this.url=n,this.headers=new Headers(r),this.schemaName=i,this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Pg(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new Km(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:i=!1,get:d=!1,count:h}={}){var f;let b;const p=new URL(`${this.url}/rpc/${n}`);let y;const v=T=>T!==null&&typeof T=="object"&&(!Array.isArray(T)||T.some(v)),S=i&&Object.values(r).some(v);S?(b="POST",y=r):i||d?(b=i?"HEAD":"GET",Object.entries(r).filter(([T,k])=>k!==void 0).map(([T,k])=>[T,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([T,k])=>{p.searchParams.append(T,k)})):(b="POST",y=r);const _=new Headers(this.headers);return S?_.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&_.set("Prefer",`count=${h}`),new Wr({method:b,url:p,headers:_,schema:this.schemaName,body:y,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class Kg{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const i=r.versions;if(i&&i.node){const d=i.node,h=parseInt(d.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const i=this.getWebSocketConstructor();return new i(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Xg="2.90.1",Qg=`realtime-js/${Xg}`,Xm="1.0.0",Zg="2.0.0",km=Xm,Ld=1e4,Fg=1e3,Wg=100;var _s;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(_s||(_s={}));var jt;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(jt||(jt={}));var Ya;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Ya||(Ya={}));var zd;(function(l){l.websocket="websocket"})(zd||(zd={}));var er;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(er||(er={}));class eb{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let i=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,i;const d=(i=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(n){var r,i;const d=(i=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,i){var d,h;const f=n.topic,b=(d=n.ref)!==null&&d!==void 0?d:"",p=(h=n.join_ref)!==null&&h!==void 0?h:"",y=n.payload.event,v=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},S=Object.keys(v).length===0?"":JSON.stringify(v);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`ref length ${b.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`metadata length ${S.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+b.length+f.length+y.length+S.length,T=new ArrayBuffer(this.HEADER_LENGTH+_);let k=new DataView(T),q=0;k.setUint8(q++,this.KINDS.userBroadcastPush),k.setUint8(q++,p.length),k.setUint8(q++,b.length),k.setUint8(q++,f.length),k.setUint8(q++,y.length),k.setUint8(q++,S.length),k.setUint8(q++,r),Array.from(p,Q=>k.setUint8(q++,Q.charCodeAt(0))),Array.from(b,Q=>k.setUint8(q++,Q.charCodeAt(0))),Array.from(f,Q=>k.setUint8(q++,Q.charCodeAt(0))),Array.from(y,Q=>k.setUint8(q++,Q.charCodeAt(0))),Array.from(S,Q=>k.setUint8(q++,Q.charCodeAt(0)));var K=new Uint8Array(T.byteLength+i.byteLength);return K.set(new Uint8Array(T),0),K.set(new Uint8Array(i),T.byteLength),K.buffer}decode(n,r){if(this._isArrayBuffer(n)){let i=this._binaryDecode(n);return r(i)}if(typeof n=="string"){const i=JSON.parse(n),[d,h,f,b,p]=i;return r({join_ref:d,ref:h,topic:f,event:b,payload:p})}return r({})}_binaryDecode(n){const r=new DataView(n),i=r.getUint8(0),d=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,d)}}_decodeUserBroadcast(n,r,i){const d=r.getUint8(1),h=r.getUint8(2),f=r.getUint8(3),b=r.getUint8(4);let p=this.HEADER_LENGTH+4;const y=i.decode(n.slice(p,p+d));p=p+d;const v=i.decode(n.slice(p,p+h));p=p+h;const S=i.decode(n.slice(p,p+f));p=p+f;const _=n.slice(p,n.byteLength),T=b===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,k={type:this.BROADCAST_EVENT,event:v,payload:T};return f>0&&(k.meta=JSON.parse(S)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([i])=>r.includes(i)))}}class Qm{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(tt||(tt={}));const Nm=(l,n,r={})=>{var i;const d=(i=r.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((h,f)=>(h[f]=tb(f,l,n,d),h),{}):{}},tb=(l,n,r,i)=>{const d=n.find(b=>b.name===l),h=d?.type,f=r[l];return h&&!i.includes(h)?Zm(h,f):Vd(f)},Zm=(l,n)=>{if(l.charAt(0)==="_"){const r=l.slice(1,l.length);return rb(n,r)}switch(l){case tt.bool:return ab(n);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return nb(n);case tt.json:case tt.jsonb:return sb(n);case tt.timestamp:return lb(n);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return Vd(n);default:return Vd(n)}},Vd=l=>l,ab=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},nb=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},sb=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch{return l}return l},rb=(l,n)=>{if(typeof l!="string")return l;const r=l.length-1,i=l[r];if(l[0]==="{"&&i==="}"){let h;const f=l.slice(1,r);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(b=>Zm(n,b))}return l},lb=l=>typeof l=="string"?l.replace(" ","T"):l,Fm=l=>{const n=new URL(l);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class jd{constructor(n,r,i={},d=Ld){this.channel=n,this.event=r,this.payload=i,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Am;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(Am||(Am={}));class pi{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},d=>{const{onJoin:h,onLeave:f,onSync:b}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pi.syncState(this.state,d,h,f),this.pendingDiffs.forEach(p=>{this.state=pi.syncDiff(this.state,p,h,f)}),this.pendingDiffs=[],b()}),this.channel._on(i.diff,{},d=>{const{onJoin:h,onLeave:f,onSync:b}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=pi.syncDiff(this.state,d,h,f),b())}),this.onJoin((d,h,f)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:h,newPresences:f})}),this.onLeave((d,h,f)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,d){const h=this.cloneDeep(n),f=this.transformState(r),b={},p={};return this.map(h,(y,v)=>{f[y]||(p[y]=v)}),this.map(f,(y,v)=>{const S=h[y];if(S){const _=v.map(K=>K.presence_ref),T=S.map(K=>K.presence_ref),k=v.filter(K=>T.indexOf(K.presence_ref)<0),q=S.filter(K=>_.indexOf(K.presence_ref)<0);k.length>0&&(b[y]=k),q.length>0&&(p[y]=q)}else b[y]=v}),this.syncDiff(h,{joins:b,leaves:p},i,d)}static syncDiff(n,r,i,d){const{joins:h,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),d||(d=()=>{}),this.map(h,(b,p)=>{var y;const v=(y=n[b])!==null&&y!==void 0?y:[];if(n[b]=this.cloneDeep(p),v.length>0){const S=n[b].map(T=>T.presence_ref),_=v.filter(T=>S.indexOf(T.presence_ref)<0);n[b].unshift(..._)}i(b,v,p)}),this.map(f,(b,p)=>{let y=n[b];if(!y)return;const v=p.map(S=>S.presence_ref);y=y.filter(S=>v.indexOf(S.presence_ref)<0),n[b]=y,d(b,y,p),y.length===0&&delete n[b]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const d=n[i];return"metas"in d?r[i]=d.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[i]=d,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Em;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Em||(Em={}));var gi;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(gi||(gi={}));var In;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(In||(In={}));class al{constructor(n,r={config:{}},i){var d,h;if(this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new jd(this,Ya.join,this.params,this.timeout),this.rejoinTimer=new Qm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ya.reply,{},(f,b)=>{this._trigger(this._replyEventName(b),f)}),this.presence=new pi(this),this.broadcastEndpointURL=Fm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var i,d,h;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:f,presence:b,private:p}}=this.params,y=(d=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(T=>T.filter))!==null&&d!==void 0?d:[],v=!!this.bindings[gi.PRESENCE]&&this.bindings[gi.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,S={},_={broadcast:f,presence:Object.assign(Object.assign({},b),{enabled:v}),postgres_changes:y,private:p};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(T=>n?.(In.CHANNEL_ERROR,T)),this._onClose(()=>n?.(In.CLOSED)),this.updateJoinPayload(Object.assign({config:_},S)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:T})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){n?.(In.SUBSCRIBED);return}else{const q=this.bindings.postgres_changes,K=(k=q?.length)!==null&&k!==void 0?k:0,Q=[];for(let te=0;te<K;te++){const P=q[te],{filter:{event:he,schema:Re,table:Z,filter:ae}}=P,le=T&&T[te];if(le&&le.event===he&&al.isFilterValueEqual(le.schema,Re)&&al.isFilterValueEqual(le.table,Z)&&al.isFilterValueEqual(le.filter,ae))Q.push(Object.assign(Object.assign({},P),{id:le.id}));else{this.unsubscribe(),this.state=jt.errored,n?.(In.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Q,n&&n(In.SUBSCRIBED);return}}).receive("error",T=>{this.state=jt.errored,n?.(In.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{n?.(In.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this.state===jt.joined&&n===gi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,i)}async httpSend(n,r,i={}){var d;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},b=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(d=i.timeout)!==null&&d!==void 0?d:this.timeout);if(b.status===202)return{success:!0};let p=b.statusText;try{const y=await b.json();p=y.error||y.message||p}catch{}return Promise.reject(new Error(p))}async send(n,r={}){var i,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=n,b={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(b.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:b,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((d=y.body)===null||d===void 0?void 0:d.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,b,p;const y=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(b=(f=this.params)===null||f===void 0?void 0:f.config)===null||b===void 0?void 0:b.broadcast)===null||p===void 0)&&p.ack)&&h("ok"),y.receive("ok",()=>h("ok")),y.receive("error",()=>h("error")),y.receive("timeout",()=>h("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=jt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ya.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(d=>{i=new jd(this,Ya.leave,{},n),i.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(n,r,i){const d=new AbortController,h=setTimeout(()=>d.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(h),f}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new jd(this,n,r,i);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Wg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var d,h;const f=n.toLocaleLowerCase(),{close:b,error:p,leave:y,join:v}=Ya;if(i&&[b,p,y,v].indexOf(f)>=0&&i!==this._joinRef())return;let _=this._onMessage(f,r,i);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(T=>{var k,q,K;return((k=T.filter)===null||k===void 0?void 0:k.event)==="*"||((K=(q=T.filter)===null||q===void 0?void 0:q.event)===null||K===void 0?void 0:K.toLocaleLowerCase())===f}).map(T=>T.callback(_,i)):(h=this.bindings[f])===null||h===void 0||h.filter(T=>{var k,q,K,Q,te,P,he,Re;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in T){const Z=T.id,ae=(k=T.filter)===null||k===void 0?void 0:k.event;return Z&&((q=r.ids)===null||q===void 0?void 0:q.includes(Z))&&(ae==="*"||ae?.toLocaleLowerCase()===((K=r.data)===null||K===void 0?void 0:K.type.toLocaleLowerCase()))&&(!(!((Q=T.filter)===null||Q===void 0)&&Q.table)||T.filter.table===((te=r.data)===null||te===void 0?void 0:te.table))}else{const Z=(he=(P=T?.filter)===null||P===void 0?void 0:P.event)===null||he===void 0?void 0:he.toLocaleLowerCase();return Z==="*"||Z===((Re=r?.event)===null||Re===void 0?void 0:Re.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===f}).map(T=>{if(typeof _=="object"&&"ids"in _){const k=_.data,{schema:q,table:K,commit_timestamp:Q,type:te,errors:P}=k;_=Object.assign(Object.assign({},{schema:q,table:K,commit_timestamp:Q,eventType:te,new:{},old:{},errors:P}),this._getPayloadRecords(k))}T.callback(_,i)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const d=n.toLocaleLowerCase(),h={type:d,filter:r,callback:i};return this.bindings[d]?this.bindings[d].push(h):this.bindings[d]=[h],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(d=>{var h;return!(((h=d.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===i&&al.isEqual(d.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Ya.close,{},n)}_onError(n){this._on(Ya.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Nm(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Nm(n.columns,n.old_record)),r}}const Td=()=>{},ec={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ib=[1e3,2e3,5e3,1e4],ob=1e4,cb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ub{constructor(n,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ld,this.transport=null,this.heartbeatIntervalMs=ec.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Td,this.ref=0,this.reconnectTimer=null,this.vsn=km,this.logger=Td,this.conn=null,this.sendBuffer=[],this.serializer=new eb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...h)=>d(...h):(...h)=>fetch(...h),!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${zd.websocket}`,this.httpEndpoint=Fm(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case _s.connecting:return er.Connecting;case _s.open:return er.Open;case _s.closing:return er.Closing;default:return er.Closed}}isConnected(){return this.connectionState()===er.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const i=`realtime:${n}`,d=this.getChannels().find(h=>h.topic===i);if(d)return d;{const h=new al(`realtime:${n}`,r,this);return this.channels.push(h),h}}push(n){const{topic:r,event:i,payload:d,ref:h}=n,f=()=>{this.encode(n,b=>{var p;(p=this.conn)===null||p===void 0||p.send(b)})};this.log("push",`${r} ${i} (${h})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Fg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ec.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",y)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:d,payload:h,ref:f}=r,b=f?`(${f})`:"",p=h.status||"";this.log("receive",`${p} ${i} ${d} ${b}`.trim(),h),this.channels.filter(y=>y._isMember(i)).forEach(y=>y._trigger(d,h,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===_s.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===_s.open||this.conn.readyState===_s.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Ya.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${n}${i}${d}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([cb],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,i=!1;if(n)r=n,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(d=>{const h={access_token:r,version:Qg};r&&d.updateJoinPayload(h),d.joinedOnce&&d._isJoined()&&d._push(Ya.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(r)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Qm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ec.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,i,d,h,f,b,p,y,v,S,_,T;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:Ld,this.heartbeatIntervalMs=(d=n?.heartbeatIntervalMs)!==null&&d!==void 0?d:ec.HEARTBEAT_INTERVAL,this.worker=(h=n?.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(b=n?.heartbeatCallback)!==null&&b!==void 0?b:Td,this.vsn=(p=n?.vsn)!==null&&p!==void 0?p:km,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=n?.reconnectAfterMs)!==null&&y!==void 0?y:(k=>ib[k-1]||ob),this.vsn){case Xm:this.encode=(v=n?.encode)!==null&&v!==void 0?v:((k,q)=>q(JSON.stringify(k))),this.decode=(S=n?.decode)!==null&&S!==void 0?S:((k,q)=>q(JSON.parse(k)));break;case Zg:this.encode=(_=n?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(T=n?.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var bi=class extends Error{constructor(l,n){super(l),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function db(l,n,r){const i=new URL(n,l);if(r)for(const[d,h]of Object.entries(r))h!==void 0&&i.searchParams.set(d,h);return i.toString()}async function hb(l){return!l||l.type==="none"?{}:l.type==="bearer"?{Authorization:`Bearer ${l.token}`}:l.type==="header"?{[l.name]:l.value}:l.type==="custom"?await l.getHeaders():{}}function fb(l){const n=l.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:d,body:h,headers:f}){const b=db(l.baseUrl,i,d),p=await hb(l.auth),y=await n(b,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...p,...f},body:h?JSON.stringify(h):void 0}),v=await y.text(),S=(y.headers.get("content-type")||"").includes("application/json"),_=S&&v?JSON.parse(v):v;if(!y.ok){const T=S?_:void 0,k=T?.error;throw new bi(k?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:k?.type,icebergCode:k?.code,details:T})}return{status:y.status,headers:y.headers,data:_}}}}function tc(l){return l.join("")}var mb=class{constructor(l,n=""){this.client=l,this.prefix=n}async listNamespaces(l){const n=l?{parent:tc(l.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(l,n){const r={namespace:l.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(l){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tc(l.namespace)}`})}async loadNamespaceMetadata(l){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tc(l.namespace)}`})).data.properties}}async namespaceExists(l){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tc(l.namespace)}`}),!0}catch(n){if(n instanceof bi&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(l,n){try{return await this.createNamespace(l,n)}catch(r){if(r instanceof bi&&r.status===409)return;throw r}}};function Pr(l){return l.join("")}var pb=class{constructor(l,n="",r){this.client=l,this.prefix=n,this.accessDelegation=r}async listTables(l){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pr(l.namespace)}/tables`})).data.identifiers}async createTable(l,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pr(l.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(l,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pr(l.namespace)}/tables/${l.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(l,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pr(l.namespace)}/tables/${l.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(l){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pr(l.namespace)}/tables/${l.name}`,headers:n})).data.metadata}async tableExists(l){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pr(l.namespace)}/tables/${l.name}`,headers:n}),!0}catch(r){if(r instanceof bi&&r.status===404)return!1;throw r}}async createTableIfNotExists(l,n){try{return await this.createTable(l,n)}catch(r){if(r instanceof bi&&r.status===409)return await this.loadTable({namespace:l.namespace,name:n.name});throw r}}},gb=class{constructor(l){let n="v1";l.catalogName&&(n+=`/${l.catalogName}`);const r=l.baseUrl.endsWith("/")?l.baseUrl:`${l.baseUrl}/`;this.client=fb({baseUrl:r,auth:l.auth,fetchImpl:l.fetch}),this.accessDelegation=l.accessDelegation?.join(","),this.namespaceOps=new mb(this.client,n),this.tableOps=new pb(this.client,n,this.accessDelegation)}async listNamespaces(l){return this.namespaceOps.listNamespaces(l)}async createNamespace(l,n){return this.namespaceOps.createNamespace(l,n)}async dropNamespace(l){await this.namespaceOps.dropNamespace(l)}async loadNamespaceMetadata(l){return this.namespaceOps.loadNamespaceMetadata(l)}async listTables(l){return this.tableOps.listTables(l)}async createTable(l,n){return this.tableOps.createTable(l,n)}async updateTable(l,n){return this.tableOps.updateTable(l,n)}async dropTable(l,n){await this.tableOps.dropTable(l,n)}async loadTable(l){return this.tableOps.loadTable(l)}async namespaceExists(l){return this.namespaceOps.namespaceExists(l)}async tableExists(l){return this.tableOps.tableExists(l)}async createNamespaceIfNotExists(l,n){return this.namespaceOps.createNamespaceIfNotExists(l,n)}async createTableIfNotExists(l,n){return this.tableOps.createTableIfNotExists(l,n)}},uc=class extends Error{constructor(l){super(l),this.__isStorageError=!0,this.name="StorageError"}};function ot(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}var bb=class extends uc{constructor(l,n,r){super(l),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Hd=class extends uc{constructor(l,n){super(l),this.name="StorageUnknownError",this.originalError=n}};const Wd=l=>l?(...n)=>l(...n):(...n)=>fetch(...n),xb=()=>Response,$d=l=>{if(Array.isArray(l))return l.map(r=>$d(r));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([r,i])=>{const d=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));n[d]=$d(i)}),n},yb=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},vb=l=>!l||typeof l!="string"||l.length===0||l.length>100||l.trim()!==l||l.includes("/")||l.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(l);function xi(l){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xi(l)}function wb(l,n){if(xi(l)!="object"||!l)return l;var r=l[Symbol.toPrimitive];if(r!==void 0){var i=r.call(l,n);if(xi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(l)}function Sb(l){var n=wb(l,"string");return xi(n)=="symbol"?n:n+""}function _b(l,n,r){return(n=Sb(n))in l?Object.defineProperty(l,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):l[n]=r,l}function Cm(l,n){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);n&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),r.push.apply(r,i)}return r}function xe(l){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Cm(Object(r),!0).forEach(function(i){_b(l,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):Cm(Object(r)).forEach(function(i){Object.defineProperty(l,i,Object.getOwnPropertyDescriptor(r,i))})}return l}const kd=l=>{var n;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(n=l.error)===null||n===void 0?void 0:n.message)||JSON.stringify(l)},jb=async(l,n,r)=>{l instanceof await xb()&&!r?.noResolveJson?l.json().then(i=>{const d=l.status||500,h=i?.statusCode||d+"";n(new bb(kd(i),d,h))}).catch(i=>{n(new Hd(kd(i),i))}):n(new Hd(kd(l),l))},Tb=(l,n,r,i)=>{const d={method:l,headers:n?.headers||{}};return l==="GET"||!i?d:(yb(i)?(d.headers=xe({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(i)):d.body=i,n?.duplex&&(d.duplex=n.duplex),xe(xe({},d),r))};async function _i(l,n,r,i,d,h){return new Promise((f,b)=>{l(r,Tb(n,i,d,h)).then(p=>{if(!p.ok)throw p;return i?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>jb(p,b,i))})}async function yi(l,n,r,i){return _i(l,"GET",n,r,i)}async function Ia(l,n,r,i,d){return _i(l,"POST",n,i,d,r)}async function Gd(l,n,r,i,d){return _i(l,"PUT",n,i,d,r)}async function kb(l,n,r,i){return _i(l,"HEAD",n,xe(xe({},r),{},{noResolveJson:!0}),i)}async function eh(l,n,r,i,d){return _i(l,"DELETE",n,i,d,r)}var Nb=class{constructor(l,n){this.downloadFn=l,this.shouldThrowOnError=n}then(l,n){return this.execute().then(l,n)}async execute(){var l=this;try{return{data:(await l.downloadFn()).body,error:null}}catch(n){if(l.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}};let Wm;Wm=Symbol.toStringTag;var Ab=class{constructor(l,n){this.downloadFn=l,this.shouldThrowOnError=n,this[Wm]="BlobDownloadBuilder",this.promise=null}asStream(){return new Nb(this.downloadFn,this.shouldThrowOnError)}then(l,n){return this.getPromise().then(l,n)}catch(l){return this.getPromise().catch(l)}finally(l){return this.getPromise().finally(l)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var l=this;try{return{data:await(await l.downloadFn()).blob(),error:null}}catch(n){if(l.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}};const Eb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Cb=class{constructor(l,n={},r,i){this.shouldThrowOnError=!1,this.url=l,this.headers=n,this.bucketId=r,this.fetch=Wd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(l,n,r,i){var d=this;try{let h;const f=xe(xe({},Rm),i);let b=xe(xe({},d.headers),l==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),p&&h.append("metadata",d.encodeMetadata(p)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),p&&!h.has("metadata")&&h.append("metadata",d.encodeMetadata(p))):(h=r,b["cache-control"]=`max-age=${f.cacheControl}`,b["content-type"]=f.contentType,p&&(b["x-metadata"]=d.toBase64(d.encodeMetadata(p))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),i?.headers&&(b=xe(xe({},b),i.headers));const y=d._removeEmptyFolders(n),v=d._getFinalPath(y),S=await(l=="PUT"?Gd:Ia)(d.fetch,`${d.url}/object/${v}`,h,xe({headers:b},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:y,id:S.Id,fullPath:S.Key},error:null}}catch(h){if(d.shouldThrowOnError)throw h;if(ot(h))return{data:null,error:h};throw h}}async upload(l,n,r){return this.uploadOrUpdate("POST",l,n,r)}async uploadToSignedUrl(l,n,r,i){var d=this;const h=d._removeEmptyFolders(l),f=d._getFinalPath(h),b=new URL(d.url+`/object/upload/sign/${f}`);b.searchParams.set("token",n);try{let p;const y=xe({upsert:Rm.upsert},i),v=xe(xe({},d.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&r instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",r)):typeof FormData<"u"&&r instanceof FormData?(p=r,p.append("cacheControl",y.cacheControl)):(p=r,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType),{data:{path:h,fullPath:(await Gd(d.fetch,b.toString(),p,{headers:v})).Key},error:null}}catch(p){if(d.shouldThrowOnError)throw p;if(ot(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(l,n){var r=this;try{let i=r._getFinalPath(l);const d=xe({},r.headers);n?.upsert&&(d["x-upsert"]="true");const h=await Ia(r.fetch,`${r.url}/object/upload/sign/${i}`,{},{headers:d}),f=new URL(r.url+h.url),b=f.searchParams.get("token");if(!b)throw new uc("No token returned by API");return{data:{signedUrl:f.toString(),path:l,token:b},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async update(l,n,r){return this.uploadOrUpdate("PUT",l,n,r)}async move(l,n,r){var i=this;try{return{data:await Ia(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:l,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:i.headers}),error:null}}catch(d){if(i.shouldThrowOnError)throw d;if(ot(d))return{data:null,error:d};throw d}}async copy(l,n,r){var i=this;try{return{data:{path:(await Ia(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:l,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:i.headers})).Key},error:null}}catch(d){if(i.shouldThrowOnError)throw d;if(ot(d))return{data:null,error:d};throw d}}async createSignedUrl(l,n,r){var i=this;try{let d=i._getFinalPath(l),h=await Ia(i.fetch,`${i.url}/object/sign/${d}`,xe({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:i.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return h={signedUrl:encodeURI(`${i.url}${h.signedURL}${f}`)},{data:h,error:null}}catch(d){if(i.shouldThrowOnError)throw d;if(ot(d))return{data:null,error:d};throw d}}async createSignedUrls(l,n,r){var i=this;try{const d=await Ia(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:n,paths:l},{headers:i.headers}),h=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:d.map(f=>xe(xe({},f),{},{signedUrl:f.signedURL?encodeURI(`${i.url}${f.signedURL}${h}`):null})),error:null}}catch(d){if(i.shouldThrowOnError)throw d;if(ot(d))return{data:null,error:d};throw d}}download(l,n){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(n?.transform||{}),d=i?`?${i}`:"",h=this._getFinalPath(l),f=()=>yi(this.fetch,`${this.url}/${r}/${h}${d}`,{headers:this.headers,noResolveJson:!0});return new Ab(f,this.shouldThrowOnError)}async info(l){var n=this;const r=n._getFinalPath(l);try{return{data:$d(await yi(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async exists(l){var n=this;const r=n._getFinalPath(l);try{return await kb(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i)&&i instanceof Hd){const d=i.originalError;if([400,404].includes(d?.status))return{data:!1,error:i}}throw i}}getPublicUrl(l,n){const r=this._getFinalPath(l),i=[],d=n?.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&i.push(d);const h=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&i.push(f);let b=i.join("&");return b!==""&&(b=`?${b}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${b}`)}}}async remove(l){var n=this;try{return{data:await eh(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:l},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async list(l,n,r){var i=this;try{const d=xe(xe(xe({},Eb),n),{},{prefix:l||""});return{data:await Ia(i.fetch,`${i.url}/object/list/${i.bucketId}`,d,{headers:i.headers},r),error:null}}catch(d){if(i.shouldThrowOnError)throw d;if(ot(d))return{data:null,error:d};throw d}}async listV2(l,n){var r=this;try{const i=xe({},l);return{data:await Ia(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}encodeMetadata(l){return JSON.stringify(l)}toBase64(l){return typeof Buffer<"u"?Buffer.from(l).toString("base64"):btoa(l)}_getFinalPath(l){return`${this.bucketId}/${l.replace(/^\/+/,"")}`}_removeEmptyFolders(l){return l.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(l){const n=[];return l.width&&n.push(`width=${l.width}`),l.height&&n.push(`height=${l.height}`),l.resize&&n.push(`resize=${l.resize}`),l.format&&n.push(`format=${l.format}`),l.quality&&n.push(`quality=${l.quality}`),n.join("&")}};const ep="2.90.1",tp={"X-Client-Info":`storage-js/${ep}`};var Rb=class{constructor(l,n={},r,i){this.shouldThrowOnError=!1;const d=new URL(l);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=xe(xe({},tp),n),this.fetch=Wd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(l){var n=this;try{const r=n.listBucketOptionsToQueryString(l);return{data:await yi(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async getBucket(l){var n=this;try{return{data:await yi(n.fetch,`${n.url}/bucket/${l}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async createBucket(l,n={public:!1}){var r=this;try{return{data:await Ia(r.fetch,`${r.url}/bucket`,{id:l,name:l,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async updateBucket(l,n){var r=this;try{return{data:await Gd(r.fetch,`${r.url}/bucket/${l}`,{id:l,name:l,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async emptyBucket(l){var n=this;try{return{data:await Ia(n.fetch,`${n.url}/bucket/${l}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async deleteBucket(l){var n=this;try{return{data:await eh(n.fetch,`${n.url}/bucket/${l}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(l){const n={};return l&&("limit"in l&&(n.limit=String(l.limit)),"offset"in l&&(n.offset=String(l.offset)),l.search&&(n.search=l.search),l.sortColumn&&(n.sortColumn=l.sortColumn),l.sortOrder&&(n.sortOrder=l.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Ob=class{constructor(l,n={},r){this.shouldThrowOnError=!1,this.url=l.replace(/\/$/,""),this.headers=xe(xe({},tp),n),this.fetch=Wd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(l){var n=this;try{return{data:await Ia(n.fetch,`${n.url}/bucket`,{name:l},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async listBuckets(l){var n=this;try{const r=new URLSearchParams;l?.limit!==void 0&&r.set("limit",l.limit.toString()),l?.offset!==void 0&&r.set("offset",l.offset.toString()),l?.sortColumn&&r.set("sortColumn",l.sortColumn),l?.sortOrder&&r.set("sortOrder",l.sortOrder),l?.search&&r.set("search",l.search);const i=r.toString(),d=i?`${n.url}/bucket?${i}`:`${n.url}/bucket`;return{data:await yi(n.fetch,d,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async deleteBucket(l){var n=this;try{return{data:await eh(n.fetch,`${n.url}/bucket/${l}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}from(l){var n=this;if(!vb(l))throw new uc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new gb({baseUrl:this.url,catalogName:l,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(d,h){const f=d[h];return typeof f!="function"?f:async(...b)=>{try{return{data:await f.apply(d,b),error:null}}catch(p){if(i)throw p;return{data:null,error:p}}}}})}};const th={"X-Client-Info":`storage-js/${ep}`,"Content-Type":"application/json"};var ap=class extends Error{constructor(l){super(l),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function wa(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}var Nd=class extends ap{constructor(l,n,r){super(l),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Db=class extends ap{constructor(l,n){super(l),this.name="StorageVectorsUnknownError",this.originalError=n}};const ah=l=>l?(...n)=>l(...n):(...n)=>fetch(...n),Mb=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Om=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Ub=async(l,n,r)=>{if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!r?.noResolveJson){const i=l.status||500,d=l;if(typeof d.json=="function")d.json().then(h=>{const f=h?.statusCode||h?.code||i+"";n(new Nd(Om(h),i,f))}).catch(()=>{const h=i+"";n(new Nd(d.statusText||`HTTP ${i} error`,i,h))});else{const h=i+"";n(new Nd(d.statusText||`HTTP ${i} error`,i,h))}}else n(new Db(Om(l),l))},Bb=(l,n,r,i)=>{const d={method:l,headers:n?.headers||{}};return i?(Mb(i)?(d.headers=xe({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(i)):d.body=i,xe(xe({},d),r)):d};async function qb(l,n,r,i,d,h){return new Promise((f,b)=>{l(r,Bb(n,i,d,h)).then(p=>{if(!p.ok)throw p;if(i?.noResolveJson)return p;const y=p.headers.get("content-type");return!y||!y.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>Ub(p,b,i))})}async function Sa(l,n,r,i,d){return qb(l,"POST",n,i,d,r)}var Lb=class{constructor(l,n={},r){this.shouldThrowOnError=!1,this.url=l.replace(/\/$/,""),this.headers=xe(xe({},th),n),this.fetch=ah(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(l){var n=this;try{return{data:await Sa(n.fetch,`${n.url}/CreateIndex`,l,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async getIndex(l,n){var r=this;try{return{data:await Sa(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:l,indexName:n},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(wa(i))return{data:null,error:i};throw i}}async listIndexes(l){var n=this;try{return{data:await Sa(n.fetch,`${n.url}/ListIndexes`,l,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async deleteIndex(l,n){var r=this;try{return{data:await Sa(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:l,indexName:n},{headers:r.headers})||{},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(wa(i))return{data:null,error:i};throw i}}},zb=class{constructor(l,n={},r){this.shouldThrowOnError=!1,this.url=l.replace(/\/$/,""),this.headers=xe(xe({},th),n),this.fetch=ah(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(l){var n=this;try{if(l.vectors.length<1||l.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Sa(n.fetch,`${n.url}/PutVectors`,l,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async getVectors(l){var n=this;try{return{data:await Sa(n.fetch,`${n.url}/GetVectors`,l,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async listVectors(l){var n=this;try{if(l.segmentCount!==void 0){if(l.segmentCount<1||l.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(l.segmentIndex!==void 0&&(l.segmentIndex<0||l.segmentIndex>=l.segmentCount))throw new Error(`segmentIndex must be between 0 and ${l.segmentCount-1}`)}return{data:await Sa(n.fetch,`${n.url}/ListVectors`,l,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async queryVectors(l){var n=this;try{return{data:await Sa(n.fetch,`${n.url}/QueryVectors`,l,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async deleteVectors(l){var n=this;try{if(l.keys.length<1||l.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Sa(n.fetch,`${n.url}/DeleteVectors`,l,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}},Vb=class{constructor(l,n={},r){this.shouldThrowOnError=!1,this.url=l.replace(/\/$/,""),this.headers=xe(xe({},th),n),this.fetch=ah(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(l){var n=this;try{return{data:await Sa(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:l},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async getBucket(l){var n=this;try{return{data:await Sa(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:l},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async listBuckets(l={}){var n=this;try{return{data:await Sa(n.fetch,`${n.url}/ListVectorBuckets`,l,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}async deleteBucket(l){var n=this;try{return{data:await Sa(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:l},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}}},Hb=class extends Vb{constructor(l,n={}){super(l,n.headers||{},n.fetch)}from(l){return new $b(this.url,this.headers,l,this.fetch)}async createBucket(l){var n=()=>super.createBucket,r=this;return n().call(r,l)}async getBucket(l){var n=()=>super.getBucket,r=this;return n().call(r,l)}async listBuckets(l={}){var n=()=>super.listBuckets,r=this;return n().call(r,l)}async deleteBucket(l){var n=()=>super.deleteBucket,r=this;return n().call(r,l)}},$b=class extends Lb{constructor(l,n,r,i){super(l,n,i),this.vectorBucketName=r}async createIndex(l){var n=()=>super.createIndex,r=this;return n().call(r,xe(xe({},l),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(l={}){var n=()=>super.listIndexes,r=this;return n().call(r,xe(xe({},l),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(l){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,l)}async deleteIndex(l){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,l)}index(l){return new Gb(this.url,this.headers,this.vectorBucketName,l,this.fetch)}},Gb=class extends zb{constructor(l,n,r,i,d){super(l,n,d),this.vectorBucketName=r,this.indexName=i}async putVectors(l){var n=()=>super.putVectors,r=this;return n().call(r,xe(xe({},l),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(l){var n=()=>super.getVectors,r=this;return n().call(r,xe(xe({},l),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(l={}){var n=()=>super.listVectors,r=this;return n().call(r,xe(xe({},l),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(l){var n=()=>super.queryVectors,r=this;return n().call(r,xe(xe({},l),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(l){var n=()=>super.deleteVectors,r=this;return n().call(r,xe(xe({},l),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Ib=class extends Rb{constructor(l,n={},r,i){super(l,n,r,i)}from(l){return new Cb(this.url,this.headers,l,this.fetch)}get vectors(){return new Hb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ob(this.url+"/iceberg",this.headers,this.fetch)}};const np="2.90.1",el=30*1e3,Id=3,Ad=Id*el,Yb="http://localhost:9999",Pb="supabase.auth.token",Jb={"X-Client-Info":`gotrue-js/${np}`},Yd="X-Supabase-Api-Version",sp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Kb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xb=600*1e3;class vi extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function ce(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class Qb extends vi{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function Zb(l){return ce(l)&&l.name==="AuthApiError"}class tr extends vi{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Yn extends vi{constructor(n,r,i,d){super(n,i,d),this.name=r,this.status=i}}class va extends Yn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Fb(l){return ce(l)&&l.name==="AuthSessionMissingError"}class Jr extends Yn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ac extends Yn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class nc extends Yn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wb(l){return ce(l)&&l.name==="AuthImplicitGrantRedirectError"}class Dm extends Yn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ex extends Yn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Pd extends Yn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Ed(l){return ce(l)&&l.name==="AuthRetryableFetchError"}class Mm extends Yn{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Jd extends Yn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const rc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Um=` 	
\r=`.split(""),tx=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<Um.length;n+=1)l[Um[n].charCodeAt(0)]=-2;for(let n=0;n<rc.length;n+=1)l[rc[n].charCodeAt(0)]=n;return l})();function Bm(l,n,r){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(rc[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(rc[i]),n.queuedBits-=6}}function rp(l,n,r){const i=tx[l];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function qm(l){const n=[],r=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},h=f=>{sx(f,i,r)};for(let f=0;f<l.length;f+=1)rp(l.charCodeAt(f),d,h);return n.join("")}function ax(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function nx(l,n){for(let r=0;r<l.length;r+=1){let i=l.charCodeAt(r);if(i>55295&&i<=56319){const d=(i-55296)*1024&65535;i=(l.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}ax(i,n)}}function sx(l,n,r){if(n.utf8seq===0){if(l<=127){r(l);return}for(let i=1;i<6;i+=1)if((l>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function nl(l){const n=[],r={queue:0,queuedBits:0},i=d=>{n.push(d)};for(let d=0;d<l.length;d+=1)rp(l.charCodeAt(d),r,i);return new Uint8Array(n)}function rx(l){const n=[];return nx(l,r=>n.push(r)),new Uint8Array(n)}function ar(l){const n=[],r={queue:0,queuedBits:0},i=d=>{n.push(d)};return l.forEach(d=>Bm(d,r,i)),Bm(null,r,i),n.join("")}function lx(l){return Math.round(Date.now()/1e3)+l}function ix(){return Symbol("auth-callback")}const zt=()=>typeof window<"u"&&typeof document<"u",Zs={tested:!1,writable:!1},lp=()=>{if(!zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zs.tested)return Zs.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Zs.tested=!0,Zs.writable=!0}catch{Zs.tested=!0,Zs.writable=!1}return Zs.writable};function ox(l){const n={},r=new URL(l);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,h)=>{n[h]=d})}catch{}return r.searchParams.forEach((i,d)=>{n[d]=i}),n}const ip=l=>l?(...n)=>l(...n):(...n)=>fetch(...n),cx=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",tl=async(l,n,r)=>{await l.setItem(n,JSON.stringify(r))},Fs=async(l,n)=>{const r=await l.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Lt=async(l,n)=>{await l.removeItem(n)};class dc{constructor(){this.promise=new dc.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}dc.promiseConstructor=Promise;function Cd(l){const n=l.split(".");if(n.length!==3)throw new Jd("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!Kb.test(n[i]))throw new Jd("JWT not in base64url format");return{header:JSON.parse(qm(n[0])),payload:JSON.parse(qm(n[1])),signature:nl(n[2]),raw:{header:n[0],payload:n[1]}}}async function ux(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function dx(l,n){return new Promise((i,d)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await l(h);if(!n(h,null,f)){i(f);return}}catch(f){if(!n(h,f)){d(f);return}}})()})}function hx(l){return("0"+l.toString(16)).substr(-2)}function fx(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let d="";for(let h=0;h<56;h++)d+=r.charAt(Math.floor(Math.random()*i));return d}return crypto.getRandomValues(n),Array.from(n,hx).join("")}async function mx(l){const r=new TextEncoder().encode(l),i=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(i);return Array.from(d).map(h=>String.fromCharCode(h)).join("")}async function px(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const r=await mx(l);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kr(l,n,r=!1){const i=fx();let d=i;r&&(d+="/PASSWORD_RECOVERY"),await tl(l,`${n}-code-verifier`,d);const h=await px(i);return[h,i===h?"plain":"s256"]}const gx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bx(l){const n=l.headers.get(Yd);if(!n||!n.match(gx))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function xx(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function yx(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xr(l){if(!vx.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rd(){const l={};return new Proxy(l,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wx(l,n){return new Proxy(l,{get:(r,i,d)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const h=i.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,d)}return!n.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,i,d)}})}function Lm(l){return JSON.parse(JSON.stringify(l))}const Ws=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Sx=[502,503,504];async function zm(l){var n;if(!cx(l))throw new Pd(Ws(l),0);if(Sx.includes(l.status))throw new Pd(Ws(l),l.status);let r;try{r=await l.json()}catch(h){throw new tr(Ws(h),h)}let i;const d=bx(l);if(d&&d.getTime()>=sp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Mm(Ws(r),l.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new va}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new Mm(Ws(r),l.status,r.weak_password.reasons);throw new Qb(Ws(r),l.status||500,i)}const _x=(l,n,r,i)=>{const d={method:l,headers:n?.headers||{}};return l==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),d.body=JSON.stringify(i),Object.assign(Object.assign({},d),r))};async function be(l,n,r,i){var d;const h=Object.assign({},i?.headers);h[Yd]||(h[Yd]=sp["2024-01-01"].name),i?.jwt&&(h.Authorization=`Bearer ${i.jwt}`);const f=(d=i?.query)!==null&&d!==void 0?d:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const b=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await jx(l,n,r+b,{headers:h,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}}async function jx(l,n,r,i,d,h){const f=_x(n,i,d,h);let b;try{b=await l(r,Object.assign({},f))}catch(p){throw console.error(p),new Pd(Ws(p),0)}if(b.ok||await zm(b),i?.noResolveJson)return b;try{return await b.json()}catch(p){await zm(p)}}function Ga(l){var n;let r=null;Nx(l)&&(r=Object.assign({},l),l.expires_at||(r.expires_at=lx(l.expires_in)));const i=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:r,user:i},error:null}}function Vm(l){const n=Ga(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=l.weak_password),n}function js(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function Tx(l){return{data:l,error:null}}function kx(l){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:d,verification_type:h}=l,f=cc(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),b={action_link:n,email_otp:r,hashed_token:i,redirect_to:d,verification_type:h},p=Object.assign({},f);return{data:{properties:b,user:p},error:null}}function Hm(l){return l}function Nx(l){return l.access_token&&l.refresh_token&&l.expires_in}const Od=["global","local","others"];class Ax{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=ip(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Od[0]){if(Od.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Od.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:js})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=cc(n,["options"]),d=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(d.new_email=i?.newEmail,delete d.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:kx,redirectTo:r?.redirectTo})}catch(r){if(ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:js})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,d,h,f,b,p;try{const y={nextPage:null,lastPage:0,total:0},v=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(h=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:Hm});if(v.error)throw v.error;const S=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,T=(p=(b=v.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&p!==void 0?p:[];return T.length>0&&(T.forEach(k=>{const q=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),K=JSON.parse(k.split(";")[1].split("=")[1]);y[`${K}Page`]=q}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},S),y),error:null}}catch(y){if(ce(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){Xr(n);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:js})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Xr(n);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:js})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){Xr(n);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:js})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){Xr(n.userId);try{const{data:r,error:i}=await be(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:i}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Xr(n.userId),Xr(n.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,i,d,h,f,b,p;try{const y={nextPage:null,lastPage:0,total:0},v=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(h=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:Hm});if(v.error)throw v.error;const S=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,T=(p=(b=v.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&p!==void 0?p:[];return T.length>0&&(T.forEach(k=>{const q=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),K=JSON.parse(k.split(";")[1].split("=")[1]);y[`${K}Page`]=q}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},S),y),error:null}}catch(y){if(ce(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(n){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(n){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}}function $m(l={}){return{getItem:n=>l[n]||null,setItem:(n,r)=>{l[n]=r},removeItem:n=>{delete l[n]}}}const Qr={debug:!!(globalThis&&lp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class op extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Ex extends op{}async function Cx(l,n,r){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async d=>{if(d){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,d.name);try{return await r()}finally{Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,d.name)}}else{if(n===0)throw Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Ex(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Qr.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Rx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function cp(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function Ox(l){return parseInt(l,16)}function Dx(l){const n=new TextEncoder().encode(l);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function Mx(l){var n;const{chainId:r,domain:i,expirationTime:d,issuedAt:h=new Date,nonce:f,notBefore:b,requestId:p,resources:y,scheme:v,uri:S,version:_}=l;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((n=l.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const T=cp(l.address),k=v?`${v}://${i}`:i,q=l.statement?`${l.statement}
`:"",K=`${k} wants you to sign in with your Ethereum account:
${T}

${q}`;let Q=`URI: ${S}
Version: ${_}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(d&&(Q+=`
Expiration Time: ${d.toISOString()}`),b&&(Q+=`
Not Before: ${b.toISOString()}`),p&&(Q+=`
Request ID: ${p}`),y){let te=`
Resources:`;for(const P of y){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);te+=`
- ${P}`}Q+=te}return`${K}
${Q}`}class vt extends Error{constructor({message:n,code:r,cause:i,name:d}){var h;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(h=d??(i instanceof Error?i.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class lc extends vt{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ux({error:l,options:n}){var r,i,d;const{publicKey:h}=n;if(!h)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(n.mediation==="conditional"&&((i=h.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((d=h.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new vt({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return h.pubKeyCredParams.filter(b=>b.type==="public-key").length===0?new vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const f=window.location.hostname;if(up(f)){if(h.rp.id!==f)return new vt({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Bx({error:l,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new vt({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const i=window.location.hostname;if(up(i)){if(r.rpId!==i)return new vt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class qx{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Lx=new qx;function zx(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:n,user:r,excludeCredentials:i}=l,d=cc(l,["challenge","user","excludeCredentials"]),h=nl(n).buffer,f=Object.assign(Object.assign({},r),{id:nl(r.id).buffer}),b=Object.assign(Object.assign({},d),{challenge:h,user:f});if(i&&i.length>0){b.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const y=i[p];b.excludeCredentials[p]=Object.assign(Object.assign({},y),{id:nl(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return b}function Vx(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:n,allowCredentials:r}=l,i=cc(l,["challenge","allowCredentials"]),d=nl(n).buffer,h=Object.assign(Object.assign({},i),{challenge:d});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const b=r[f];h.allowCredentials[f]=Object.assign(Object.assign({},b),{id:nl(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return h}function Hx(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const r=l;return{id:l.id,rawId:l.id,response:{attestationObject:ar(new Uint8Array(l.response.attestationObject)),clientDataJSON:ar(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function $x(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const r=l,i=l.getClientExtensionResults(),d=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:ar(new Uint8Array(d.authenticatorData)),clientDataJSON:ar(new Uint8Array(d.clientDataJSON)),signature:ar(new Uint8Array(d.signature)),userHandle:d.userHandle?ar(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function up(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function Gm(){var l,n;return!!(zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator?.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Gx(l){try{const n=await navigator.credentials.create(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new lc("Browser returned unexpected credential type",n)}:{data:null,error:new lc("Empty credential response",n)}}catch(n){return{data:null,error:Ux({error:n,options:l})}}}async function Ix(l){try{const n=await navigator.credentials.get(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new lc("Browser returned unexpected credential type",n)}:{data:null,error:new lc("Empty credential response",n)}}catch(n){return{data:null,error:Bx({error:n,options:l})}}}const Yx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Px={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ic(...l){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),i={};for(const d of l)if(d)for(const h in d){const f=d[h];if(f!==void 0)if(Array.isArray(f))i[h]=f;else if(r(f))i[h]=f;else if(n(f)){const b=i[h];n(b)?i[h]=ic(b,f):i[h]=ic(f)}else i[h]=f}return i}function Jx(l,n){return ic(Yx,l,n||{})}function Kx(l,n){return ic(Px,l,n||{})}class Xx{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:i,signal:d},h){try{const{data:f,error:b}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:b};const p=d??Lx.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${i}`),y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=Jx(f.webauthn.credential_options.publicKey,h?.create),{data:v,error:S}=await Gx({publicKey:y,signal:p});return v?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:S}}case"request":{const y=Kx(f.webauthn.credential_options.publicKey,h?.request),{data:v,error:S}=await Ix(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:p}));return v?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:S}}}}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new tr("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new vi("rpId is required for WebAuthn authentication")};try{if(!Gm())return{data:null,error:new tr("Browser does not support WebAuthn",null)};const{data:f,error:b}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:i},signal:d},{request:h});if(!f)return{data:null,error:b};const{webauthn:p}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:i,credential_response:p.credential_response}})}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new tr("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new vi("rpId is required for WebAuthn registration")};try{if(!Gm())return{data:null,error:new tr("Browser does not support WebAuthn",null)};const{data:f,error:b}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(v=>{var S;return(S=v.data)===null||S===void 0?void 0:S.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===n&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:b};const{data:p,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:d},{create:h});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:y}}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new tr("Unexpected error in register",f)}}}}Rx();const Qx={url:Yb,storageKey:Pb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Im(l,n,r){return await r()}const Zr={};class wi{get jwks(){var n,r;return(r=(n=Zr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Zr[this.storageKey]=Object.assign(Object.assign({},Zr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Zr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Zr[this.storageKey]=Object.assign(Object.assign({},Zr[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},Qx),n);if(this.storageKey=h.storageKey,this.instanceID=(r=wi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,wi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&zt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new Ax({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=ip(h.fetch),this.lock=h.lock||Im,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&zt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Cx:this.lock=Im,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Xx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:lp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$m(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=$m(this.memoryStorage)),zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${np}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(zt()&&(r=ox(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),zt()&&this.detectSessionInUrl&&i!=="none"){const{data:d,error:h}=await this._getSessionFromURL(r,i);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),Wb(h)){const p=(n=h.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:f,redirectType:b}=d;return this._debug("#_initialize()","detected session in URL",f,"redirect type",b),await this._saveSession(f),setTimeout(async()=>{b==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ce(r)?this._returnResult({error:r}):this._returnResult({error:new tr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,d;try{const h=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(d=n?.options)===null||d===void 0?void 0:d.captchaToken}},xform:Ga}),{data:f,error:b}=h;if(b||!f)return this._returnResult({data:{user:null,session:null},error:b});const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(h){if(ce(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(n){var r,i,d;try{let h;if("email"in n){const{email:v,password:S,options:_}=n;let T=null,k=null;this.flowType==="pkce"&&([T,k]=await Kr(this.storage,this.storageKey)),h=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:S,data:(r=_?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:T,code_challenge_method:k},xform:Ga})}else if("phone"in n){const{phone:v,password:S,options:_}=n;h=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:S,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(d=_?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Ga})}else throw new ac("You must provide either an email or phone number and a password");const{data:f,error:b}=h;if(b||!f)return await Lt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:b});const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(h){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(n){try{let r;if("email"in n){const{email:h,password:f,options:b}=n;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Vm})}else if("phone"in n){const{phone:h,password:f,options:b}=n;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Vm})}else throw new ac("You must provide either an email or phone number and a password");const{data:i,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!i||!i.session||!i.user){const h=new Jr;return this._returnResult({data:{user:null,session:null},error:h})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:d})}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,d,h;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(h=n.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,d,h,f,b,p,y,v,S,_;let T,k;if("message"in n)T=n.message,k=n.signature;else{const{chain:q,wallet:K,statement:Q,options:te}=n;let P;if(zt())if(typeof K=="object")P=K;else{const Ve=window;if("ethereum"in Ve&&typeof Ve.ethereum=="object"&&"request"in Ve.ethereum&&typeof Ve.ethereum.request=="function")P=Ve.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!te?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=K}const he=new URL((r=te?.url)!==null&&r!==void 0?r:window.location.href),Re=await P.request({method:"eth_requestAccounts"}).then(Ve=>Ve).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Re||Re.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Z=cp(Re[0]);let ae=(i=te?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ae){const Ve=await P.request({method:"eth_chainId"});ae=Ox(Ve)}const le={domain:he.host,address:Z,statement:Q,uri:he.href,version:"1",chainId:ae,nonce:(d=te?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(f=(h=te?.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(b=te?.signInWithEthereum)===null||b===void 0?void 0:b.expirationTime,notBefore:(p=te?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(y=te?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(v=te?.signInWithEthereum)===null||v===void 0?void 0:v.resources};T=Mx(le),k=await P.request({method:"personal_sign",params:[Dx(T),Z]})}try{const{data:q,error:K}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:k},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Ga});if(K)throw K;if(!q||!q.session||!q.user){const Q=new Jr;return this._returnResult({data:{user:null,session:null},error:Q})}return q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),this._returnResult({data:Object.assign({},q),error:K})}catch(q){if(ce(q))return this._returnResult({data:{user:null,session:null},error:q});throw q}}async signInWithSolana(n){var r,i,d,h,f,b,p,y,v,S,_,T;let k,q;if("message"in n)k=n.message,q=n.signature;else{const{chain:K,wallet:Q,statement:te,options:P}=n;let he;if(zt())if(typeof Q=="object")he=Q;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))he=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Q!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");he=Q}const Re=new URL((r=P?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in he&&he.signIn){const Z=await he.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:Re.host,uri:Re.href}),te?{statement:te}:null));let ae;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")ae=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)ae=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ae&&"signature"in ae&&(typeof ae.signedMessage=="string"||ae.signedMessage instanceof Uint8Array)&&ae.signature instanceof Uint8Array)k=typeof ae.signedMessage=="string"?ae.signedMessage:new TextDecoder().decode(ae.signedMessage),q=ae.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in he)||typeof he.signMessage!="function"||!("publicKey"in he)||typeof he!="object"||!he.publicKey||!("toBase58"in he.publicKey)||typeof he.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${Re.host} wants you to sign in with your Solana account:`,he.publicKey.toBase58(),...te?["",te,""]:[""],"Version: 1",`URI: ${Re.href}`,`Issued At: ${(d=(i=P?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((h=P?.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((f=P?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((b=P?.signInWithSolana)===null||b===void 0)&&b.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((p=P?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((y=P?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((S=(v=P?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||S===void 0)&&S.length?["Resources",...P.signInWithSolana.resources.map(ae=>`- ${ae}`)]:[]].join(`
`);const Z=await he.signMessage(new TextEncoder().encode(k),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");q=Z}}try{const{data:K,error:Q}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:ar(q)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(T=n.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Ga});if(Q)throw Q;if(!K||!K.session||!K.user){const te=new Jr;return this._returnResult({data:{user:null,session:null},error:te})}return K.session&&(await this._saveSession(K.session),await this._notifyAllSubscribers("SIGNED_IN",K.session)),this._returnResult({data:Object.assign({},K),error:Q})}catch(K){if(ce(K))return this._returnResult({data:{user:null,session:null},error:K});throw K}}async _exchangeCodeForSession(n){const r=await Fs(this.storage,`${this.storageKey}-code-verifier`),[i,d]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new ex;const{data:h,error:f}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:Ga});if(await Lt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const b=new Jr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:b})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:d??null}),error:f})}catch(h){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(n){try{const{options:r,provider:i,token:d,access_token:h,nonce:f}=n,b=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:d,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ga}),{data:p,error:y}=b;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!p||!p.session||!p.user){const v=new Jr;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:y})}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,d,h,f;try{if("email"in n){const{email:b,options:p}=n;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Kr(this.storage,this.storageKey));const{error:S}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:b,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(i=p?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:S})}if("phone"in n){const{phone:b,options:p}=n,{data:y,error:v}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:(d=p?.data)!==null&&d!==void 0?d:{},create_user:(h=p?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:v})}throw new ac("You must provide either an email or phone number.")}catch(b){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async verifyOtp(n){var r,i;try{let d,h;"options"in n&&(d=(r=n.options)===null||r===void 0?void 0:r.redirectTo,h=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:b}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:h}}),redirectTo:d,xform:Ga});if(b)throw b;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,y=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:y,session:p},error:null})}catch(d){if(ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(n){var r,i,d,h,f;try{let b=null,p=null;this.flowType==="pkce"&&([b,p]=await Kr(this.storage,this.storageKey));const y=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((d=n?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:b,code_challenge_method:p}),headers:this.headers,xform:Tx});return!((h=y.data)===null||h===void 0)&&h.url&&zt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(b){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(b))return this._returnResult({data:null,error:b});throw b}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new va;const{error:d}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:d,options:h}=n,{error:f}=await be(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:i,type:d,options:h}=n,{data:f,error:b}=await be(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:b})}throw new ac("You must provide either an email or phone number and a type")}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Fs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Ad:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await Fs(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=Rd()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=wx(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:js}):await this._useSession(async r=>{var i,d,h;const{data:f,error:b}=r;if(b)throw b;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new va}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0,xform:js})})}catch(r){if(ce(r))return Fb(r)&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:d,error:h}=i;if(h)throw h;if(!d.session)throw new va;const f=d.session;let b=null,p=null;this.flowType==="pkce"&&n.email!=null&&([b,p]=await Kr(this.storage,this.storageKey));const{data:y,error:v}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:b,code_challenge_method:p}),jwt:f.access_token,xform:js});if(v)throw v;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(i){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new va;const r=Date.now()/1e3;let i=r,d=!0,h=null;const{payload:f}=Cd(n.access_token);if(f.exp&&(i=f.exp,d=i<=r),d){const{data:b,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!b)return{data:{user:null,session:null},error:null};h=b}else{const{data:b,error:p}=await this._getUser(n.access_token);if(p)throw p;h={access_token:n.access_token,refresh_token:n.refresh_token,user:b.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:f,error:b}=r;if(b)throw b;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new va;const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!zt())throw new nc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new nc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Dm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Dm("No code detected.");const{data:te,error:P}=await this._exchangeCodeForSession(n.code);if(P)throw P;const he=new URL(window.location.href);return he.searchParams.delete("code"),window.history.replaceState(window.history.state,"",he.toString()),{data:{session:te.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:d,access_token:h,refresh_token:f,expires_in:b,expires_at:p,token_type:y}=n;if(!h||!b||!f||!y)throw new nc("No session defined in URL");const v=Math.round(Date.now()/1e3),S=parseInt(b);let _=v+S;p&&(_=parseInt(p));const T=_-v;T*1e3<=el&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${S}s`);const k=_-S;v-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,_,v):v-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,_,v);const{data:q,error:K}=await this._getUser(h);if(K)throw K;const Q={provider_token:i,provider_refresh_token:d,access_token:h,expires_in:S,expires_at:_,refresh_token:f,token_type:y,user:q.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:Q,redirectType:n.type},error:null})}catch(i){if(ce(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Fs(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:d,error:h}=r;if(h)return this._returnResult({error:h});const f=(i=d.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:b}=await this.admin.signOut(f,n);if(b&&!(Zb(b)&&(b.status===404||b.status===401||b.status===403)))return this._returnResult({error:b})}return n!=="others"&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=ix(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,d;try{const{data:{session:h},error:f}=r;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",n,"session",h)}catch(h){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",h),console.error(h)}})}async resetPasswordForEmail(n,r={}){let i=null,d=null;this.flowType==="pkce"&&([i,d]=await Kr(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:i,error:d}=await this._useSession(async h=>{var f,b,p,y,v;const{data:S,error:_}=h;if(_)throw _;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(b=n.options)===null||b===void 0?void 0:b.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(y=S.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(d)throw d;return zt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(ce(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{const{error:d,data:{session:h}}=r;if(d)throw d;const{options:f,provider:b,token:p,access_token:y,nonce:v}=n,S=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=h?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:b,id_token:p,access_token:y,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ga}),{data:_,error:T}=S;return T?this._returnResult({data:{user:null,session:null},error:T}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Jr}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:T}))}catch(d){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,d;const{data:h,error:f}=r;if(f)throw f;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(i=h.session)===null||i===void 0?void 0:i.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await dx(async d=>(d>0&&await ux(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ga})),(d,h)=>{const f=200*Math.pow(2,d);return h&&Ed(h)&&Date.now()+f-i<el})}catch(i){if(this._debug(r,"error",i),ce(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),zt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const d=await Fs(this.storage,this.storageKey);if(d&&this.userStorage){let f=await Fs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:d.user},await tl(this.userStorage,this.storageKey+"-user",f)),d.user=(n=f?.user)!==null&&n!==void 0?n:Rd()}else if(d&&!d.user&&!d.user){const f=await Fs(this.storage,this.storageKey+"-user");f&&f?.user?(d.user=f.user,await Lt(this.storage,this.storageKey+"-user"),await tl(this.storage,this.storageKey,d)):d.user=Rd()}if(this._debug(i,"session from storage",d),!this._isValidSession(d)){this._debug(i,"session is not valid"),d!==null&&await this._removeSession();return}const h=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ad;if(this._debug(i,`session has${h?"":" not"} expired with margin of ${Ad}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:f}=await this._callRefreshToken(d.refresh_token);f&&(console.error(f),Ed(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:b}=await this._getUser(d.access_token);!b&&f?.user?(d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(i,"error",d),console.error(d);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new va;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new dc;const{data:h,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!h.session)throw new va;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const b={data:h.session,error:null};return this.refreshingDeferred.resolve(b),b}catch(h){if(this._debug(d,"error",h),ce(h)){const f={data:null,error:h};return Ed(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(h),h}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,r,i=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async b=>{try{await b.callback(n,r)}catch(p){h.push(p)}});if(await Promise.all(f),h.length>0){for(let b=0;b<h.length;b+=1)console.error(h[b]);throw h[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Lt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await tl(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const h=Lm(d);await tl(this.storage,this.storageKey,h)}else{const d=Lm(r);await tl(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Lt(this.storage,this.storageKey),await Lt(this.storage,this.storageKey+"-code-verifier"),await Lt(this.storage,this.storageKey+"-user"),this.userStorage&&await Lt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&zt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),el);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((i.expires_at*1e3-n)/el);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${el}ms, refresh threshold is ${Id} ticks`),d<=Id&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof op)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const d=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&d.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[h,f]=await Kr(this.storage,this.storageKey),b=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});d.push(b.toString())}if(i?.queryParams){const h=new URLSearchParams(i.queryParams);d.push(h.toString())}return i?.skipBrowserRedirect&&d.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:d,error:h}=r;return h?this._returnResult({data:null,error:h}):await be(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=d?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,d;const{data:h,error:f}=r;if(f)return this._returnResult({data:null,error:f});const b=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:y}=await be(this.fetch,"POST",`${this.url}/factors`,{body:b,headers:this.headers,jwt:(i=h?.session)===null||i===void 0?void 0:i.access_token});return y?this._returnResult({data:null,error:y}):(n.factorType==="totp"&&p.type==="totp"&&(!((d=p?.totp)===null||d===void 0)&&d.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Hx(n.webauthn.credential_response):$x(n.webauthn.credential_response)})}:{code:n.code}),{data:b,error:p}=await be(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=d?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+b.expires_in},b)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",b),this._returnResult({data:b,error:p}))})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=await be(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=d?.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:b}=f;if(b.type!=="webauthn")return{data:b,error:null};switch(b.webauthn.type){case"create":return{data:Object.assign(Object.assign({},b),{webauthn:Object.assign(Object.assign({},b.webauthn),{credential_options:Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:zx(b.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},b),{webauthn:Object.assign(Object.assign({},b.webauthn),{credential_options:Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:Vx(b.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const d={all:[],phone:[],totp:[],webauthn:[]};for(const h of(n=r?.factors)!==null&&n!==void 0?n:[])d.all.push(h),h.status==="verified"&&d[h.factor_type].push(h);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:i},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Cd(i.access_token);let f=null;h.aal&&(f=h.aal);let b=f;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const y=h.amr||[];return{data:{currentLevel:f,nextLevel:b,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:i},error:d}=r;return d?this._returnResult({data:null,error:d}):i?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new va})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{const{data:{session:d},error:h}=i;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new va});const f=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:b=>({data:b,error:null})});return f.data&&f.data.redirect_url&&zt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{const{data:{session:d},error:h}=i;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new va});const f=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:b=>({data:b,error:null})});return f.data&&f.data.redirect_url&&zt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new va})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:i},error:d}=r;return d?this._returnResult({data:null,error:d}):i?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new va})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(b=>b.kid===n);if(i)return i;const d=Date.now();if(i=this.jwks.keys.find(b=>b.kid===n),i&&this.jwks_cached_at+Xb>d)return i;const{data:h,error:f}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=d,i=h.keys.find(b=>b.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:T,error:k}=await this.getSession();if(k||!T.session)return this._returnResult({data:null,error:k});i=T.session.access_token}const{header:d,payload:h,signature:f,raw:{header:b,payload:p}}=Cd(i);r?.allowExpired||xx(h.exp);const y=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!y){const{error:T}=await this.getUser(i);if(T)throw T;return{data:{claims:h,header:d,signature:f},error:null}}const v=yx(d.alg),S=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,S,f,rx(`${b}.${p}`)))throw new Jd("Invalid JWT signature");return{data:{claims:h,header:d,signature:f},error:null}}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}}wi.nextInstanceID={};const Zx=wi,Fx="2.90.1";let fi="";typeof Deno<"u"?fi="deno":typeof document<"u"?fi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fi="react-native":fi="node";const Wx={"X-Client-Info":`supabase-js-${fi}/${Fx}`},ey={headers:Wx},ty={schema:"public"},ay={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ny={};function Si(l){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Si(l)}function sy(l,n){if(Si(l)!="object"||!l)return l;var r=l[Symbol.toPrimitive];if(r!==void 0){var i=r.call(l,n);if(Si(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(l)}function ry(l){var n=sy(l,"string");return Si(n)=="symbol"?n:n+""}function ly(l,n,r){return(n=ry(n))in l?Object.defineProperty(l,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):l[n]=r,l}function Ym(l,n){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);n&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),r.push.apply(r,i)}return r}function ht(l){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ym(Object(r),!0).forEach(function(i){ly(l,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):Ym(Object(r)).forEach(function(i){Object.defineProperty(l,i,Object.getOwnPropertyDescriptor(r,i))})}return l}const iy=l=>l?(...n)=>l(...n):(...n)=>fetch(...n),oy=()=>Headers,cy=(l,n,r)=>{const i=iy(r),d=oy();return async(h,f)=>{var b;const p=(b=await n())!==null&&b!==void 0?b:l;let y=new d(f?.headers);return y.has("apikey")||y.set("apikey",l),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),i(h,ht(ht({},f),{},{headers:y}))}};function uy(l){return l.endsWith("/")?l:l+"/"}function dy(l,n){var r,i;const{db:d,auth:h,realtime:f,global:b}=l,{db:p,auth:y,realtime:v,global:S}=n,_={db:ht(ht({},p),d),auth:ht(ht({},y),h),realtime:ht(ht({},v),f),storage:{},global:ht(ht(ht({},S),b),{},{headers:ht(ht({},(r=S?.headers)!==null&&r!==void 0?r:{}),(i=b?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return l.accessToken?_.accessToken=l.accessToken:delete _.accessToken,_}function hy(l){const n=l?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uy(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var fy=class extends Zx{constructor(l){super(l)}},my=class{constructor(l,n,r){var i,d;this.supabaseUrl=l,this.supabaseKey=n;const h=hy(l);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,b={db:ty,realtime:ny,auth:ht(ht({},ay),{},{storageKey:f}),global:ey},p=dy(r??{},b);if(this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(d=p.global.headers)!==null&&d!==void 0?d:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(v,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=p.auth)!==null&&y!==void 0?y:{},this.headers,p.global.fetch)}this.fetch=cy(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(ht({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new Jg(new URL("rest/v1",h).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Ib(this.storageUrl.href,this.headers,this.fetch,r?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new $g(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(l){return this.rest.from(l)}schema(l){return this.rest.schema(l)}rpc(l,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(l,n,r)}channel(l,n={config:{}}){return this.realtime.channel(l,n)}getChannels(){return this.realtime.getChannels()}removeChannel(l){return this.realtime.removeChannel(l)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var l=this,n,r;if(l.accessToken)return await l.accessToken();const{data:i}=await l.auth.getSession();return(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:l.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:l,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:d,storageKey:h,flowType:f,lock:b,debug:p,throwOnError:y},v,S){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fy({url:this.authUrl.href,headers:ht(ht({},_),v),storageKey:h,autoRefreshToken:l,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:d,flowType:f,lock:b,debug:p,throwOnError:y,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(l){return new ub(this.realtimeUrl.href,ht(ht({},l),{},{params:ht(ht({},{apikey:this.supabaseKey}),l?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,n)=>{this._handleTokenChanged(l,"CLIENT",n?.access_token)})}_handleTokenChanged(l,n,r){(l==="TOKEN_REFRESHED"||l==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):l==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const py=(l,n,r)=>new my(l,n,r);function gy(){if(typeof window<"u")return!1;const l=globalThis.process;if(!l)return!1;const n=l.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}gy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const by="https://jxgiffkpcvbmfqxdgvje.supabase.co",xy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4Z2lmZmtwY3ZibWZxeGRndmplIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg1MjA2NDcsImV4cCI6MjA4NDA5NjY0N30.Gu_x_H4HSxeBKK0Vn8mu-YqnfHG5uBCJw1GjLF8ZdyM",Pe=py(by,xy),$n={async signUp(l,n,r){const{data:i,error:d}=await Pe.auth.signUp({email:l,password:n,options:{data:{username:r,display_name:r}}});if(d)throw d;return i},async signIn(l,n){const{data:r,error:i}=await Pe.auth.signInWithPassword({email:l,password:n});if(i)throw i;return r},async signOut(){const{error:l}=await Pe.auth.signOut();if(l)throw l},async getCurrentUser(){const{data:{user:l}}=await Pe.auth.getUser();return l},async getSession(){const{data:{session:l}}=await Pe.auth.getSession();return l},async createUserProfile(l,n,r){const{error:i}=await Pe.from("profiles").upsert({id:l,username:n,email:r,total_score:0,total_beats_created:0,total_tutorials_completed:0,current_streak:0,longest_streak:0,rank_title:"Beginner",experience_points:0,level:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(i&&i.code!=="23505")throw i},async getUserProfile(l){const{data:n,error:r}=await Pe.from("profiles").select("*").eq("id",l).single();if(r)throw r;return n},async updateUserProfile(l,n){const{data:r,error:i}=await Pe.from("profiles").update({...n,updated_at:new Date().toISOString()}).eq("id",l).select().single();if(i)throw i;return r}},mi={async saveScore(l,n,r,i,d,h,f){const{data:b,error:p}=await Pe.from("scores").insert({user_id:l,scenario_id:n,scenario_name:r,score:i,accuracy:d,tempo:h,instruments_used:f,created_at:new Date().toISOString()}).select().single();if(p)throw p;return await this.updateUserTotalScore(l,i),b},async updateUserTotalScore(l,n){const{data:r}=await Pe.from("profiles").select("total_score, experience_points, level").eq("id",l).single();if(r){const i=(r.total_score||0)+n,d=(r.experience_points||0)+Math.floor(n/10),h=Math.floor(d/1e3)+1,f=this.getRankTitle(h);await Pe.from("profiles").update({total_score:i,experience_points:d,level:h,rank_title:f,updated_at:new Date().toISOString()}).eq("id",l)}},getRankTitle(l){return l>=50?" Rhythm Master":l>=40?" Virtuoso":l>=30?" Rockstar":l>=25?" Professional":l>=20?" DJ Pro":l>=15?" Beat Expert":l>=10?" Composer":l>=7?" Musician":l>=5?" Intermediate":l>=3?" Apprentice":" Beginner"},async getUserBestScore(l,n){const{data:r,error:i}=await Pe.from("scores").select("*").eq("user_id",l).eq("scenario_id",n).order("score",{ascending:!1}).limit(1).single();if(i&&i.code!=="PGRST116")throw i;return r},async getGlobalLeaderboard(l=100){const{data:n,error:r}=await Pe.from("profiles").select("id, username, total_score, level, rank_title, total_beats_created").order("total_score",{ascending:!1}).limit(l);if(r)throw r;return n},async getScenarioLeaderboard(l,n=50){const{data:r,error:i}=await Pe.from("scores").select(`
        id,
        score,
        accuracy,
        created_at,
        profiles (
          username,
          rank_title
        )
      `).eq("scenario_id",l).order("score",{ascending:!1}).limit(n);if(i)throw i;return r},async getUserRecentScores(l,n=10){const{data:r,error:i}=await Pe.from("scores").select("*").eq("user_id",l).order("created_at",{ascending:!1}).limit(n);if(i)throw i;return r},async incrementBeatsCreated(l){const{data:n}=await Pe.from("profiles").select("total_beats_created").eq("id",l).single();n&&await Pe.from("profiles").update({total_beats_created:(n.total_beats_created||0)+1,updated_at:new Date().toISOString()}).eq("id",l)},async incrementTutorialsCompleted(l){const{data:n}=await Pe.from("profiles").select("total_tutorials_completed").eq("id",l).single();n&&await Pe.from("profiles").update({total_tutorials_completed:(n.total_tutorials_completed||0)+1,updated_at:new Date().toISOString()}).eq("id",l)}},Kd=[{id:"first_beat",name:"First Beat",description:"Create your first beat",icon:"",xp:50,category:"beginner"},{id:"first_play",name:"Press Play",description:"Play a beat for the first time",icon:"",xp:25,category:"beginner"},{id:"first_tutorial",name:"Student",description:"Complete your first tutorial",icon:"",xp:100,category:"beginner"},{id:"first_level",name:"Level Up!",description:"Complete your first level",icon:"",xp:75,category:"beginner"},{id:"level_5",name:"Rising Rhythm",description:"Complete 5 levels",icon:"",xp:200,category:"level"},{id:"level_all",name:"Level Master",description:"Complete all 10 levels",icon:"",xp:1e3,category:"level"},{id:"perfect_level",name:"Flawless",description:"Get 3 stars on any level",icon:"",xp:150,category:"level"},{id:"beat_creator_10",name:"Beat Creator",description:"Create 10 beats",icon:"",xp:200,category:"creation"},{id:"beat_creator_50",name:"Beat Master",description:"Create 50 beats",icon:"",xp:500,category:"creation"},{id:"beat_creator_100",name:"Prolific Producer",description:"Create 100 beats",icon:"",xp:1e3,category:"creation"},{id:"tutorial_5",name:"Quick Learner",description:"Complete 5 tutorials",icon:"",xp:250,category:"tutorial"},{id:"tutorial_all",name:"Master Student",description:"Complete all tutorials",icon:"",xp:1e3,category:"tutorial"},{id:"perfect_score",name:"Perfectionist",description:"Get 100% accuracy on a tutorial",icon:"",xp:300,category:"score"},{id:"score_1000",name:"Thousand Club",description:"Reach 1,000 total score",icon:"",xp:200,category:"score"},{id:"score_10000",name:"Score Champion",description:"Reach 10,000 total score",icon:"",xp:500,category:"score"},{id:"score_100000",name:"Rhythm Legend",description:"Reach 100,000 total score",icon:"",xp:2e3,category:"score"},{id:"use_all_instruments",name:"Full Orchestra",description:"Use all 12 instruments in a single beat",icon:"",xp:400,category:"instrument"},{id:"drum_master",name:"Drum Master",description:"Create 20 beats using only drums",icon:"",xp:300,category:"instrument"},{id:"synth_wizard",name:"Synth Wizard",description:"Create 20 beats using synth",icon:"",xp:300,category:"instrument"},{id:"speed_demon",name:"Speed Demon",description:"Create a beat at 180+ BPM",icon:"",xp:200,category:"tempo"},{id:"slow_groove",name:"Slow Groove",description:"Create a beat at 60 BPM or slower",icon:"",xp:150,category:"tempo"},{id:"genre_explorer",name:"Genre Explorer",description:"Complete tutorials from 5 different genres",icon:"",xp:500,category:"genre"},{id:"genre_master",name:"Genre Master",description:"Get 100% on tutorials from all genres",icon:"",xp:1500,category:"genre"},{id:"top_100",name:"Rising Star",description:"Reach top 100 on the global leaderboard",icon:"",xp:500,category:"social"},{id:"top_10",name:"Elite Performer",description:"Reach top 10 on the global leaderboard",icon:"",xp:1e3,category:"social"},{id:"top_1",name:"Rhythm Champion",description:"Reach #1 on the global leaderboard",icon:"",xp:2e3,category:"social"},{id:"streak_7",name:"Week Warrior",description:"Play for 7 days in a row",icon:"",xp:300,category:"streak"},{id:"streak_30",name:"Month Master",description:"Play for 30 days in a row",icon:"",xp:1e3,category:"streak"},{id:"night_owl",name:"Night Owl",description:"Create a beat after midnight",icon:"",xp:100,category:"special"},{id:"early_bird",name:"Early Bird",description:"Create a beat before 6 AM",icon:"",xp:100,category:"special"},{id:"dj_debut",name:"DJ Debut",description:"Use DJ Mode for the first time",icon:"",xp:150,category:"special"}],Dd={async getUserAchievements(l){const{data:n,error:r}=await Pe.from("user_achievements").select("*").eq("user_id",l);if(r)throw r;return n||[]},async unlockAchievement(l,n){const{data:r}=await Pe.from("user_achievements").select("id").eq("user_id",l).eq("achievement_id",n).single();if(r)return null;const i=Kd.find(b=>b.id===n);if(!i)return null;const{data:d,error:h}=await Pe.from("user_achievements").insert({user_id:l,achievement_id:n,unlocked_at:new Date().toISOString()}).select().single();if(h)throw h;const{data:f}=await Pe.from("profiles").select("experience_points, level").eq("id",l).single();if(f){const b=(f.experience_points||0)+i.xp,p=Math.floor(b/1e3)+1,y=mi.getRankTitle(p);await Pe.from("profiles").update({experience_points:b,level:p,rank_title:y,updated_at:new Date().toISOString()}).eq("id",l)}return{achievement:i,data:d}},async checkAchievements(l,n){const r=[],i=await this.getUserAchievements(l),d=new Set(i.map(b=>b.achievement_id)),h=async(b,p)=>{if(!d.has(b)&&p)try{const y=await this.unlockAchievement(l,b);y&&y.achievement&&r.push(y.achievement)}catch(y){console.log("Failed to unlock achievement:",b,y)}};await h("first_beat",n.totalBeatsCreated>=1),await h("first_play",n.hasPlayed),await h("first_tutorial",n.tutorialsCompleted>=1),await h("first_level",n.levelsCompleted>=1),await h("level_5",n.levelsCompleted>=5),await h("level_all",n.levelsCompleted>=10),await h("perfect_level",n.threeStarLevels>=1),await h("beat_creator_10",n.totalBeatsCreated>=10),await h("beat_creator_50",n.totalBeatsCreated>=50),await h("beat_creator_100",n.totalBeatsCreated>=100),await h("tutorial_5",n.tutorialsCompleted>=5),await h("tutorial_all",n.tutorialsCompleted>=10),await h("perfect_score",n.accuracy===100),await h("score_1000",n.totalScore>=1e3),await h("score_10000",n.totalScore>=1e4),await h("score_100000",n.totalScore>=1e5),await h("use_all_instruments",n.instrumentsUsed>=12),await h("speed_demon",n.tempo>=180),await h("slow_groove",n.tempo<=60);const f=new Date().getHours();return await h("night_owl",f>=0&&f<5),await h("early_bird",f>=4&&f<6),await h("dj_debut",n.usedDJMode),n.leaderboardRank&&(await h("top_100",n.leaderboardRank<=100),await h("top_10",n.leaderboardRank<=10),await h("top_1",n.leaderboardRank===1)),r},getAchievementProgress(l,n){switch(l){case"beat_creator_10":return{current:n.totalBeatsCreated,target:10};case"beat_creator_50":return{current:n.totalBeatsCreated,target:50};case"beat_creator_100":return{current:n.totalBeatsCreated,target:100};case"tutorial_5":return{current:n.tutorialsCompleted,target:5};case"tutorial_all":return{current:n.tutorialsCompleted,target:10};case"score_1000":return{current:n.totalScore,target:1e3};case"score_10000":return{current:n.totalScore,target:1e4};case"score_100000":return{current:n.totalScore,target:1e5};case"streak_7":return{current:n.currentStreak,target:7};case"streak_30":return{current:n.currentStreak,target:30};default:return null}}},Md={async saveBeat(l,n){const{data:r,error:i}=await Pe.from("saved_beats").insert({user_id:l,name:n.name,grid:n.grid,tempo:n.tempo,instruments:n.activeInstrumentIds,instrument_config:n.instrumentConfig,is_public:n.isPublic||!1,created_at:new Date().toISOString()}).select().single();if(i)throw i;return r},async getUserBeats(l){const{data:n,error:r}=await Pe.from("saved_beats").select("*").eq("user_id",l).order("created_at",{ascending:!1});if(r)throw r;return n},async getPublicBeats(l=50){const{data:n,error:r}=await Pe.from("saved_beats").select(`
        *,
        profiles (
          username
        )
      `).eq("is_public",!0).order("created_at",{ascending:!1}).limit(l);if(r)throw r;return n},async deleteBeat(l,n){const{error:r}=await Pe.from("saved_beats").delete().eq("id",l).eq("user_id",n);if(r)throw r}},Gn=`
  @keyframes rain { 0% { transform: translateY(-100%); } 100% { transform: translateY(100vh); } }
  @keyframes float { 0% { transform: translateX(0px); } 50% { transform: translateX(20px); } 100% { transform: translateX(0px); } }
  @keyframes wiggle { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
  @keyframes bounce-in { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
  @keyframes hit-pulse { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,255,255,0.7); } 100% { transform: scale(1.5); box-shadow: 0 0 20px 20px rgba(255,255,255,0); opacity: 0; } }
  @keyframes guide-pulse { 0% { opacity: 0.4; transform: scale(0.95); box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.7); } 50% { opacity: 1; transform: scale(1); box-shadow: 0 0 10px 2px rgba(250, 204, 21, 0.5); } 100% { opacity: 0.4; transform: scale(0.95); box-shadow: 0 0 0 0 rgba(250, 204, 21, 0); } }
  
  /* Mobile Optimizations */
  * { -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
  html, body { overscroll-behavior: none; }
  
  /* Prevent pull-to-refresh on mobile */
  body { overflow: hidden; position: fixed; width: 100%; height: 100%; }
  
  /* Better touch targets */
  @media (max-width: 768px) {
    .mobile-step { min-width: 28px; min-height: 40px; }
    .mobile-instrument-btn { min-height: 48px; }
    .mobile-controls { flex-wrap: wrap; gap: 8px; }
    
    /* Larger touch targets for mobile */
    button { min-height: 44px; min-width: 44px; }
    
    /* Seek bar mobile optimization */
    .seek-bar-touch { min-height: 48px; }
  }
  
  /* Line clamp for text truncation */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Safe area support for notched devices */
  @supports (padding: max(0px)) {
    .safe-area-top { padding-top: max(env(safe-area-inset-top), 16px); }
    .safe-area-bottom { padding-bottom: max(env(safe-area-inset-bottom), 16px); }
  }
  
  /* Pixel Futuristic Animations */
  @keyframes pixel-wave { 
    0% { transform: scaleY(0.3); } 
    50% { transform: scaleY(1); } 
    100% { transform: scaleY(0.3); } 
  }
  @keyframes pixel-scroll { 
    0% { transform: translateY(0); } 
    100% { transform: translateY(-50%); } 
  }
  @keyframes pixel-glow { 
    0%, 100% { opacity: 0.3; filter: brightness(1); } 
    50% { opacity: 1; filter: brightness(1.5); } 
  }
  @keyframes note-float { 
    0% { transform: translateY(100vh) rotate(0deg); opacity: 0; } 
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(-100px) rotate(360deg); opacity: 0; } 
  }
  @keyframes grid-pulse {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.3; }
  }
  @keyframes scanline {
    0% { top: -10%; }
    100% { top: 110%; }
  }
  
  .pixel-font { 
    font-family: 'Courier New', monospace; 
    image-rendering: pixelated;
  }
  
  .perspective-container { perspective: 1000px; overflow: hidden; }
  .highway { transform-style: preserve-3d; transform: rotateX(50deg) scaleY(1.5); transform-origin: 50% 100%; }
  
  .animate-rain { animation: rain 1s linear infinite; }
  .animate-float { animation: float 6s ease-in-out infinite; }
  .animate-bounce-in { animation: bounce-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
  .hit-effect { animation: hit-pulse 0.2s ease-out forwards; }
  .animate-guide-target { animation: guide-pulse 1s infinite; }
  
  /* Raining Notes Animation */
  @keyframes note-rain {
    0% { transform: translateY(-50px) rotate(0deg); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 0.8; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
  }
  
  /* Bass Shake Effect */
  @keyframes bass-shake {
    0%, 100% { transform: translateX(0) translateY(0); }
    10% { transform: translateX(-2px) translateY(1px); }
    20% { transform: translateX(2px) translateY(-1px); }
    30% { transform: translateX(-1px) translateY(2px); }
    40% { transform: translateX(1px) translateY(-2px); }
    50% { transform: translateX(-2px) translateY(1px); }
    60% { transform: translateX(2px) translateY(-1px); }
    70% { transform: translateX(-1px) translateY(1px); }
    80% { transform: translateX(1px) translateY(-1px); }
    90% { transform: translateX(-1px) translateY(0); }
  }
  
  .bass-shake {
    animation: bass-shake 0.15s ease-in-out;
  }
  
  /* DJ Mode Turntable Spin */
  @keyframes spin-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  .animate-spin-slow {
    animation: spin-slow 2s linear infinite;
  }
  
  /* Custom Scrollbar */
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: #1e293b; }
  ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
  
  /* Accessibility: High Contrast Mode */
  .high-contrast { filter: contrast(1.4) saturate(1.2); }
  .high-contrast button, .high-contrast [role="button"] { border: 3px solid white !important; }
  .high-contrast:focus, .high-contrast *:focus { outline: 4px solid yellow !important; outline-offset: 2px !important; }
  
  /* Accessibility: Focus Indicators */
  *:focus-visible { outline: 3px solid #fbbf24 !important; outline-offset: 2px; }
  button:focus-visible, [role="button"]:focus-visible { transform: scale(1.05); box-shadow: 0 0 20px rgba(251, 191, 36, 0.6); }
  
  /* Accessibility: Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
  }
  
  /* Accessibility: Large Text Mode */
  .large-text { font-size: 125% !important; }
  .large-text button, .large-text [role="button"] { font-size: 1.25em !important; padding: 1em 1.5em !important; }
  
  /* Skip to main content link */
  .skip-link { position: absolute; top: -100px; left: 50%; transform: translateX(-50%); background: #fbbf24; color: black; padding: 12px 24px; border-radius: 8px; font-weight: bold; z-index: 9999; }
  .skip-link:focus { top: 10px; }
`,Xd=[{id:"ocean",name:"Ocean",primary:"from-sky-400 to-blue-500",bgColors:["#0f172a","#172554","#0f172a"],gridColor:"rgba(56, 189, 248, 0.3)",noteColors:["#38bdf8","#0ea5e9","#06b6d4","#22d3ee","#67e8f9","#0284c7","#0369a1"],scanlineColor:"#22d3ee",eqColors:["#06b6d4","#3b82f6","#0ea5e9"]},{id:"sunset",name:"Sunset",primary:"from-pink-400 to-rose-500",bgColors:["#0f172a","#4c0519","#0f172a"],gridColor:"rgba(244, 63, 94, 0.3)",noteColors:["#fb7185","#f43f5e","#e11d48","#ff6b6b","#fda4af","#ec4899","#f472b6"],scanlineColor:"#fb7185",eqColors:["#ec4899","#f43f5e","#ef4444"]},{id:"golden",name:"Golden",primary:"from-amber-400 to-orange-500",bgColors:["#0f172a","#451a03","#0f172a"],gridColor:"rgba(251, 191, 36, 0.3)",noteColors:["#fbbf24","#f59e0b","#d97706","#fcd34d","#fde68a","#ea580c","#fb923c"],scanlineColor:"#fbbf24",eqColors:["#eab308","#f59e0b","#f97316"]},{id:"forest",name:"Forest",primary:"from-emerald-400 to-green-500",bgColors:["#0f172a","#022c22","#0f172a"],gridColor:"rgba(52, 211, 153, 0.3)",noteColors:["#34d399","#10b981","#059669","#6ee7b7","#a7f3d0","#14b8a6","#2dd4bf"],scanlineColor:"#34d399",eqColors:["#22c55e","#10b981","#14b8a6"]},{id:"neon",name:"Neon",primary:"from-violet-400 to-purple-500",bgColors:["#0f172a","#3b0764","#0f172a"],gridColor:"rgba(139, 92, 246, 0.3)",noteColors:["#ff00ff","#00ffff","#ffff00","#ff6b6b","#4ecdc4","#a855f7","#ec4899"],scanlineColor:"#a855f7",eqColors:["#06b6d4","#a855f7","#ec4899"]},{id:"midnight",name:"Midnight",primary:"from-slate-400 to-slate-500",bgColors:["#020617","#0f172a","#020617"],gridColor:"rgba(100, 116, 139, 0.3)",noteColors:["#94a3b8","#64748b","#475569","#cbd5e1","#e2e8f0","#334155","#1e293b"],scanlineColor:"#94a3b8",eqColors:["#64748b","#475569","#334155"]}],Fr=({theme:l=Xd[4]})=>{const n=["","","","",""];return o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${l.bgColors[0]} 0%, ${l.bgColors[1]} 50%, ${l.bgColors[2]} 100%)`}}),o.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
          linear-gradient(${l.gridColor} 1px, transparent 1px),
          linear-gradient(90deg, ${l.gridColor} 1px, transparent 1px)
        `,backgroundSize:"20px 20px",animation:"grid-pulse 4s ease-in-out infinite"}}),o.jsx("div",{className:"absolute left-0 right-0 h-1",style:{background:`linear-gradient(to bottom, transparent, ${l.scanlineColor}50, transparent)`,animation:"scanline 3s linear infinite"}}),[...Array(15)].map((r,i)=>o.jsx("div",{className:"absolute text-2xl md:text-4xl",style:{left:`${Math.random()*100}%`,color:l.noteColors[i%l.noteColors.length],animation:`note-float ${8+Math.random()*8}s linear infinite`,animationDelay:`${Math.random()*10}s`,filter:"drop-shadow(0 0 10px currentColor)",imageRendering:"pixelated"},children:n[i%n.length]},`note-${i}`)),o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 flex gap-1 opacity-60",children:[...Array(8)].map((r,i)=>o.jsx("div",{className:"w-2 rounded-sm origin-bottom",style:{height:`${40+Math.random()*60}px`,background:`linear-gradient(to top, ${l.eqColors[0]}, ${l.eqColors[1]}, ${l.eqColors[2]})`,animation:`pixel-wave ${.5+Math.random()*.5}s ease-in-out infinite`,animationDelay:`${i*.1}s`,imageRendering:"pixelated"}},`eq-left-${i}`))}),o.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex gap-1 opacity-60",children:[...Array(8)].map((r,i)=>o.jsx("div",{className:"w-2 rounded-sm origin-bottom",style:{height:`${40+Math.random()*60}px`,background:`linear-gradient(to top, ${l.eqColors[2]}, ${l.eqColors[1]}, ${l.eqColors[0]})`,animation:`pixel-wave ${.5+Math.random()*.5}s ease-in-out infinite`,animationDelay:`${i*.1}s`,imageRendering:"pixelated"}},`eq-right-${i}`))}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-20 flex items-end justify-center gap-[2px] opacity-40",children:[...Array(60)].map((r,i)=>o.jsx("div",{className:"w-1 rounded-t-sm origin-bottom",style:{height:`${10+Math.sin(i*.3)*30+Math.random()*20}px`,background:`linear-gradient(to top, ${l.eqColors[0]}, ${l.eqColors[2]})`,animation:`pixel-wave ${.8+Math.random()*.4}s ease-in-out infinite`,animationDelay:`${i*.05}s`,imageRendering:"pixelated"}},`wave-${i}`))}),[...Array(6)].map((r,i)=>o.jsx("div",{className:"absolute rounded-sm",style:{width:`${8+Math.random()*12}px`,height:`${8+Math.random()*12}px`,left:`${10+Math.random()*80}%`,top:`${10+Math.random()*80}%`,background:l.noteColors[i%l.noteColors.length],boxShadow:`0 0 ${20+Math.random()*20}px ${l.noteColors[i%l.noteColors.length]}`,animation:`pixel-glow ${2+Math.random()*2}s ease-in-out infinite`,animationDelay:`${Math.random()*2}s`,imageRendering:"pixelated"}},`orb-${i}`)),o.jsx("div",{className:"absolute top-10 left-10 text-4xl opacity-30",style:{color:l.noteColors[0],imageRendering:"pixelated"},children:""}),o.jsx("div",{className:"absolute top-20 right-20 text-3xl opacity-20 animate-pulse",style:{color:l.noteColors[1],imageRendering:"pixelated"},children:""}),o.jsx("div",{className:"absolute bottom-32 left-20 text-3xl opacity-25",style:{color:l.noteColors[2],imageRendering:"pixelated",animation:"float 4s ease-in-out infinite"},children:""}),o.jsx("div",{className:"absolute bottom-40 right-10 text-4xl opacity-20 animate-bounce",style:{color:l.noteColors[3],imageRendering:"pixelated"},children:""}),o.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 m-4",style:{borderLeft:`4px solid ${l.eqColors[0]}80`,borderTop:`4px solid ${l.eqColors[0]}80`}}),o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 m-4",style:{borderRight:`4px solid ${l.eqColors[2]}80`,borderTop:`4px solid ${l.eqColors[2]}80`}}),o.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 m-4",style:{borderLeft:`4px solid ${l.eqColors[2]}80`,borderBottom:`4px solid ${l.eqColors[2]}80`}}),o.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 m-4",style:{borderRight:`4px solid ${l.eqColors[0]}80`,borderBottom:`4px solid ${l.eqColors[0]}80`}})]})},we={Play:()=>o.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:o.jsx("path",{d:"M8 5v14l11-7z"})}),Stop:()=>o.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:o.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),Home:()=>o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Close:()=>o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),ChevronRight:()=>o.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})}),ChevronLeft:()=>o.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})}),Star:()=>o.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),Trophy:()=>o.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:[o.jsx("path",{d:"M20.2 6.5C20.2 6.5 19 3 12 3S3.8 6.5 3.8 6.5C2.6 6.9 2 8 2.2 9.3c.4 2.1 2.2 6.3 5.4 8.2 1 .6 2.3 1.2 4.4 1.2s3.4-.6 4.4-1.2c3.2-1.9 5-6.1 5.4-8.2.2-1.3-.4-2.4-1.6-2.8zm-8.2 9c-1.3 0-2.4-.4-3.3-1.1-1.8-1.4-2.6-3.8-2.5-4.4.1-.7 1.2-3.5 5.8-3.5s5.7 2.8 5.8 3.5c.2.6-.7 3-2.5 4.4-.9.7-2 1.1-3.3 1.1z"}),o.jsx("path",{d:"M12 17c-3 0-5 1.5-5 3v2h10v-2c0-1.5-2-3-5-3z"})]}),Trash:()=>o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Minus:()=>o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Plus:()=>o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),GradCap:()=>o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),o.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Wand:()=>o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M15 4V2"}),o.jsx("path",{d:"M15 16l-4-4"}),o.jsx("path",{d:"M11 2l-7 7a2.121 2.121 0 0 0 3 3L17 5a2.121 2.121 0 0 0-3-3z"}),o.jsx("path",{d:"M19 12v2"}),o.jsx("path",{d:"M19 19h2"}),o.jsx("path",{d:"M12 19h2"})]}),Sliders:()=>o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),o.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),o.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),o.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),o.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),o.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),o.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),o.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})},Ud=({children:l,onClick:n,className:r="",variant:i="primary",disabled:d=!1,size:h="md"})=>{const f={sm:"px-3 py-1 text-sm rounded-xl",md:"px-6 py-3 rounded-2xl text-lg",lg:"px-8 py-4 rounded-3xl text-xl"},b={primary:"bg-indigo-500 hover:bg-indigo-400 text-white border-b-8 border-indigo-700 active:border-b-0 active:translate-y-2",secondary:"bg-white hover:bg-slate-100 text-slate-700 border-b-8 border-slate-300 active:border-b-0 active:translate-y-2",success:"bg-green-500 hover:bg-green-400 text-white border-b-8 border-green-700 active:border-b-0 active:translate-y-2",danger:"bg-red-500 hover:bg-red-400 text-white border-b-8 border-red-700 active:border-b-0 active:translate-y-2",locked:"bg-slate-300 text-slate-500 border-b-8 border-slate-400 cursor-not-allowed"};return o.jsx("button",{onClick:d?null:n,className:`font-black uppercase tracking-wide transition-all shadow-xl flex items-center justify-center gap-3 ${f[h]} ${b[d?"locked":i]} ${r}`,children:l})},yy=({instKey:l,config:n,onChange:r,onClose:i})=>(Zd.useEffect(()=>{const d=h=>{h.key==="Escape"&&i()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[i]),o.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/70 backdrop-blur-sm p-4 pt-16 pb-24",onClick:i,children:o.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-sm max-h-[calc(100vh-10rem)] flex flex-col animate-bounce-in text-white relative",onClick:d=>d.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center p-4 pb-3 border-b border-slate-700 shrink-0",children:[o.jsxs("h3",{className:"font-black text-lg uppercase tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:[l," Lab"]}),o.jsx("button",{onClick:i,className:"w-8 h-8 bg-slate-800 hover:bg-red-500 text-slate-400 hover:text-white rounded-lg flex items-center justify-center transition-all border border-slate-700 hover:border-red-500",children:o.jsx(we.Close,{})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-xl border border-slate-700/50",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Mute"}),o.jsx("button",{onClick:()=>r("muted",!n.muted),className:`w-12 h-6 rounded-full transition-all duration-200 ${n.muted?"bg-red-500":"bg-green-500"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transition-all ${n.muted?"translate-x-6":"translate-x-0.5"}`})})]}),n.muted&&o.jsx("p",{className:"text-xs text-red-400 mt-2 font-bold",children:"This instrument is muted"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Volume"}),o.jsxs("span",{className:"text-xs font-bold text-green-400",children:[n.volume||100,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:n.volume||100,onChange:d=>r("volume",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-green-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block",children:" Chord Type"}),o.jsx("div",{className:"flex gap-2",children:["none","maj","min"].map(d=>o.jsx("button",{onClick:()=>r("chord",d==="none"?null:d),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all 
                ${n.chord===d||d==="none"&&!n.chord?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/30":"bg-slate-800 text-slate-400 hover:bg-slate-700 border border-slate-700"}`,children:d==="none"?"Single":d},d))})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Pitch Shift"}),o.jsxs("span",{className:"text-xs font-bold text-indigo-400",children:[(n.pitch||0)>0?"+":"",n.pitch||0," st"]})]}),o.jsx("input",{type:"range",min:"-12",max:"12",value:n.pitch||0,onChange:d=>r("pitch",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Attack"}),o.jsxs("span",{className:"text-xs font-bold text-orange-400",children:[n.attack||0,"ms"]})]}),o.jsx("input",{type:"range",min:"0",max:"500",value:n.attack||0,onChange:d=>r("attack",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-orange-500"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Decay"}),o.jsxs("span",{className:"text-xs font-bold text-amber-400",children:[n.decay||100,"ms"]})]}),o.jsx("input",{type:"range",min:"50",max:"2000",value:n.decay||100,onChange:d=>r("decay",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-amber-500"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Filter"}),o.jsxs("span",{className:"text-xs font-bold text-cyan-400",children:[n.filter||100,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:n.filter||100,onChange:d=>r("filter",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Reverb"}),o.jsxs("span",{className:"text-xs font-bold text-purple-400",children:[n.reverb||0,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:n.reverb||0,onChange:d=>r("reverb",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Distortion"}),o.jsxs("span",{className:"text-xs font-bold text-red-400",children:[n.distortion||0,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:n.distortion||0,onChange:d=>r("distortion",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-red-500"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Pan"}),o.jsx("span",{className:"text-xs font-bold text-blue-400",children:(n.pan||0)===0?"Center":(n.pan||0)<0?`Left ${Math.abs(n.pan||0)}`:`Right ${n.pan||0}`})]}),o.jsx("input",{type:"range",min:"-50",max:"50",value:n.pan||0,onChange:d=>r("pan",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:" Bend"}),o.jsxs("span",{className:"text-xs font-bold text-pink-400",children:[n.bend||0,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:n.bend||0,onChange:d=>r("bend",parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-pink-500"})]})]}),o.jsx("div",{className:"shrink-0 p-4 pt-3 border-t border-slate-700 bg-slate-900",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{r("volume",100),r("pitch",0),r("chord",null),r("bend",0),r("attack",0),r("decay",100),r("filter",100),r("reverb",0),r("distortion",0),r("pan",0),r("muted",!1)},className:"flex-1 py-2.5 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs font-bold text-slate-300 transition-all border border-slate-700",children:"Reset"}),o.jsx("button",{onClick:i,className:"flex-1 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-400 hover:to-purple-400 rounded-lg text-xs font-bold text-white transition-all shadow-lg shadow-indigo-500/20",children:"Done"})]})})]})})),oc=[{id:"welcome",title:" Welcome to Rhythm Realm!",content:"Let's learn how to create amazing beats! This quick tutorial will show you everything you need to know.",target:null,position:"center",action:"next"},{id:"grid-intro",title:" The Beat Grid",content:"This is your beat grid! Each row is a different instrument (Kick, Snare, HiHat, etc). Each column is a point in time. Click any cell to add a sound!",target:"grid",position:"top",action:"next"},{id:"click-cell",title:" Try Clicking a Cell!",content:"Click on any empty cell in the grid to add a beat. The cell will light up and you'll hear the sound!",target:"grid",position:"top",action:"click-grid",highlight:"grid"},{id:"play-button",title:" Play Your Beat",content:"Press the PLAY button (or hit SPACEBAR) to hear your creation! The playhead will move across the grid showing which sounds play.",target:"play-button",position:"top",action:"next",highlight:"play-button"},{id:"tempo",title:" Tempo Control",content:"Use the tempo controls to speed up or slow down your beat. BPM means 'Beats Per Minute' - higher = faster!",target:"tempo",position:"top",action:"next",highlight:"tempo"},{id:"add-instrument",title:" Adding Instruments",content:"Click the + button at the bottom of the instrument list to add new instruments like Tom, FX, Keys, or Synth!",target:"add-track",position:"right",action:"next",highlight:"add-track"},{id:"sound-variant",title:" Change Instrument Sounds",content:"Click on an instrument's icon (the colored circle) to cycle through different sound variations. Each instrument has 4 unique sounds!",target:"instrument-icon",position:"right",action:"next",highlight:"instrument-icon"},{id:"soundlab-intro",title:" The Sound Lab",content:"Click the  button next to any instrument to open the SOUND LAB. Here you can customize volume, pitch, effects, and more!",target:"soundlab-button",position:"right",action:"next",highlight:"soundlab-button"},{id:"soundlab-features",title:" Sound Lab Features",content:"In Sound Lab you can adjust: Volume , Pitch , Attack , Decay , Filter , Reverb , Distortion , Pan , and Bend ",target:null,position:"center",action:"next"},{id:"complete",title:" You're Ready!",content:"You now know the basics! Experiment with different patterns, try the genre tutorials, or just have fun creating your own beats!",target:null,position:"center",action:"finish"}],vy=({step:l,onNext:n,onSkip:r,onFinish:i})=>{const d=oc[l];if(!d)return null;const h=d.position==="center";return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-[100] pointer-events-none",children:o.jsx("div",{className:"absolute inset-0 bg-black/70 pointer-events-auto",onClick:d.action==="next"||d.action==="finish"?void 0:f=>f.stopPropagation(),children:d.highlight&&o.jsx("div",{className:`absolute animate-pulse-ring ${d.highlight==="grid"?"top-24 left-52 right-4 bottom-32":d.highlight==="play-button"?"bottom-4 left-1/2 -translate-x-1/2 w-20 h-20":d.highlight==="tempo"?"bottom-4 right-4 w-32 h-16":d.highlight==="add-track"?"top-1/2 left-4 w-12 h-12":d.highlight==="instrument-icon"?"top-32 left-4 w-12 h-12":d.highlight==="soundlab-button"?"top-32 left-32 w-10 h-10":""}`,children:o.jsx("div",{className:"absolute inset-0 border-4 border-cyan-400 rounded-2xl animate-pulse"})})})}),o.jsx("div",{className:`fixed z-[101] ${h?"inset-0 flex items-center justify-center p-4":d.position==="top"?"top-20 left-1/2 -translate-x-1/2":d.position==="right"?"top-1/3 left-64":d.position==="bottom"?"bottom-24 left-1/2 -translate-x-1/2":""}`,children:o.jsxs("div",{className:`bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-cyan-500/50 rounded-3xl shadow-2xl shadow-cyan-500/20 ${h?"w-full max-w-md":"w-80"} animate-bounce-in`,children:[o.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[o.jsx("h3",{className:"font-black text-lg text-white",children:d.title}),o.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white text-sm font-bold px-3 py-1 rounded-lg hover:bg-slate-700 transition-all",children:"Skip"})]}),o.jsx("div",{className:"p-5",children:o.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:d.content})}),o.jsxs("div",{className:"p-4 pt-0 flex items-center justify-between",children:[o.jsx("div",{className:"flex gap-1",children:oc.map((f,b)=>o.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${b===l?"bg-cyan-400 w-6":b<l?"bg-cyan-400/50":"bg-slate-600"}`},b))}),d.action==="next"&&o.jsx("button",{onClick:n,className:"px-5 py-2.5 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-400 hover:to-blue-400 rounded-xl text-white font-bold text-sm transition-all shadow-lg shadow-cyan-500/30",children:"Next "}),d.action==="click-grid"&&o.jsx("div",{className:"px-4 py-2 bg-amber-500/20 border border-amber-500/50 rounded-xl text-amber-400 font-bold text-xs animate-pulse",children:" Click any cell in the grid!"}),d.action==="finish"&&o.jsx("button",{onClick:i,className:"px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-400 hover:to-emerald-400 rounded-xl text-white font-bold text-sm transition-all shadow-lg shadow-green-500/30",children:" Start Creating!"})]})]})})]})},Ge=32,Pm=[{id:"kick",name:"Kick",color:"bg-red-400",shadow:"shadow-red-400/50"},{id:"snare",name:"Snare",color:"bg-yellow-400",shadow:"shadow-yellow-400/50"},{id:"hihat",name:"HiHat",color:"bg-cyan-400",shadow:"shadow-cyan-400/50"},{id:"bass",name:"Bass",color:"bg-purple-400",shadow:"shadow-purple-400/50"},{id:"synth",name:"Synth",color:"bg-pink-400",shadow:"shadow-pink-400/50"},{id:"tom",name:"Tom",color:"bg-indigo-400",shadow:"shadow-indigo-400/50"},{id:"perc",name:"Perc",color:"bg-orange-400",shadow:"shadow-orange-400/50"},{id:"fx",name:"FX",color:"bg-slate-400",shadow:"shadow-slate-400/50"},{id:"keys",name:"Keys",color:"bg-teal-400",shadow:"shadow-teal-400/50"},{id:"vox",name:"Vox",color:"bg-fuchsia-400",shadow:"shadow-fuchsia-400/50"},{id:"lead",name:"Lead",color:"bg-blue-500",shadow:"shadow-blue-500/50"},{id:"orch",name:"Orch",color:"bg-amber-600",shadow:"shadow-amber-600/50"}],Rt={kick:[{name:"808 Boom",icon:"",type:"kick808",freq:55,duration:.8,decay:.5},{name:"Punchy",icon:"",type:"kickPunch",freq:150,duration:.3,decay:.2},{name:"Sub Drop",icon:"",type:"kickSub",freq:40,duration:1,decay:.8},{name:"Acoustic",icon:"",type:"kickAcoustic",freq:80,duration:.4,decay:.3}],snare:[{name:"Crack",icon:"",type:"snareCrack",freq:200,duration:.2,noise:.8},{name:"Clap",icon:"",type:"clap",freq:300,duration:.15,noise:.9},{name:"Rim",icon:"",type:"rim",freq:800,duration:.05,noise:.3},{name:"Trap",icon:"",type:"snareTrap",freq:180,duration:.3,noise:.7}],hihat:[{name:"Closed",icon:"",type:"hihatClosed",freq:8e3,duration:.05,noise:1},{name:"Open",icon:"",type:"hihatOpen",freq:6e3,duration:.3,noise:.9},{name:"Pedal",icon:"",type:"hihatPedal",freq:4e3,duration:.1,noise:.7},{name:"Shaker",icon:"",type:"shaker",freq:1e4,duration:.08,noise:1}],tom:[{name:"Floor",icon:"",type:"tomLow",freq:80,duration:.5,decay:.4},{name:"Mid",icon:"",type:"tomMid",freq:150,duration:.4,decay:.3},{name:"High",icon:"",type:"tomHigh",freq:250,duration:.3,decay:.2},{name:"Taiko",icon:"",type:"taiko",freq:60,duration:.8,decay:.6}],perc:[{name:"Conga",icon:"",type:"conga",freq:200,duration:.3,decay:.2},{name:"Bongo",icon:"",type:"bongo",freq:350,duration:.15,decay:.1},{name:"Cowbell",icon:"",type:"cowbell",freq:800,duration:.2,decay:.15},{name:"Woodblock",icon:"",type:"woodblock",freq:1200,duration:.05,decay:.03}],bass:[{name:"Sub Bass",icon:"",type:"bassSub",freq:55,duration:.5,decay:.4},{name:"Synth",icon:"",type:"bassSynth",freq:82,duration:.3,decay:.25},{name:"Pluck",icon:"",type:"bassPluck",freq:110,duration:.2,decay:.15},{name:"Wobble",icon:"",type:"bassWobble",freq:65,duration:.6,decay:.5}],synth:[{name:"Pad",icon:"",type:"synthPad",freq:440,duration:1,decay:.8},{name:"Pluck",icon:"",type:"synthPluck",freq:523,duration:.2,decay:.15},{name:"Stab",icon:"",type:"synthStab",freq:392,duration:.15,decay:.1},{name:"Arp",icon:"",type:"synthArp",freq:659,duration:.1,decay:.08}],fx:[{name:"Riser",icon:"",type:"fxRiser",freq:200,duration:1.5,decay:1.2},{name:"Impact",icon:"",type:"fxImpact",freq:100,duration:.8,decay:.6},{name:"Laser",icon:"",type:"fxLaser",freq:1500,duration:.3,decay:.2},{name:"Zap",icon:"",type:"fxZap",freq:800,duration:.15,decay:.1}],keys:[{name:"Piano",icon:"",type:"keysPiano",freq:523,duration:.8,decay:.6},{name:"Rhodes",icon:"",type:"keysRhodes",freq:440,duration:1,decay:.8},{name:"Organ",icon:"",type:"keysOrgan",freq:392,duration:.5,decay:.4},{name:"Bells",icon:"",type:"keysBells",freq:880,duration:1.2,decay:1}],vox:[{name:"Ooh",icon:"",type:"voxOoh",freq:400,duration:.5,decay:.4},{name:"Aah",icon:"",type:"voxAah",freq:500,duration:.6,decay:.5},{name:"Hey",icon:"",type:"voxHey",freq:350,duration:.2,decay:.15},{name:"Choir",icon:"",type:"voxChoir",freq:440,duration:1,decay:.8}],lead:[{name:"Saw",icon:"",type:"leadSaw",freq:659,duration:.4,decay:.3},{name:"Square",icon:"",type:"leadSquare",freq:523,duration:.35,decay:.25},{name:"Pluck",icon:"",type:"leadPluck",freq:784,duration:.15,decay:.1},{name:"Screech",icon:"",type:"leadScreech",freq:1046,duration:.5,decay:.4}],orch:[{name:"Strings",icon:"",type:"orchStrings",freq:294,duration:1,decay:.8},{name:"Brass",icon:"",type:"orchBrass",freq:349,duration:.4,decay:.3},{name:"Timpani",icon:"",type:"orchTimpani",freq:73,duration:.8,decay:.6},{name:"Harp",icon:"",type:"orchHarp",freq:523,duration:.6,decay:.5}]},wy=[{name:"Rock n Roll ",desc:"Classic rock beat - Kick on 1 & 3, Snare on 2 & 4",pattern:{kick:[0,8,16,24],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,8,16,24]}},{name:"Hip Hop ",desc:"Boom bap with swing and groove",pattern:{kick:[0,7,10,16,23,26],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,7,16,23]}},{name:"House ",desc:"Four on the floor - classic club beat",pattern:{kick:[0,4,8,12,16,20,24,28],snare:[4,12,20,28],hihat:[2,6,10,14,18,22,26,30],bass:[0,6,8,14,16,22,24,30]}},{name:"Trap ",desc:"Hard-hitting 808s with rapid hi-hats",pattern:{kick:[0,6,14,16,22,30],snare:[4,12,20,28],hihat:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],bass:[0,6,14,16,22,30]}},{name:"Reggaeton ",desc:"Dembow rhythm - infectious Latin groove",pattern:{kick:[0,6,8,14,16,22,24,30],snare:[3,7,11,15,19,23,27,31],hihat:[0,4,8,12,16,20,24,28],perc:[2,6,10,14,18,22,26,30]}},{name:"Drum & Bass ",desc:"Fast breakbeat with rolling bass",pattern:{kick:[0,10,16,26],snare:[4,12,14,20,28,30],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,3,6,10,16,19,22,26]}},{name:"Disco Funk ",desc:"Groovy funk beat with offbeat bass",pattern:{kick:[0,4,8,12,16,20,24,28],snare:[4,12,20,28],hihat:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],bass:[2,6,10,14,18,22,26,30]}},{name:"Lo-Fi Chill ",desc:"Relaxed beat for studying",pattern:{kick:[0,10,16,26],snare:[4,20],hihat:[0,4,8,12,16,20,24,28],keys:[0,8,16,24]}},{name:"Afrobeat ",desc:"West African polyrhythmic groove",pattern:{kick:[0,6,10,16,22,26],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],perc:[0,3,6,9,12,16,19,22,25,28]}},{name:"Techno ",desc:"Hypnotic industrial rhythm",pattern:{kick:[0,4,8,12,16,20,24,28],snare:[8,24],hihat:[2,6,10,14,18,22,26,30],synth:[0,8,16,24]}},{name:"Bossa Nova ",desc:"Brazilian jazz rhythm",pattern:{kick:[0,10,16,26],snare:[6,14,22,30],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,6,10,16,22,26]}},{name:"Dubstep ",desc:"Heavy drops with wobble bass",pattern:{kick:[0,14,16,30],snare:[8,24],hihat:[0,4,8,12,16,20,24,28],bass:[0,2,4,6,14,16,18,20,22,30]}}],sc={id:-1,name:"Free Play ",bpm:100,desc:"Create anything you want!",locked:!1,theme:"from-violet-500 to-fuchsia-500",bgClass:"bg-gradient-to-br from-violet-900 to-fuchsia-900",ambience:"studio",renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-br from-violet-900 via-purple-900 to-fuchsia-900 rounded-b-3xl",children:[o.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-br from-pink-500/40 to-purple-500/40 rounded-full blur-2xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-10 right-10 w-40 h-40 bg-gradient-to-br from-blue-500/30 to-cyan-500/30 rounded-full blur-2xl animate-pulse",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-24 h-24 bg-gradient-to-br from-yellow-400/50 to-orange-500/50 rounded-full blur-xl",style:{transform:`translate(-50%, -50%) scale(${1+l*.3})`}}),o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[[...Array(8)].map((r,i)=>o.jsx("div",{className:"absolute w-full h-px bg-white",style:{top:`${(i+1)*12.5}%`}},i)),[...Array(8)].map((r,i)=>o.jsx("div",{className:"absolute h-full w-px bg-white",style:{left:`${(i+1)*12.5}%`}},i))]}),o.jsx("div",{className:"absolute top-1/4 left-1/4 text-4xl opacity-60",style:{transform:`translateY(${Math.sin(Date.now()/500)*10}px)`},children:""}),o.jsx("div",{className:"absolute top-1/3 right-1/4 text-3xl opacity-50",style:{transform:`translateY(${Math.sin(Date.now()/600+1)*8}px)`},children:""}),o.jsx("div",{className:"absolute bottom-1/4 left-1/3 text-3xl opacity-40",style:{transform:`translateY(${Math.sin(Date.now()/700+2)*12}px)`},children:""}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-end gap-1",children:[...Array(7)].map((r,i)=>o.jsx("div",{className:"w-3 bg-gradient-to-t from-pink-500 to-cyan-400 rounded-full transition-all duration-75",style:{height:`${20+l*40+Math.sin(Date.now()/200+i)*15}px`,opacity:.7+l*.3}},i))}),o.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-white/30 font-black text-lg tracking-widest",children:"FREE PLAY"})]})},Bd=[{id:0,name:"Sunny Vibes ",bpm:112,desc:"Bright, happy, and uplifting atmosphere",locked:!1,theme:"from-yellow-400 to-orange-400",bgClass:"bg-sky-200",ambience:"beach",tutorial:[{text:"Welcome!  Let's make a HAPPY beat! The KICK drum is the heartbeat - add kicks on beats 1, 3, 5, 7 plus a funky pickup!",targetInstrument:"kick",targetSteps:[0,8,14,16,24,30],soundVariant:1},{text:"Awesome!  SNARE/CLAP on the backbeat (2, 4, 6, 8) - this groove makes everyone dance!",targetInstrument:"snare",targetSteps:[4,12,20,28],soundVariant:1},{text:" HI-HATS create the groove! 8th notes with an open hat accent for brightness!",targetInstrument:"hihat",targetSteps:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],soundVariant:0},{text:" BASS adds the groove! Syncopated pattern that locks with the kick!",targetInstrument:"bass",targetSteps:[0,6,8,14,16,22,24,30],soundVariant:1},{text:" SYNTH adds chord stabs! Off-beat hits create that pop bounce!",targetInstrument:"synth",targetSteps:[2,6,10,18,22,26],soundVariant:1},{text:" PERCUSSION with shaker fills the gaps! Creates continuous movement!",targetInstrument:"perc",targetSteps:[1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31],soundVariant:1},{text:" PERFECT! You made a full POP beat with 6 instruments! Hit PLAY! ",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,8,14,16,24,30],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,6,8,14,16,22,24,30],synth:[2,6,10,18,22,26],perc:[1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-sky-400 to-sky-200 rounded-b-3xl",children:[o.jsx("div",{className:"absolute bottom-0 w-full h-24 bg-gradient-to-t from-green-400 to-green-300 rounded-t-[50%]"}),o.jsx("div",{className:"absolute top-8 right-12 w-20 h-20 bg-yellow-300 rounded-full shadow-[0_0_60px_rgba(253,224,71,0.8)]",style:{transform:`scale(${1+l*.1})`}}),o.jsx("div",{className:"absolute top-16 left-16 w-28 h-10 bg-white/70 rounded-full blur-md"}),o.jsx("div",{className:"absolute top-24 left-32 w-20 h-8 bg-white/50 rounded-full blur-md"}),o.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 text-5xl",style:{transform:`translateX(-50%) scale(${1+l*.2})`},children:""})]})},{id:1,name:"Chill Night ",bpm:75,desc:"Relaxed, lo-fi, late night mood",locked:!1,theme:"from-slate-600 to-indigo-800",bgClass:"bg-slate-900",ambience:"rain",tutorial:[{text:" Lo-Fi Tutorial! SLOWER tempo (75 BPM) with a SWUNG feel. Kicks on 1 and the 'and' of 2!",targetInstrument:"kick",targetSteps:[0,5,16,21],soundVariant:2},{text:"Lo-Fi snares are LAZY  Ghost notes make it human! Main hits on 2 & 6 with soft flams!",targetInstrument:"snare",targetSteps:[4,7,20,23],soundVariant:2},{text:"Gentle hi-hats  Swung 8ths with ghost notes create that dusty vinyl feel!",targetInstrument:"hihat",targetSteps:[0,3,4,7,8,11,12,15,16,19,20,23,24,27,28,31],soundVariant:2},{text:" RHODES KEYS are the soul! 7th chords on 1 and 5 with passing tones!",targetInstrument:"keys",targetSteps:[0,6,16,22],soundVariant:1},{text:" Mellow BASS walks through chord tones - jazzy and warm!",targetInstrument:"bass",targetSteps:[0,5,8,12,16,21,24,28],soundVariant:2},{text:" SYNTH PAD breathes in and out - long sustained atmosphere!",targetInstrument:"synth",targetSteps:[0,16],soundVariant:0},{text:" Beautiful! 6 layers of chill! The magic is in the SPACE between notes. PLAY! ",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,5,16,21],snare:[4,7,20,23],hihat:[0,3,4,7,8,11,12,15,16,19,20,23,24,27,28,31],keys:[0,6,16,22],bass:[0,5,8,12,16,21,24,28],synth:[0,16]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-indigo-900 to-slate-900 rounded-b-3xl",children:[o.jsx("div",{className:"absolute top-8 right-16 w-16 h-16 bg-slate-200 rounded-full opacity-90 shadow-[0_0_40px_rgba(255,255,255,0.3)]"}),[...Array(30)].map((r,i)=>o.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full opacity-60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*60}%`}},i)),[...Array(20)].map((r,i)=>o.jsx("div",{className:"absolute w-0.5 bg-blue-400/40 animate-rain",style:{height:`${Math.random()*20+10}%`,left:`${Math.random()*100}%`,top:"-10%",animationDuration:`${Math.random()*.8+.4}s`,animationDelay:`${Math.random()*2}s`}},i)),o.jsx("div",{className:"absolute bottom-0 w-full h-16 bg-slate-800/80"}),o.jsx("div",{className:"absolute bottom-12 left-1/2 -translate-x-1/2 text-4xl",style:{transform:`translateX(-50%) translateY(${l*-5}px)`},children:""})]})},{id:2,name:"Neon City ",bpm:126,desc:"Electronic, urban, energetic beats",locked:!1,theme:"from-pink-500 to-purple-600",bgClass:"bg-purple-950",ambience:"city",tutorial:[{text:" HOUSE MUSIC! Four-on-the-floor with a tasteful ghost kick for groove!",targetInstrument:"kick",targetSteps:[0,4,8,11,12,16,20,24,27,28],soundVariant:1},{text:" Clap on 2 and 4 with a pickup clap! Classic house with extra bounce!",targetInstrument:"snare",targetSteps:[4,12,15,20,28,31],soundVariant:1},{text:" OFFBEAT open hi-hats! The signature house bounce between kicks!",targetInstrument:"hihat",targetSteps:[2,6,10,14,18,22,26,30],soundVariant:1},{text:" Piano STABS with that disco/house chord rhythm! Off-beat magic!",targetInstrument:"synth",targetSteps:[2,5,10,13,18,21,26,29],soundVariant:2},{text:" Pumping BASS with 16th note rhythm - the dance floor driver!",targetInstrument:"bass",targetSteps:[0,3,4,8,11,12,16,19,20,24,27,28],soundVariant:1},{text:" FX RISER builds anticipation for the drop!",targetInstrument:"fx",targetSteps:[0],soundVariant:0},{text:" 6 layers of HOUSE! This is EDM, Disco, and Club music! DROP IT! ",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,4,8,11,12,16,20,24,27,28],snare:[4,12,15,20,28,31],hihat:[2,6,10,14,18,22,26,30],synth:[2,5,10,13,18,21,26,29],bass:[0,3,4,8,11,12,16,19,20,24,27,28],fx:[0]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-purple-900 to-slate-900 rounded-b-3xl",children:[o.jsx("div",{className:"absolute bottom-0 w-full h-32 bg-slate-900"}),[...Array(8)].map((r,i)=>o.jsx("div",{className:"absolute bottom-0",style:{left:`${i*14+5}%`,height:`${40+Math.random()*40}%`,width:"8%"},children:o.jsx("div",{className:"w-full h-full bg-slate-800 relative",children:[...Array(6)].map((d,h)=>o.jsx("div",{className:"absolute w-2 h-2 bg-yellow-300/80",style:{left:`${20+Math.random()*60}%`,top:`${10+h*15}%`,opacity:Math.random()>.3?1:.3}},h))})},i)),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-4xl",style:{transform:`translate(-50%, -50%) scale(${1+l*.3})`,filter:`drop-shadow(0 0 ${10+l*20}px #f0abfc)`},children:""}),o.jsx("div",{className:"absolute bottom-4 left-0 right-0 h-1 bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 opacity-80",style:{transform:`scaleX(${.5+l*.5})`}})]})},{id:3,name:"Desert Sunset ",bpm:98,desc:"Warm, groovy, world music vibes",locked:!1,theme:"from-orange-500 to-red-500",bgClass:"bg-orange-900",ambience:"desert",tutorial:[{text:" AFROBEAT groove! The '3-2 clave' kick pattern - syncopated magic that makes you MOVE!",targetInstrument:"kick",targetSteps:[0,6,12,16,20,26],soundVariant:3},{text:" Cross-stick snare on 2 & 4 plus ghost notes - tight and funky!",targetInstrument:"snare",targetSteps:[4,7,12,20,23,28],soundVariant:0},{text:" SHAKER drives the groove with 16th notes - constant flowing energy!",targetInstrument:"hihat",targetSteps:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],soundVariant:3},{text:" CONGA plays the TUMBA pattern! Traditional 6/8 polyrhythm over 4/4!",targetInstrument:"perc",targetSteps:[0,3,6,10,12,15,16,19,22,26,28,31],soundVariant:0},{text:" BASS locks with the kick - dancehall-style bounce pattern!",targetInstrument:"bass",targetSteps:[0,6,10,12,16,20,26,28],soundVariant:2},{text:" KEYS play jazzy maj7 chords - that sunny Afro-Cuban color!",targetInstrument:"keys",targetSteps:[0,3,8,16,19,24],soundVariant:2},{text:" 6 instruments with POLYRHYTHM! Heart of African & Latin music! PLAY! ",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,6,12,16,20,26],snare:[4,7,12,20,23,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],perc:[0,3,6,10,12,15,16,19,22,26,28,31],bass:[0,6,10,12,16,20,26,28],keys:[0,3,8,16,19,24]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-orange-400 via-red-400 to-purple-600 rounded-b-3xl",children:[o.jsx("div",{className:"absolute bottom-0 w-full h-20 bg-gradient-to-t from-amber-800 to-amber-700"}),o.jsx("div",{className:"absolute bottom-16 left-1/4 w-0 h-0 border-l-[30px] border-r-[30px] border-b-[60px] border-l-transparent border-r-transparent border-b-amber-900/60"}),o.jsx("div",{className:"absolute bottom-16 right-1/3 w-0 h-0 border-l-[20px] border-r-[20px] border-b-[40px] border-l-transparent border-r-transparent border-b-amber-900/40"}),o.jsx("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 w-24 h-24 bg-yellow-200 rounded-full opacity-90 shadow-[0_0_80px_rgba(253,224,71,0.6)]"}),o.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 text-4xl",style:{transform:`translateX(-50%) rotate(${l*10}deg)`},children:""})]})},{id:4,name:"Deep Space ",bpm:174,desc:"Cosmic, epic, cinematic sounds",locked:!1,theme:"from-indigo-600 to-violet-900",bgClass:"bg-slate-950",ambience:"space",tutorial:[{text:" DRUM & BASS! 174 BPM with the classic 'Amen break' style kick pattern!",targetInstrument:"kick",targetSteps:[0,10,14,16,26,30],soundVariant:1},{text:" D&B snares hit hard on 2 & 4 with ROLLS before the next bar!",targetInstrument:"snare",targetSteps:[4,12,13,20,28,29,30],soundVariant:0},{text:" Breakbeat hi-hat pattern - open hats for that jungle feel!",targetInstrument:"hihat",targetSteps:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],soundVariant:0},{text:" REESE BASS - the legendary D&B bass! Rolling 16ths that fill the space!",targetInstrument:"bass",targetSteps:[0,2,4,6,10,14,16,18,20,22,26,30],soundVariant:3},{text:" SYNTH PAD - cosmic atmosphere that breathes through the track!",targetInstrument:"synth",targetSteps:[0,16],soundVariant:0},{text:" FX IMPACTS mark the phrases - cinematic power!",targetInstrument:"fx",targetSteps:[0,14,16,30],soundVariant:1},{text:" 6 layers of D&B! ENERGY and SPEED! Launch into hyperspace! ",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,10,14,16,26,30],snare:[4,12,13,20,28,29,30],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,2,4,6,10,14,16,18,20,22,26,30],synth:[0,16],fx:[0,14,16,30]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-slate-900 via-indigo-950 to-violet-950 rounded-b-3xl",children:[[...Array(50)].map((r,i)=>o.jsx("div",{className:"absolute rounded-full bg-white",style:{width:`${Math.random()*3+1}px`,height:`${Math.random()*3+1}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,opacity:Math.random()*.8+.2,animation:`pulse ${Math.random()*2+1}s infinite`}},i)),o.jsx("div",{className:"absolute top-1/4 right-1/4 w-12 h-12 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full blur-sm opacity-60"}),o.jsx("div",{className:"absolute bottom-1/3 left-1/5 w-8 h-8 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full blur-sm opacity-40"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-5xl",style:{transform:`translate(-50%, -50%) scale(${1+l*.2}) rotate(${l*15}deg)`},children:""})]})},{id:5,name:"Trap Kingdom ",bpm:145,desc:"Hard-hitting trap with 808s and hi-hat rolls",locked:!1,theme:"from-red-600 to-black",bgClass:"bg-black",ambience:"trap",tutorial:[{text:" TRAP MUSIC! The 808 kick is sparse but MASSIVE! Feel that low end shake the room!",targetInstrument:"kick",targetSteps:[0,7,14,16,23,30],soundVariant:0},{text:"Trap snares hit HARD on 2 & 4!  Add extra hits for attitude!",targetInstrument:"snare",targetSteps:[4,12,15,20,28,31],soundVariant:3},{text:" HI-HAT ROLLS are trap's signature! Notice the TRIPLETS that create machine-gun energy!",targetInstrument:"hihat",targetSteps:[0,2,4,5,6,8,9,10,12,13,14,16,18,20,21,22,24,25,26,28,29,30],soundVariant:0},{text:"808 BASS = LIFE!  Long sliding notes that hit with the kick!",targetInstrument:"bass",targetSteps:[0,7,14,16,23,30],soundVariant:0},{text:"SYNTH adds dark minor chords!  Mysterious ominous atmosphere!",targetInstrument:"synth",targetSteps:[0,8,16,24],soundVariant:3},{text:" LEAD melody - the catchy hook that gets stuck in your head!",targetInstrument:"lead",targetSteps:[0,3,6,8,11,16,19,22,24,27],soundVariant:1},{text:" FX builds INTENSITY! Risers before the drop!",targetInstrument:"fx",targetSteps:[14,30],soundVariant:1},{text:" TRAP ROYALTY! 7 layers of pure fire! HIT PLAY!",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,7,14,16,23,30],snare:[4,12,15,20,28,31],hihat:[0,2,4,5,6,8,9,10,12,13,14,16,18,20,21,22,24,25,26,28,29,30],bass:[0,7,14,16,23,30],synth:[0,8,16,24],lead:[0,3,6,8,11,16,19,22,24,27],fx:[14,30]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-red-950 to-black rounded-b-3xl",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(220,38,38,0.3),transparent_70%)]"}),[...Array(20)].map((r,i)=>o.jsx("div",{className:"absolute w-1 bg-red-500/30",style:{height:`${20+Math.random()*40}%`,left:`${i*5+2}%`,bottom:0,transform:`scaleY(${.5+l*.5})`}},i)),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-6xl",style:{transform:`translate(-50%, -50%) scale(${1+l*.3})`},children:""})]})},{id:6,name:"Reggaeton ",bpm:98,desc:"Latin urban rhythm with the dembow beat",locked:!1,theme:"from-yellow-500 to-red-600",bgClass:"bg-red-900",ambience:"reggaeton",tutorial:[{text:" REGGAETON! The 'DEMBOW' beat! Kick on 1, 'and' of 2, and repeat - feel that BOUNCE!",targetInstrument:"kick",targetSteps:[0,5,8,13,16,21,24,29],soundVariant:1},{text:" The DEMBOW snare is magic! Off-beat hits create the irresistible swing!",targetInstrument:"snare",targetSteps:[3,7,11,15,19,23,27,31],soundVariant:1},{text:"Hi-hats add Latin FLAVOR!  Consistent 8ths with ghost notes!",targetInstrument:"hihat",targetSteps:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],soundVariant:0},{text:" Bass LOCKS with the kick - deep and punchy dance floor shake!",targetInstrument:"bass",targetSteps:[0,5,8,13,16,21,24,29],soundVariant:1},{text:" Congas add PERREO!  Traditional tumba meets urban heat!",targetInstrument:"perc",targetSteps:[0,3,6,8,11,14,16,19,22,24,27,30],soundVariant:0},{text:" Piano montuno pattern - that tropical Caribbean color!",targetInstrument:"keys",targetSteps:[0,3,6,8,11,16,19,22,24,27],soundVariant:3},{text:" LEAD melody - the memorable hook! Catchy synth phrase!",targetInstrument:"lead",targetSteps:[0,4,8,12,16,20,24,28],soundVariant:1},{text:" DALE! Full REGGAETON heat with 7 layers! PLAY and PERREO! ",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,5,8,13,16,21,24,29],snare:[3,7,11,15,19,23,27,31],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,5,8,13,16,21,24,29],perc:[0,3,6,8,11,14,16,19,22,24,27,30],keys:[0,3,6,8,11,16,19,22,24,27],lead:[0,4,8,12,16,20,24,28]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-yellow-500 via-orange-500 to-red-600 rounded-b-3xl",children:[[...Array(15)].map((r,i)=>o.jsx("div",{className:"absolute text-3xl",style:{left:`${Math.random()*90}%`,top:`${Math.random()*70}%`,transform:`rotate(${Math.random()*360}deg) scale(${.5+l*.3})`,opacity:.6},children:""},i)),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-6xl",style:{transform:`translate(-50%, -50%) scale(${1+l*.2})`},children:""})]})},{id:7,name:"Hip Hop Classic ",bpm:92,desc:"Old school boom bap hip hop beat",locked:!1,theme:"from-amber-600 to-stone-800",bgClass:"bg-stone-900",ambience:"hiphop",tutorial:[{text:" BOOM BAP! Classic 90s hip hop. Kick is lazy, slightly behind the beat!",targetInstrument:"kick",targetSteps:[0,5,10,16,21,26],soundVariant:1},{text:"'BAP' snare CRACKS!  Hard on 2 & 4 with ghost notes for swing!",targetInstrument:"snare",targetSteps:[4,7,12,20,23,28],soundVariant:0},{text:" Swung hi-hats are ESSENTIAL! The shuffle feel makes heads nod!",targetInstrument:"hihat",targetSteps:[0,3,4,7,8,11,12,15,16,19,20,23,24,27,28,31],soundVariant:0},{text:" Upright bass sound - jazzy walking line with chromatic fills!",targetInstrument:"bass",targetSteps:[0,5,8,10,16,21,24,26],soundVariant:2},{text:" Dusty piano chops - sampled soul feel that defines boom bap!",targetInstrument:"keys",targetSteps:[0,6,8,14,16,22,24,30],soundVariant:0},{text:" Tom fills add that classic J Dilla flavor - unexpected hits!",targetInstrument:"tom",targetSteps:[6,14,15,22,30,31],soundVariant:0},{text:" Shaker for that dusty vinyl texture - old school authenticity!",targetInstrument:"perc",targetSteps:[2,6,10,14,18,22,26,30],soundVariant:3},{text:" CLASSIC BOOM BAP! 7 layers of golden era hip hop! DROP THE BEAT!",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,5,10,16,21,26],snare:[4,7,12,20,23,28],hihat:[0,3,4,7,8,11,12,15,16,19,20,23,24,27,28,31],bass:[0,5,8,10,16,21,24,26],keys:[0,6,8,14,16,22,24,30],tom:[6,14,15,22,30,31],perc:[2,6,10,14,18,22,26,30]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-amber-800 to-stone-900 rounded-b-3xl",children:[o.jsx("div",{className:"absolute bottom-0 w-full h-20 bg-stone-950"}),o.jsx("div",{className:"absolute bottom-16 left-10 w-16 h-24 bg-stone-800 rounded-t-lg"}),o.jsx("div",{className:"absolute bottom-16 left-32 w-20 h-32 bg-stone-700 rounded-t-lg"}),o.jsx("div",{className:"absolute bottom-16 right-20 w-14 h-20 bg-stone-800 rounded-t-lg"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-6xl",style:{transform:`translate(-50%, -50%) scale(${1+l*.15})`},children:""})]})},{id:8,name:"Rock Solid ",bpm:118,desc:"Classic rock drum pattern",locked:!1,theme:"from-gray-700 to-red-900",bgClass:"bg-gray-900",ambience:"rock",tutorial:[{text:" ROCK DRUMS! Driving kick with an extra hit before beat 3 for power!",targetInstrument:"kick",targetSteps:[0,6,8,14,16,22,24,30],soundVariant:3},{text:"Rock snare CRACKS on 2 & 4!  With a pickup note for energy!",targetInstrument:"snare",targetSteps:[4,12,15,20,28,31],soundVariant:0},{text:" Ride cymbal pattern - steady 8ths with accent on the beat!",targetInstrument:"hihat",targetSteps:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],soundVariant:0},{text:" Bass guitar drives the rhythm - lock with the kick!",targetInstrument:"bass",targetSteps:[0,6,8,14,16,22,24,30],soundVariant:2},{text:" Hammond organ power chords - that classic rock sound!",targetInstrument:"keys",targetSteps:[0,8,16,24],soundVariant:2},{text:" Guitar riff lead line - memorable melodic hook!",targetInstrument:"lead",targetSteps:[0,3,6,8,11,16,19,22,24,27],soundVariant:2},{text:" Tom fills build to the next section - classic rock transition!",targetInstrument:"tom",targetSteps:[12,13,14,28,29,30,31],soundVariant:1},{text:" ROCK ON! 7 layers of pure rock power! CRANK IT UP!",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,6,8,14,16,22,24,30],snare:[4,12,15,20,28,31],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,6,8,14,16,22,24,30],keys:[0,8,16,24],lead:[0,3,6,8,11,16,19,22,24,27],tom:[12,13,14,28,29,30,31]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-gray-800 to-gray-950 rounded-b-3xl",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_100%,rgba(220,38,38,0.2),transparent_60%)]"}),[...Array(3)].map((r,i)=>o.jsx("div",{className:"absolute bottom-10 bg-yellow-500 rounded-full",style:{width:"8px",height:"8px",left:`${25+i*25}%`,boxShadow:`0 0 ${20+l*30}px ${10+l*15}px rgba(234,179,8,0.6)`}},i)),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-6xl",style:{transform:`translate(-50%, -50%) scale(${1+l*.2}) rotate(${l*5}deg)`},children:""})]})},{id:9,name:"Techno Machine ",bpm:132,desc:"Hypnotic, repetitive techno groove",locked:!1,theme:"from-cyan-600 to-gray-900",bgClass:"bg-gray-950",ambience:"techno",tutorial:[{text:" TECHNO! Relentless four-on-the-floor with ghost kicks for groove!",targetInstrument:"kick",targetSteps:[0,4,8,10,12,16,20,24,26,28],soundVariant:1},{text:" Minimal claps on 2 & 4 with a rimshot accent pattern!",targetInstrument:"snare",targetSteps:[4,12,14,20,28,30],soundVariant:1},{text:" Open hi-hats on offbeats plus 16th shaker texture!",targetInstrument:"hihat",targetSteps:[2,6,10,14,18,22,26,30],soundVariant:0},{text:" Sub bass POUNDS with the kick - feel it in your chest!",targetInstrument:"bass",targetSteps:[0,4,8,12,16,20,24,28],soundVariant:0},{text:" Pad EVOLVES slowly - building hypnotic atmosphere!",targetInstrument:"synth",targetSteps:[0,16],soundVariant:0},{text:" Acid lead sequence - the 303 pattern that defined techno!",targetInstrument:"lead",targetSteps:[0,3,4,7,8,11,12,15,16,19,20,23,24,27,28,31],soundVariant:0},{text:" FX textures add movement - risers and sweeps!",targetInstrument:"fx",targetSteps:[0,8,16,24],soundVariant:0},{text:" HYPNOTIC TECHNO! 7 layers of machine precision! ENTER THE TRANCE!",targetInstrument:null,targetSteps:[]}],beat:{kick:[0,4,8,10,12,16,20,24,26,28],snare:[4,12,14,20,28,30],hihat:[2,6,10,14,18,22,26,30],bass:[0,4,8,12,16,20,24,28],synth:[0,16],lead:[0,3,4,7,8,11,12,15,16,19,20,23,24,27,28,31],fx:[0,8,16,24]},renderScene:(l,n)=>o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-gradient-to-b from-gray-900 to-black rounded-b-3xl",children:[o.jsx("div",{className:"absolute inset-0",children:[...Array(10)].map((r,i)=>o.jsx("div",{className:"absolute left-1/2 top-1/2 border border-cyan-500/30 rounded-full",style:{width:`${(i+1)*40+l*20}px`,height:`${(i+1)*40+l*20}px`,transform:"translate(-50%, -50%)",opacity:1-i*.1}},i))}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-5xl",style:{transform:`translate(-50%, -50%) scale(${1+l*.3})`},children:""})]})}],hi=[{id:1,name:"First Beat",difficulty:"Beginner",stars:0,maxStars:3,xpReward:50,icon:"",description:"Learn the basics! Place kicks and snares to create your first beat.",objective:"Create a simple beat with KICK and SNARE",requirements:{instruments:["kick","snare"],minNotes:4,mustInclude:{kick:2,snare:2}},hints:[" Start with the KICK drum - it's the heartbeat of your music!"," Place kicks on beats 1 and 3 (steps 0, 8, 16, 24)"," Add SNARE on beats 2 and 4 (steps 4, 12, 20, 28) for the backbeat"," Hit PLAY to hear your creation!"],tempo:100,unlocked:!0},{id:2,name:"Add the Groove",difficulty:"Beginner",stars:0,maxStars:3,xpReward:75,icon:"",description:"Hi-hats add rhythm and energy. Learn to layer!",objective:"Add HI-HATS to your kick and snare pattern",requirements:{instruments:["kick","snare","hihat"],minNotes:8,mustInclude:{kick:2,snare:2,hihat:4}},hints:[" Hi-hats create the 'tick-tick-tick' rhythm!"," Try placing hi-hats on every other step for 8th notes"," The hi-hat fills the space between kick and snare"," Experiment with different patterns!"],tempo:100,unlocked:!0},{id:3,name:"Bass Drop",difficulty:"Easy",stars:0,maxStars:3,xpReward:100,icon:"",description:"Bass gives your beat weight and power!",objective:"Create a beat with KICK, SNARE, and BASS",requirements:{instruments:["kick","snare","bass"],minNotes:6,mustInclude:{kick:2,snare:2,bass:2}},hints:[" Bass usually follows the kick drum"," Try placing bass notes where your kicks are"," Add some bass notes in between for groove"," Lower sounds = more power!"],tempo:95,unlocked:!1},{id:4,name:"Four on the Floor",difficulty:"Easy",stars:0,maxStars:3,xpReward:125,icon:"",description:"Learn the classic house music pattern!",objective:"Create a house beat with kick on every beat",requirements:{instruments:["kick","snare","hihat"],minNotes:12,mustInclude:{kick:4,snare:2,hihat:4}},hints:[" 'Four on the floor' means kick on beats 1, 2, 3, 4"," Place kicks on steps 0, 8, 16, 24"," Claps/snares go on 2 and 4 (steps 8, 24)"," Hi-hats go on the OFF-beats for that house bounce!"],tempo:124,unlocked:!1},{id:5,name:"Synth Magic",difficulty:"Medium",stars:0,maxStars:3,xpReward:150,icon:"",description:"Add melody and chords with the synthesizer!",objective:"Create a beat using 4 different instruments including SYNTH",requirements:{instruments:["kick","snare","hihat","synth"],minNotes:12,mustInclude:{kick:2,snare:2,hihat:4,synth:2}},hints:[" Synth adds melody and harmony to your beat"," Try placing synth notes on off-beats"," Synth chords work well with bass lines"," Less is more - don't overcrowd!"],tempo:110,unlocked:!1},{id:6,name:"Percussion Party",difficulty:"Medium",stars:0,maxStars:3,xpReward:175,icon:"",description:"Layer percussion for complex rhythms!",objective:"Use 5 instruments including PERCUSSION",requirements:{instruments:["kick","snare","hihat","perc","bass"],minNotes:16,mustInclude:{kick:2,snare:2,hihat:4,perc:4,bass:2}},hints:[" Percussion adds texture and fills gaps"," Shakers and congas work great off the main beat"," Try polyrhythms - patterns that contrast!"," World music uses lots of percussion layers"],tempo:98,unlocked:!1},{id:7,name:"Lo-Fi Chill",difficulty:"Medium",stars:0,maxStars:3,xpReward:200,icon:"",description:"Create a relaxing lo-fi beat with keys!",objective:"Make a chill beat with KEYS and slow tempo",requirements:{instruments:["kick","snare","hihat","keys","bass"],minNotes:14,mustInclude:{kick:2,snare:2,hihat:4,keys:2,bass:2}},hints:[" Lo-fi beats are SLOW - around 70-85 BPM"," Keys add that jazzy, nostalgic feel"," Leave SPACE in your beat - silence is powerful"," Ghost notes (quiet hits) add human feel"],tempo:75,unlocked:!1},{id:8,name:"Full Production",difficulty:"Hard",stars:0,maxStars:3,xpReward:250,icon:"",description:"Use ALL instruments to create a full track!",objective:"Create a complete beat using 6+ instruments",requirements:{instruments:["kick","snare","hihat","bass","synth","keys"],minNotes:24,mustInclude:{kick:4,snare:4,hihat:8,bass:4,synth:2,keys:2}},hints:[" Build in layers - start with drums, add bass, then melody"," Make sure instruments don't clash - give each space"," The best beats have contrast - loud and quiet parts"," You're ready to be a producer!"],tempo:105,unlocked:!1},{id:9,name:"Speed Demon",difficulty:"Hard",stars:0,maxStars:3,xpReward:300,icon:"",description:"Fast tempo challenge - can you keep up?",objective:"Create a high-energy beat at 140+ BPM",requirements:{instruments:["kick","snare","hihat","bass","synth"],minNotes:20,mustInclude:{kick:4,snare:4,hihat:8,bass:2,synth:2}},hints:[" Fast tempos need simpler patterns"," Drum & Bass and Jungle run at 160-180 BPM!"," Keep the rhythm tight and punchy"," Less notes per bar at high speeds"],tempo:145,unlocked:!1},{id:10,name:"Master Beat",difficulty:"Expert",stars:0,maxStars:3,xpReward:500,icon:"",description:"The ultimate challenge - prove your mastery!",objective:"Create a complex beat with 7 instruments and 30+ notes",requirements:{instruments:["kick","snare","hihat","bass","synth","keys","perc"],minNotes:30,mustInclude:{kick:4,snare:4,hihat:8,bass:4,synth:4,keys:2,perc:4}},hints:[" This is everything you've learned combined!"," Think like a real producer - arrangement matters"," Use dynamics - vary the intensity"," You've mastered Rhythm Realm! "],tempo:115,unlocked:!1}],R={ctx:null,masterGain:null,compressor:null,analyser:null,ambienceNodes:[],init:()=>{if(!(typeof window>"u")){if(!R.ctx){const l=window.AudioContext||window.webkitAudioContext;l&&(R.ctx=new l,R.masterGain=R.ctx.createGain(),R.masterGain.gain.value=.7,R.compressor=R.ctx.createDynamicsCompressor(),R.compressor.threshold.value=-20,R.compressor.knee.value=10,R.compressor.ratio.value=4,R.compressor.attack.value=.003,R.compressor.release.value=.1,R.analyser=R.ctx.createAnalyser(),R.analyser.fftSize=256,R.masterGain.connect(R.compressor),R.compressor.connect(R.analyser),R.analyser.connect(R.ctx.destination))}R.ctx&&R.ctx.state==="suspended"&&R.ctx.resume()}},createNoise:l=>{const n=R.ctx.sampleRate*l,r=R.ctx.createBuffer(1,n,R.ctx.sampleRate),i=r.getChannelData(0);for(let d=0;d<n;d++)i[d]=Math.random()*2-1;return r},createFilteredNoise:(l,n,r,i)=>{const d=R.ctx.createBufferSource();d.buffer=R.createNoise(r);const h=R.ctx.createBiquadFilter();return h.type="bandpass",h.frequency.value=l,h.Q.value=n,d.connect(h),{source:d,output:h}},startAmbience:l=>{},stopAmbience:()=>{R.ambienceNodes.forEach(l=>{try{l.stop()}catch{}try{l.disconnect()}catch{}}),R.ambienceNodes=[]},stopAll:()=>{R.ctx&&R.ctx.suspend().then(()=>{setTimeout(()=>{R.ctx&&R.ctx.state==="suspended"&&R.ctx.resume()},50)}).catch(()=>{})},trigger:(l,n=0,r={pitch:0,chord:null,bend:0,volume:100,muted:!1,attack:0,decay:100,filter:100,reverb:0,distortion:0,pan:0})=>{if(r.muted||!R.ctx||!R.masterGain)return;const i=n||R.ctx.currentTime,d=Math.pow(2,r.pitch/12),h=l.freq*d,f=l.type||"default",b=(r.volume!==void 0?r.volume:100)/100,p=R.ctx.createGain();p.gain.value=b;const y=R.ctx.createStereoPanner();if(y.pan.value=(r.pan||0)/50,p.connect(y),y.connect(R.masterGain),f.startsWith("kick")){const v=R.ctx.createOscillator(),S=R.ctx.createGain();v.type="sine";let _=4e3,T=.5,k=.02,q=.3,K=200;f==="kick808"?(v.frequency.setValueAtTime(120,i),v.frequency.exponentialRampToValueAtTime(45,i+.12),v.frequency.exponentialRampToValueAtTime(28,i+.6),S.gain.setValueAtTime(1,i),S.gain.exponentialRampToValueAtTime(.7,i+.15),S.gain.exponentialRampToValueAtTime(.01,i+.9),_=2500,T=.3,k=.015,q=.15,K=150):f==="kickPunch"?(v.frequency.setValueAtTime(220,i),v.frequency.exponentialRampToValueAtTime(65,i+.03),v.frequency.exponentialRampToValueAtTime(45,i+.08),S.gain.setValueAtTime(1,i),S.gain.exponentialRampToValueAtTime(.2,i+.04),S.gain.exponentialRampToValueAtTime(.01,i+.18),_=6e3,T=.8,k=.008,q=.5,K=350):f==="kickSub"?(v.frequency.setValueAtTime(80,i),v.frequency.exponentialRampToValueAtTime(32,i+.15),v.frequency.exponentialRampToValueAtTime(22,i+.5),S.gain.setValueAtTime(1,i),S.gain.linearRampToValueAtTime(.8,i+.2),S.gain.exponentialRampToValueAtTime(.01,i+1.2),_=1500,T=.15,k=.02,q=.1,K=100):(v.frequency.setValueAtTime(180,i),v.frequency.exponentialRampToValueAtTime(85,i+.025),v.frequency.exponentialRampToValueAtTime(55,i+.12),S.gain.setValueAtTime(.9,i),S.gain.exponentialRampToValueAtTime(.35,i+.06),S.gain.exponentialRampToValueAtTime(.01,i+.4),_=5e3,T=.7,k=.012,q=.6,K=400);const Q=R.ctx.createOscillator(),te=R.ctx.createGain();Q.type="triangle",Q.frequency.setValueAtTime(_,i),Q.frequency.exponentialRampToValueAtTime(150,i+k),te.gain.setValueAtTime(T,i),te.gain.exponentialRampToValueAtTime(.01,i+k+.005),Q.connect(te),te.connect(p),Q.start(i),Q.stop(i+.05);const P=R.ctx.createBuffer(1,R.ctx.sampleRate*.1,R.ctx.sampleRate),he=P.getChannelData(0);for(let le=0;le<he.length;le++)he[le]=(Math.random()*2-1)*Math.exp(-le/(R.ctx.sampleRate*.015));const Re=R.ctx.createBufferSource();Re.buffer=P;const Z=R.ctx.createBiquadFilter();Z.type="lowpass",Z.frequency.value=K;const ae=R.ctx.createGain();ae.gain.setValueAtTime(q,i),ae.gain.exponentialRampToValueAtTime(.01,i+.06),Re.connect(Z),Z.connect(ae),ae.connect(p),Re.start(i),Re.stop(i+.1),v.connect(S),S.connect(p),v.start(i),v.stop(i+1.5)}else if(f.startsWith("snare")||f==="clap"||f==="rim"){const v=R.ctx.createOscillator(),S=R.ctx.createGain();if(v.type="triangle",f==="clap"){for(let _=0;_<3;_++){const T=_*.01,{source:k,output:q}=R.createFilteredNoise(2e3,1.5,.2,i+T),K=R.ctx.createGain();K.gain.setValueAtTime(.5,i+T),K.gain.exponentialRampToValueAtTime(.01,i+T+.15),q.connect(K),K.connect(p),k.start(i+T),k.stop(i+T+.2)}v.frequency.value=150,S.gain.setValueAtTime(.2,i),S.gain.exponentialRampToValueAtTime(.01,i+.05)}else if(f==="rim")v.frequency.value=h,v.type="square",S.gain.setValueAtTime(.4,i),S.gain.exponentialRampToValueAtTime(.01,i+.03);else{v.frequency.setValueAtTime(h,i),v.frequency.exponentialRampToValueAtTime(100,i+.1),S.gain.setValueAtTime(.5,i),S.gain.exponentialRampToValueAtTime(.01,i+.15);const{source:_,output:T}=R.createFilteredNoise(4e3,1,.25,i),k=R.ctx.createGain();k.gain.setValueAtTime(f==="snareTrap"?.7:.5,i),k.gain.exponentialRampToValueAtTime(.01,i+.2),T.connect(k),k.connect(p),_.start(i),_.stop(i+.3)}v.connect(S),S.connect(p),v.start(i),v.stop(i+.3)}else if(f.startsWith("hihat")||f==="shaker"){const{source:v,output:S}=R.createFilteredNoise(f==="hihatOpen"?6e3:f==="shaker"?12e3:1e4,f==="hihatClosed"?3:1.5,f==="hihatOpen"?.4:.15,i),_=R.ctx.createGain(),T=R.ctx.createBiquadFilter();T.type="highpass",T.frequency.value=f==="hihatPedal"?3e3:7e3;const k=f==="hihatOpen"?.35:f==="shaker"?.1:.06;_.gain.setValueAtTime(.25,i),_.gain.exponentialRampToValueAtTime(.01,i+k),S.connect(T),T.connect(_),_.connect(p),v.start(i),v.stop(i+k+.1)}else if(f.startsWith("tom")||f==="taiko"){const v=R.ctx.createOscillator(),S=R.ctx.createGain();v.type="sine";const _=f==="tomLow"?80:f==="tomMid"?150:f==="tomHigh"?250:60;v.frequency.setValueAtTime(_*d*1.5,i),v.frequency.exponentialRampToValueAtTime(_*d,i+.02),v.frequency.exponentialRampToValueAtTime(_*d*.7,i+.3);const T=f==="taiko"?.8:.6,k=f==="taiko"?.8:.4;S.gain.setValueAtTime(T,i),S.gain.exponentialRampToValueAtTime(.01,i+k),v.connect(S),S.connect(p),v.start(i),v.stop(i+k+.1)}else if(["conga","bongo","cowbell","woodblock"].includes(f)){const v=R.ctx.createOscillator(),S=R.ctx.createOscillator(),_=R.ctx.createGain();if(f==="cowbell")v.type="square",S.type="square",v.frequency.value=800*d,S.frequency.value=540*d,_.gain.setValueAtTime(.3,i),_.gain.exponentialRampToValueAtTime(.01,i+.2),S.connect(_),S.start(i),S.stop(i+.2);else if(f==="woodblock")v.type="sine",v.frequency.value=1200*d,_.gain.setValueAtTime(.4,i),_.gain.exponentialRampToValueAtTime(.01,i+.04);else{v.type="sine";const T=f==="conga"?200:350;v.frequency.setValueAtTime(T*d*1.3,i),v.frequency.exponentialRampToValueAtTime(T*d,i+.02),_.gain.setValueAtTime(.5,i),_.gain.exponentialRampToValueAtTime(.01,i+.2)}v.connect(_),_.connect(p),v.start(i),v.stop(i+.3)}else if(f.startsWith("bass")){const v=[h];r.chord==="maj"?v.push(h*1.2599,h*1.4983):r.chord==="min"&&v.push(h*1.1892,h*1.4983),f==="bassSub"?v.forEach(S=>{const _=R.ctx.createOscillator(),T=R.ctx.createOscillator(),k=R.ctx.createGain();_.type="sine",T.type="sine",_.frequency.value=S,T.frequency.value=S*2;const q=.7/v.length;k.gain.setValueAtTime(q,i),k.gain.exponentialRampToValueAtTime(.01,i+(l.decay||.5)),_.connect(k),T.connect(k),k.connect(p),_.start(i),T.start(i),_.stop(i+.7),T.stop(i+.7)}):v.forEach(S=>{const _=R.ctx.createOscillator(),T=R.ctx.createOscillator(),k=R.ctx.createGain(),q=R.ctx.createBiquadFilter();if(q.type="lowpass",q.frequency.value=f==="bassWobble"?400:800,q.Q.value=5,f==="bassWobble"){const Q=R.ctx.createOscillator(),te=R.ctx.createGain();Q.frequency.value=4,te.gain.value=300,Q.connect(te),te.connect(q.frequency),Q.start(i),Q.stop(i+.6)}_.type="sawtooth",T.type="sine",_.frequency.value=S,T.frequency.value=S;const K=.4/v.length;k.gain.setValueAtTime(K,i),k.gain.exponentialRampToValueAtTime(.01,i+(l.decay||.3)),_.connect(q),T.connect(k),q.connect(k),k.connect(p),_.start(i),T.start(i),_.stop(i+.6),T.stop(i+.6)})}else if(f.startsWith("synth")){const v=[h];r.chord==="maj"?v.push(h*1.2599,h*1.4983):r.chord==="min"&&v.push(h*1.1892,h*1.4983),v.forEach(S=>{const _=R.ctx.createOscillator(),T=R.ctx.createGain(),k=R.ctx.createBiquadFilter();f==="synthPad"?(_.type="sawtooth",k.type="lowpass",k.frequency.setValueAtTime(200,i),k.frequency.linearRampToValueAtTime(2e3,i+.3),k.frequency.linearRampToValueAtTime(800,i+1),T.gain.setValueAtTime(0,i),T.gain.linearRampToValueAtTime(.2/v.length,i+.1),T.gain.linearRampToValueAtTime(.01,i+1)):f==="synthPluck"?(_.type="sawtooth",k.type="lowpass",k.frequency.setValueAtTime(5e3,i),k.frequency.exponentialRampToValueAtTime(500,i+.15),T.gain.setValueAtTime(.3/v.length,i),T.gain.exponentialRampToValueAtTime(.01,i+.2)):f==="synthStab"?(_.type="square",k.type="lowpass",k.frequency.value=2e3,T.gain.setValueAtTime(.25/v.length,i),T.gain.exponentialRampToValueAtTime(.01,i+.1)):(_.type="square",k.type="lowpass",k.frequency.value=3e3,T.gain.setValueAtTime(.2/v.length,i),T.gain.exponentialRampToValueAtTime(.01,i+.08)),_.frequency.value=S,r.bend>0&&_.frequency.linearRampToValueAtTime(S*(1+r.bend/50),i+.1),_.connect(k),k.connect(T),T.connect(p),_.start(i),_.stop(i+1.2)})}else if(f.startsWith("keys")){const v=[h];r.chord==="maj"?v.push(h*1.2599,h*1.4983):r.chord==="min"&&v.push(h*1.1892,h*1.4983),v.forEach(S=>{const _=R.ctx.createOscillator(),T=R.ctx.createOscillator(),k=R.ctx.createGain();f==="keysPiano"?(_.type="triangle",T.type="sine",T.frequency.value=S*2,k.gain.setValueAtTime(.35/v.length,i),k.gain.exponentialRampToValueAtTime(.15/v.length,i+.1),k.gain.exponentialRampToValueAtTime(.01,i+.8)):f==="keysRhodes"?(_.type="sine",T.type="sine",T.frequency.value=S*3,k.gain.setValueAtTime(.25/v.length,i),k.gain.exponentialRampToValueAtTime(.01,i+1)):f==="keysOrgan"?(_.type="sine",T.type="sine",T.frequency.value=S*2,k.gain.setValueAtTime(.2/v.length,i),k.gain.setValueAtTime(.2/v.length,i+.4),k.gain.exponentialRampToValueAtTime(.01,i+.5)):(_.type="sine",T.type="sine",T.frequency.value=S*4,k.gain.setValueAtTime(.2/v.length,i),k.gain.exponentialRampToValueAtTime(.01,i+1.2)),_.frequency.value=S,_.connect(k),T.connect(k),k.connect(p),_.start(i),T.start(i),_.stop(i+1.5),T.stop(i+1.5)})}else if(f.startsWith("vox")){const v=R.ctx.createOscillator(),S=R.ctx.createGain(),_=R.ctx.createBiquadFilter(),T=R.ctx.createBiquadFilter();if(v.type="sawtooth",v.frequency.value=h,_.type="bandpass",T.type="bandpass",_.Q.value=10,T.Q.value=10,f==="voxOoh")_.frequency.value=400,T.frequency.value=800;else if(f==="voxAah")_.frequency.value=700,T.frequency.value=1200;else if(f==="voxHey")_.frequency.setValueAtTime(600,i),_.frequency.linearRampToValueAtTime(400,i+.1),T.frequency.value=2e3;else{_.frequency.value=500,T.frequency.value=1500;const k=R.ctx.createOscillator();k.type="sawtooth",k.frequency.value=h*1.005,k.connect(_),k.start(i),k.stop(i+1)}S.gain.setValueAtTime(0,i),S.gain.linearRampToValueAtTime(.25,i+.05),S.gain.linearRampToValueAtTime(.01,i+(l.decay||.5)),v.connect(_),_.connect(T),T.connect(S),S.connect(p),v.start(i),v.stop(i+1)}else if(f.startsWith("lead")){const v=[h];r.chord==="maj"?v.push(h*1.2599,h*1.4983):r.chord==="min"&&v.push(h*1.1892,h*1.4983),v.forEach(S=>{const _=R.ctx.createOscillator(),T=R.ctx.createGain(),k=R.ctx.createBiquadFilter();f==="leadSaw"?(_.type="sawtooth",k.type="lowpass",k.frequency.value=4e3):f==="leadSquare"?(_.type="square",k.type="lowpass",k.frequency.value=3e3):f==="leadPluck"?(_.type="sawtooth",k.type="lowpass",k.frequency.setValueAtTime(8e3,i),k.frequency.exponentialRampToValueAtTime(500,i+.1)):(_.type="sawtooth",k.type="lowpass",k.frequency.value=6e3,k.Q.value=5),_.frequency.value=S,r.bend>0&&_.frequency.linearRampToValueAtTime(S*(1+r.bend/30),i+.15),T.gain.setValueAtTime(.2/v.length,i),T.gain.exponentialRampToValueAtTime(.01,i+(l.decay||.3)),_.connect(k),k.connect(T),T.connect(p),_.start(i),_.stop(i+.5)})}else if(f.startsWith("orch")){const v=[h];r.chord==="maj"?v.push(h*1.2599,h*1.4983):r.chord==="min"&&v.push(h*1.1892,h*1.4983),v.forEach(S=>{const _=R.ctx.createOscillator(),T=R.ctx.createOscillator(),k=R.ctx.createGain(),q=R.ctx.createBiquadFilter();f==="orchStrings"?(_.type="sawtooth",T.type="sawtooth",T.frequency.value=S*1.003,q.type="lowpass",q.frequency.value=3e3,k.gain.setValueAtTime(0,i),k.gain.linearRampToValueAtTime(.15/v.length,i+.15),k.gain.linearRampToValueAtTime(.01,i+1)):f==="orchBrass"?(_.type="sawtooth",T.type="square",T.frequency.value=S,q.type="lowpass",q.frequency.setValueAtTime(500,i),q.frequency.linearRampToValueAtTime(3e3,i+.1),k.gain.setValueAtTime(0,i),k.gain.linearRampToValueAtTime(.25/v.length,i+.05),k.gain.exponentialRampToValueAtTime(.01,i+.4)):f==="orchTimpani"?(_.type="sine",_.frequency.setValueAtTime(S*1.5,i),_.frequency.exponentialRampToValueAtTime(S,i+.05),q.type="lowpass",q.frequency.value=500,k.gain.setValueAtTime(.6/v.length,i),k.gain.exponentialRampToValueAtTime(.01,i+.8)):(_.type="triangle",T.type="sine",T.frequency.value=S*2,q.type="lowpass",q.frequency.value=4e3,k.gain.setValueAtTime(.25/v.length,i),k.gain.exponentialRampToValueAtTime(.01,i+.6)),_.frequency.value=S,_.connect(q),T.frequency.value&&(T.connect(q),T.start(i),T.stop(i+1.2)),q.connect(k),k.connect(p),_.start(i),_.stop(i+1.2)})}else if(f.startsWith("fx")){const v=R.ctx.createOscillator(),S=R.ctx.createGain();if(f==="fxRiser")v.type="sawtooth",v.frequency.setValueAtTime(h,i),v.frequency.exponentialRampToValueAtTime(h*8,i+1.5),S.gain.setValueAtTime(.05,i),S.gain.linearRampToValueAtTime(.4,i+1.4),S.gain.exponentialRampToValueAtTime(.01,i+1.5);else if(f==="fxImpact"){v.type="sine",v.frequency.setValueAtTime(h*4,i),v.frequency.exponentialRampToValueAtTime(20,i+.5),S.gain.setValueAtTime(.8,i),S.gain.exponentialRampToValueAtTime(.01,i+.8);const{source:_,output:T}=R.createFilteredNoise(1e3,.5,.3,i),k=R.ctx.createGain();k.gain.setValueAtTime(.4,i),k.gain.exponentialRampToValueAtTime(.01,i+.3),T.connect(k),k.connect(p),_.start(i),_.stop(i+.3)}else f==="fxLaser"?(v.type="sawtooth",v.frequency.setValueAtTime(h*2,i),v.frequency.exponentialRampToValueAtTime(h/4,i+.2),S.gain.setValueAtTime(.3,i),S.gain.exponentialRampToValueAtTime(.01,i+.3)):(v.type="square",v.frequency.setValueAtTime(h/2,i),v.frequency.exponentialRampToValueAtTime(h*2,i+.05),v.frequency.exponentialRampToValueAtTime(h/2,i+.1),S.gain.setValueAtTime(.3,i),S.gain.exponentialRampToValueAtTime(.01,i+.15));v.connect(S),S.connect(p),v.start(i),v.stop(i+1.6)}else{const v=R.ctx.createOscillator(),S=R.ctx.createGain();v.type="sine",v.frequency.value=h,S.gain.setValueAtTime(.2,i),S.gain.exponentialRampToValueAtTime(.01,i+.3),v.connect(S),S.connect(p),v.start(i),v.stop(i+.4)}}};function Sy(){const[l,n]=H.useState("splash"),[r,i]=H.useState("splash"),[d,h]=H.useState("compose"),[f,b]=H.useState(!1),[p,y]=H.useState(null),[v,S]=H.useState(!1),[_,T]=H.useState(0),[k,q]=H.useState(100),[K,Q]=H.useState(0),[te,P]=H.useState(!1),[he,Re]=H.useState(0),[Z,ae]=H.useState(null),[le,Ve]=H.useState(null),[Ts,_a]=H.useState(!0),[Vt,Yt]=H.useState(!1),[Ht,Xt]=H.useState("login"),[L,ee]=H.useState(""),[fe,Be]=H.useState(""),[He,A]=H.useState(""),[I,F]=H.useState(""),[se,pe]=H.useState(!1),[Te,Me]=H.useState(!1),[Tt,it]=H.useState([]),[ks,Ns]=H.useState(!1),[As,ji]=H.useState(null),[cn,nr]=H.useState(!1),[sr,hc]=H.useState([]),[Ti,rr]=H.useState(!1),[un,lr]=H.useState(null),[nh,sh]=H.useState(!1),[Qt,rh]=H.useState(!1),[Fe,sl]=H.useState(null),[kt,fc]=H.useState(()=>{if(typeof window<"u"){const g=localStorage.getItem("rhythmRealm_levelProgress");return g?JSON.parse(g):{}}return{}}),[ir,rl]=H.useState(0),[mc,dn]=H.useState(!1),[Pt,ia]=H.useState(!1),[Zt,pc]=H.useState(0),[ki,hn]=H.useState(!1),[fn,Ft]=H.useState(()=>{let g=0,w=0;if(typeof window<"u"){const E=localStorage.getItem("rhythmRealm_levelProgress");if(E){const O=JSON.parse(E);g=Object.values(O).filter(V=>V?.completed).length,w=Object.values(O).filter(V=>V?.stars>=3).length}}return{totalBeatsCreated:0,tutorialsCompleted:0,totalScore:0,hasPlayed:!1,accuracy:0,instrumentsUsed:0,tempo:100,usedDJMode:!1,currentStreak:0,leaderboardRank:null,levelsCompleted:g,threeStarLevels:w}}),[Pa,mn]=H.useState(!0),Ja=H.useRef(null),pn=H.useRef(null),Ma=H.useRef(null),[wt,Ua]=H.useState(!1),[ct,ll]=H.useState(0),[gn,Pn]=H.useState(null),[Ni,Ai]=H.useState(!1),[Ei,gc]=H.useState(!1),[Ci,Ba]=H.useState(!1),[De,ft]=H.useState(["kick","snare","hihat","bass","synth"]),[Jn,Kn]=H.useState(!1),[lh,bc]=H.useState({}),[or,Ka]=H.useState(null),[il,ja]=H.useState(!1),[bn,Xa]=H.useState(!1),[Qa,et]=H.useState(0),[Za,Ri]=H.useState(Xd[4]),[qa,Xn]=H.useState(50),[ol,Oi]=H.useState({filter:50,echo:0,flanger:0,reverb:0}),[Je,Di]=H.useState({left:null,right:null}),[cl,ul]=H.useState({left:0,right:0}),[Fa,oa]=H.useState({left:[null,null,null,null],right:[null,null,null,null]}),[dl,hl]=H.useState({left:!1,right:!1}),[Mi,xc]=H.useState(null),[Nt,cr]=H.useState(!1),[ke,Ta]=H.useState(0),[xn,ur]=H.useState(!1),[$t,dr]=H.useState(!1),[Jt,Wa]=H.useState(!1),[Wt,hr]=H.useState(!1),[yn,Es]=H.useState(!1),[At,fr]=H.useState(!1),[en,ea]=H.useState(!1),[Qn,fl]=H.useState(""),[La,vn]=H.useState("en");H.useRef(null);const tn=H.useRef(null);H.useEffect(()=>{(async()=>{try{const E=await $n.getSession();if(console.log("Session check:",E),E?.user){ae(E.user);try{const O=await $n.getUserProfile(E.user.id);if(console.log("Profile from session:",O),O)Ve(O),Ft(V=>({...V,totalBeatsCreated:O.total_beats_created||0,tutorialsCompleted:O.total_tutorials_completed||0,totalScore:O.total_score||0,currentStreak:O.current_streak||0}));else{const V=E.user.user_metadata?.username||E.user.email?.split("@")[0]||"Player",oe={id:E.user.id,username:V,email:E.user.email,total_score:0,total_beats_created:0,level:1,rank_title:"Beginner",experience_points:0};Ve(oe)}}catch(O){console.error("Profile fetch error on mount:",O);const V=E.user.user_metadata?.username||E.user.email?.split("@")[0]||"Player";Ve({id:E.user.id,username:V,email:E.user.email,total_score:0,total_beats_created:0,level:1,rank_title:"Beginner",experience_points:0})}}}catch(E){console.error("Auth check error:",E)}finally{_a(!1)}})();const{data:{subscription:w}}=Pe.auth.onAuthStateChange(async(E,O)=>{E==="SIGNED_IN"&&O?.user?ae(V=>V?.id===O.user.id?V:O.user):E==="SIGNED_OUT"&&(ae(null),Ve(null))});return()=>w.unsubscribe()},[]);const ml=async g=>{g.preventDefault(),F(""),pe(!0);try{console.log("Attempting sign in with:",L);const w=await $n.signIn(L,fe);console.log("Sign in response:",w);const E=w?.user;if(w?.user&&!w?.session){F("Please verify your email before logging in. Check your inbox for the confirmation link."),pe(!1);return}if(!E){F("Login failed. Please check your credentials."),pe(!1);return}Yt(!1),ae(E),ee(""),Be(""),pe(!1),$n.getUserProfile(E.id).then(O=>{if(console.log("Profile fetched:",O),O)Ve(O),Ft(V=>({...V,totalBeatsCreated:O.total_beats_created||0,tutorialsCompleted:O.total_tutorials_completed||0,totalScore:O.total_score||0,currentStreak:O.current_streak||0}));else{console.log("No profile found, creating from user metadata");const V=E.user_metadata?.username||E.email?.split("@")[0]||"Player",oe={id:E.id,username:V,email:E.email,total_score:0,total_beats_created:0,level:1,rank_title:"Beginner",experience_points:0};Ve(oe),$n.createUserProfile(E.id,V,E.email).catch(ge=>console.log("Profile creation error (may already exist):",ge))}}).catch(O=>{console.error("Profile fetch error:",O);const V=E.user_metadata?.username||E.email?.split("@")[0]||"Player";Ve({id:E.id,username:V,email:E.email,total_score:0,total_beats_created:0,level:1,rank_title:"Beginner",experience_points:0})})}catch(w){console.error("Sign in error:",w),F(w.message||"Login failed. Please try again."),pe(!1)}},Ui=async g=>{g.preventDefault(),F(""),pe(!0);try{if(He.length<3)throw new Error("Username must be at least 3 characters");await $n.signUp(L,fe,He),Yt(!1),ee(""),Be(""),A(""),alert("Registration successful! Please check your email to verify your account.")}catch(w){F(w.message)}finally{pe(!1)}},wn=async(g=!1)=>{if(window.confirm("Are you sure you want to logout?"))try{S(!1),R.stopAll(),await $n.signOut(),ae(null),Ve(null),g&&hn(!1)}catch(w){console.error("Logout error:",w)}},za=async()=>{Ns(!0);try{const g=await mi.getGlobalLeaderboard(100);if(it(g),Z&&g){const w=g.findIndex(E=>E.id===Z.id)+1;w>0&&(ji(w),Ft(E=>({...E,leaderboardRank:w})))}}catch(g){console.error("Leaderboard error:",g)}finally{Ns(!1)}},pl=async()=>{if(Z){rr(!0);try{const g=await Dd.getUserAchievements(Z.id);hc(g)}catch(g){console.error("Achievements error:",g)}finally{rr(!1)}}},Cs=()=>{if(R.ctx||R.init(),!!R.ctx)try{const g=R.ctx,w=g.currentTime,E=g.createOscillator(),O=g.createOscillator(),V=g.createGain();E.type="sine",O.type="sine",E.frequency.setValueAtTime(523.25,w),E.frequency.setValueAtTime(659.25,w+.15),E.frequency.setValueAtTime(783.99,w+.3),O.frequency.setValueAtTime(783.99,w),O.frequency.setValueAtTime(987.77,w+.15),O.frequency.setValueAtTime(1046.5,w+.3),V.gain.setValueAtTime(.3,w),V.gain.linearRampToValueAtTime(.01,w+.6),E.connect(V),O.connect(V),V.connect(g.destination),E.start(w),O.start(w),E.stop(w+.6),O.stop(w+.6)}catch(g){console.log("Achievement sound error:",g)}},ca=async()=>{if(Z)try{console.log("Checking achievements with stats:",fn);const g=await Dd.checkAchievements(Z.id,fn);if(console.log("Unlocked achievements:",g),g&&g.length>0){for(let w=0;w<g.length;w++)setTimeout(()=>{Cs(),lr(g[w]),setTimeout(()=>lr(null),4e3)},w*4500);setTimeout(async()=>{const w=await $n.getUserProfile(Z.id);Ve(w)},g.length*4500)}}catch(g){console.error("Achievement check error:",g)}},gl=()=>{fn.hasPlayed||(Ft(g=>({...g,hasPlayed:!0,instrumentsUsed:De.length,tempo:k})),setTimeout(()=>ca(),1e3))},mr=async(g,w,E)=>{if(Z)try{const O=Math.round(E*10);await mi.saveScore(Z.id,g,w,O,E,k,De),await mi.incrementTutorialsCompleted(Z.id),Ft(oe=>({...oe,tutorialsCompleted:oe.tutorialsCompleted+1,totalScore:oe.totalScore+O,accuracy:E})),await ca();const V=await $n.getUserProfile(Z.id);Ve(V)}catch(O){console.error("Save score error:",O)}},Bi=async()=>{if(Z)try{await mi.incrementBeatsCreated(Z.id),Ft(g=>({...g,totalBeatsCreated:g.totalBeatsCreated+1})),await ca()}catch(g){console.error("Increment beats error:",g)}},Zn={en:{code:"en-US",name:"English",flag:"US"},es:{code:"es-ES",name:"Espaol",flag:"ES"},fr:{code:"fr-FR",name:"Franais",flag:"FR"},de:{code:"de-DE",name:"Deutsch",flag:"DE"},it:{code:"it-IT",name:"Italiano",flag:"IT"},pt:{code:"pt-BR",name:"Portugus",flag:"BR"},ja:{code:"ja-JP",name:"",flag:"JP"},ko:{code:"ko-KR",name:"",flag:"KR"},zh:{code:"zh-CN",name:"",flag:"CN"},tl:{code:"fil-PH",name:"Tagalog",flag:"PH"},hi:{code:"hi-IN",name:"Hindi",flag:"IN"},ar:{code:"ar-SA",name:"Arabic",flag:"SA"}},Rs={en:{appTitle:"RHYTHM REALM",createBeat:"Create Your Beat",letsPlay:"Let's Play!",modes:"Modes",settings:"Settings",freePlay:"Free Play",freePlayDesc:"Create your own beats with no limits!",tutorial:"Tutorial",tutorialDesc:"Learn different moods & styles!",beatLibrary:"Beat Library",beatLibraryDesc:"Explore example beats from different genres!",djMode:"DJ Mode",djModeDesc:"Live performance mode! Mix beats in real-time.",accessibility:"Accessibility",textToSpeech:"Text-to-Speech",textToSpeechDesc:"Hover or focus to hear descriptions",highContrast:"High Contrast",highContrastDesc:"Increase color contrast for visibility",largeText:"Large Text",largeTextDesc:"Increase text and button sizes",keyboardNav:"Keyboard Navigation",keyboardNavDesc:"Enhanced Tab key navigation",voiceControl:"Voice Control",voiceControlDesc:"Hands-free! Control app with your voice",language:"Language",languageDesc:"Change app language",play:"Play",stop:"Stop",tempo:"Tempo",volume:"Volume",back:"Back",home:"Home",masterVolume:"Master Volume",backgroundMusic:"Background Music",visualThemes:"Visual Themes",about:"About",enableAll:"Enable All Accessibility Features",allEnabled:"All Features Enabled"},es:{appTitle:"REINO DEL RITMO",createBeat:"Crea Tu Ritmo",letsPlay:"A jugar!",modes:"Modos",settings:"Ajustes",freePlay:"Juego Libre",freePlayDesc:"Crea tus propios ritmos sin lmites!",tutorial:"Tutorial",tutorialDesc:"Aprende diferentes estilos y estados de nimo!",beatLibrary:"Biblioteca de Ritmos",beatLibraryDesc:"Explora ritmos de diferentes gneros!",djMode:"Modo DJ",djModeDesc:"Modo de actuacin en vivo! Mezcla ritmos en tiempo real.",accessibility:"Accesibilidad",textToSpeech:"Texto a Voz",textToSpeechDesc:"Pasa el cursor para escuchar descripciones",highContrast:"Alto Contraste",highContrastDesc:"Aumenta el contraste de colores",largeText:"Texto Grande",largeTextDesc:"Aumenta el tamao del texto y botones",keyboardNav:"Navegacin por Teclado",keyboardNavDesc:"Navegacin mejorada con Tab",voiceControl:"Control por Voz",voiceControlDesc:"Manos libres! Controla la app con tu voz",language:"Idioma",languageDesc:"Cambiar idioma de la app",play:"Reproducir",stop:"Parar",tempo:"Tempo",volume:"Volumen",back:"Atrs",home:"Inicio",masterVolume:"Volumen Principal",backgroundMusic:"Msica de Fondo",visualThemes:"Temas Visuales",about:"Acerca de",enableAll:"Activar Todas las Funciones de Accesibilidad",allEnabled:"Todas las Funciones Activadas"},fr:{appTitle:"ROYAUME DU RYTHME",createBeat:"Crez Votre Rythme",letsPlay:"Jouons!",modes:"Modes",settings:"Paramtres",freePlay:"Jeu Libre",freePlayDesc:"Crez vos propres rythmes sans limites!",tutorial:"Tutoriel",tutorialDesc:"Apprenez diffrents styles et ambiances!",beatLibrary:"Bibliothque de Rythmes",beatLibraryDesc:"Explorez des rythmes de diffrents genres!",djMode:"Mode DJ",djModeDesc:"Mode performance live! Mixez en temps rel.",accessibility:"Accessibilit",textToSpeech:"Synthse Vocale",textToSpeechDesc:"Survolez pour entendre les descriptions",highContrast:"Contraste lev",highContrastDesc:"Augmenter le contraste des couleurs",largeText:"Grand Texte",largeTextDesc:"Augmenter la taille du texte et des boutons",keyboardNav:"Navigation Clavier",keyboardNavDesc:"Navigation amliore avec Tab",voiceControl:"Contrle Vocal",voiceControlDesc:"Mains libres! Contrlez l'app avec votre voix",language:"Langue",languageDesc:"Changer la langue de l'app",play:"Jouer",stop:"Arrter",tempo:"Tempo",volume:"Volume",back:"Retour",home:"Accueil",masterVolume:"Volume Principal",backgroundMusic:"Musique de Fond",visualThemes:"Thmes Visuels",about:" Propos",enableAll:"Activer Toutes les Fonctions d'Accessibilit",allEnabled:"Toutes les Fonctions Actives"},tl:{appTitle:"KAHARIAN NG RITMO",createBeat:"Gumawa ng Iyong Ritmo",letsPlay:"Maglaro Tayo!",modes:"Mga Mode",settings:"Mga Setting",freePlay:"Libreng Paglalaro",freePlayDesc:"Gumawa ng sariling ritmo nang walang limitasyon!",tutorial:"Tutorial",tutorialDesc:"Matuto ng iba't ibang istilo at mood!",beatLibrary:"Aklatan ng Ritmo",beatLibraryDesc:"Tuklasin ang mga ritmo mula sa iba't ibang genre!",djMode:"DJ Mode",djModeDesc:"Live na performance! I-mix ang mga ritmo sa real-time.",accessibility:"Accessibility",textToSpeech:"Text-to-Speech",textToSpeechDesc:"Mag-hover para marinig ang mga paglalarawan",highContrast:"Mataas na Contrast",highContrastDesc:"Dagdagan ang contrast ng kulay",largeText:"Malaking Text",largeTextDesc:"Palakihin ang text at mga button",keyboardNav:"Keyboard Navigation",keyboardNavDesc:"Pinabuting Tab key navigation",voiceControl:"Voice Control",voiceControlDesc:"Hands-free! Kontrolin ang app gamit ang boses",language:"Wika",languageDesc:"Baguhin ang wika ng app",play:"I-play",stop:"Ihinto",tempo:"Tempo",volume:"Volume",back:"Bumalik",home:"Home",masterVolume:"Master Volume",backgroundMusic:"Background Music",visualThemes:"Visual Themes",about:"Tungkol Sa",enableAll:"I-enable Lahat ng Accessibility Features",allEnabled:"Lahat ng Features ay Enabled"},ja:{appTitle:"",createBeat:"",letsPlay:"",modes:"",settings:"",freePlay:"",freePlayDesc:"",tutorial:"",tutorialDesc:"",beatLibrary:"",beatLibraryDesc:"",djMode:"DJ",djModeDesc:"",accessibility:"",textToSpeech:"",textToSpeechDesc:"",highContrast:"",highContrastDesc:"",largeText:"",largeTextDesc:"",keyboardNav:"",keyboardNavDesc:"Tab",voiceControl:"",voiceControlDesc:"",language:"",languageDesc:"",play:"",stop:"",tempo:"",volume:"",back:"",home:"",masterVolume:"",backgroundMusic:"BGM",visualThemes:"",about:"",enableAll:"",allEnabled:""},ko:{appTitle:" ",createBeat:" ",letsPlay:"!",modes:"",settings:"",freePlay:" ",freePlayDesc:"    !",tutorial:"",tutorialDesc:"   !",beatLibrary:" ",beatLibraryDesc:"   !",djMode:"DJ ",djModeDesc:" !  .",accessibility:"",textToSpeech:" ",textToSpeechDesc:"    ",highContrast:"",highContrastDesc:"  ",largeText:" ",largeTextDesc:"   ",keyboardNav:" ",keyboardNavDesc:"Tab   ",voiceControl:" ",voiceControlDesc:"!   ",language:"",languageDesc:"  ",play:"",stop:"",tempo:"",volume:"",back:"",home:"",masterVolume:" ",backgroundMusic:" ",visualThemes:" ",about:" ",enableAll:"   ",allEnabled:"  "},zh:{appTitle:"",createBeat:"",letsPlay:"",modes:"",settings:"",freePlay:"",freePlayDesc:"",tutorial:"",tutorialDesc:"",beatLibrary:"",beatLibraryDesc:"",djMode:"DJ",djModeDesc:"",accessibility:"",textToSpeech:"",textToSpeechDesc:"",highContrast:"",highContrastDesc:"",largeText:"",largeTextDesc:"",keyboardNav:"",keyboardNavDesc:"Tab",voiceControl:"",voiceControlDesc:"",language:"",languageDesc:"",play:"",stop:"",tempo:"",volume:"",back:"",home:"",masterVolume:"",backgroundMusic:"",visualThemes:"",about:"",enableAll:"",allEnabled:""},de:{appTitle:"RHYTHMUS REICH",createBeat:"Erstelle Deinen Beat",letsPlay:"Los Geht's!",modes:"Modi",settings:"Einstellungen",freePlay:"Freies Spiel",freePlayDesc:"Erstelle deine eigenen Beats ohne Grenzen!",tutorial:"Tutorial",tutorialDesc:"Lerne verschiedene Stile und Stimmungen!",beatLibrary:"Beat-Bibliothek",beatLibraryDesc:"Entdecke Beats aus verschiedenen Genres!",djMode:"DJ-Modus",djModeDesc:"Live-Performance! Mixe in Echtzeit.",accessibility:"Barrierefreiheit",textToSpeech:"Sprachausgabe",textToSpeechDesc:"Hover fr Beschreibungen",highContrast:"Hoher Kontrast",highContrastDesc:"Farbkontrast erhhen",largeText:"Groe Schrift",largeTextDesc:"Text und Buttons vergrern",keyboardNav:"Tastaturnavigation",keyboardNavDesc:"Verbesserte Tab-Navigation",voiceControl:"Sprachsteuerung",voiceControlDesc:"Freihndig! Steuere die App mit deiner Stimme",language:"Sprache",languageDesc:"App-Sprache ndern",play:"Abspielen",stop:"Stopp",tempo:"Tempo",volume:"Lautstrke",back:"Zurck",home:"Startseite",masterVolume:"Hauptlautstrke",backgroundMusic:"Hintergrundmusik",visualThemes:"Visuelle Themen",about:"ber",enableAll:"Alle Barrierefreiheit-Funktionen aktivieren",allEnabled:"Alle Funktionen aktiviert"},it:{appTitle:"REGNO DEL RITMO",createBeat:"Crea il Tuo Ritmo",letsPlay:"Giochiamo!",modes:"Modalit",settings:"Impostazioni",freePlay:"Gioco Libero",freePlayDesc:"Crea i tuoi ritmi senza limiti!",tutorial:"Tutorial",tutorialDesc:"Impara stili e mood diversi!",beatLibrary:"Libreria Ritmi",beatLibraryDesc:"Esplora ritmi di generi diversi!",djMode:"Modalit DJ",djModeDesc:"Performance dal vivo! Mixa in tempo reale.",accessibility:"Accessibilit",textToSpeech:"Sintesi Vocale",textToSpeechDesc:"Passa sopra per ascoltare le descrizioni",highContrast:"Alto Contrasto",highContrastDesc:"Aumenta il contrasto dei colori",largeText:"Testo Grande",largeTextDesc:"Aumenta la dimensione di testo e pulsanti",keyboardNav:"Navigazione Tastiera",keyboardNavDesc:"Navigazione Tab migliorata",voiceControl:"Controllo Vocale",voiceControlDesc:"Mani libere! Controlla l'app con la voce",language:"Lingua",languageDesc:"Cambia lingua dell'app",play:"Riproduci",stop:"Ferma",tempo:"Tempo",volume:"Volume",back:"Indietro",home:"Home",masterVolume:"Volume Principale",backgroundMusic:"Musica di Sottofondo",visualThemes:"Temi Visivi",about:"Info",enableAll:"Abilita Tutte le Funzioni di Accessibilit",allEnabled:"Tutte le Funzioni Abilitate"},pt:{appTitle:"REINO DO RITMO",createBeat:"Crie Sua Batida",letsPlay:"Vamos Jogar!",modes:"Modos",settings:"Configuraes",freePlay:"Jogo Livre",freePlayDesc:"Crie suas prprias batidas sem limites!",tutorial:"Tutorial",tutorialDesc:"Aprenda diferentes estilos e climas!",beatLibrary:"Biblioteca de Batidas",beatLibraryDesc:"Explore batidas de diferentes gneros!",djMode:"Modo DJ",djModeDesc:"Modo performance ao vivo! Mixe em tempo real.",accessibility:"Acessibilidade",textToSpeech:"Texto para Fala",textToSpeechDesc:"Passe o mouse para ouvir descries",highContrast:"Alto Contraste",highContrastDesc:"Aumentar contraste das cores",largeText:"Texto Grande",largeTextDesc:"Aumentar tamanho do texto e botes",keyboardNav:"Navegao por Teclado",keyboardNavDesc:"Navegao Tab melhorada",voiceControl:"Controle por Voz",voiceControlDesc:"Mos livres! Controle o app com a voz",language:"Idioma",languageDesc:"Mudar idioma do app",play:"Tocar",stop:"Parar",tempo:"Andamento",volume:"Volume",back:"Voltar",home:"Incio",masterVolume:"Volume Principal",backgroundMusic:"Msica de Fundo",visualThemes:"Temas Visuais",about:"Sobre",enableAll:"Ativar Todas as Funes de Acessibilidade",allEnabled:"Todas as Funes Ativadas"},hi:{appTitle:" ",createBeat:"  ",letsPlay:" !",modes:"",settings:"",freePlay:" ",freePlayDesc:"      !",tutorial:"",tutorialDesc:"    !",beatLibrary:" ",beatLibraryDesc:"    !",djMode:"DJ ",djModeDesc:" ! -   ",accessibility:"",textToSpeech:"--",textToSpeechDesc:"     ",highContrast:" ",highContrastDesc:"  ",largeText:" ",largeTextDesc:"     ",keyboardNav:" ",keyboardNavDesc:" Tab ",voiceControl:" ",voiceControlDesc:"-!     ",language:"",languageDesc:"   ",play:"",stop:"",tempo:"",volume:"",back:"",home:"",masterVolume:" ",backgroundMusic:" ",visualThemes:" ",about:"  ",enableAll:"    ",allEnabled:"  "},ar:{appTitle:" ",createBeat:" ",letsPlay:" !",modes:"",settings:"",freePlay:" ",freePlayDesc:"   !",tutorial:"",tutorialDesc:"   !",beatLibrary:" ",beatLibraryDesc:"    !",djMode:" DJ",djModeDesc:" !    .",accessibility:" ",textToSpeech:"   ",textToSpeechDesc:"  ",highContrast:" ",highContrastDesc:"  ",largeText:" ",largeTextDesc:"   ",keyboardNav:"  ",keyboardNavDesc:"   Tab",voiceControl:" ",voiceControlDesc:" !   ",language:"",languageDesc:"  ",play:"",stop:"",tempo:"",volume:"",back:"",home:"",masterVolume:" ",backgroundMusic:" ",visualThemes:"",about:"",enableAll:"    ",allEnabled:"  "}},W=g=>Rs[La]?.[g]||Rs.en[g]||g,[at,Sn]=H.useState(!1),[ua,_n]=H.useState(16),[jn,pr]=H.useState(0);H.useEffect(()=>{const g=()=>{Sn(window.innerWidth<768),window.innerWidth<480?_n(8):window.innerWidth<768?_n(16):_n(32)};return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const[Et,da]=H.useState([]),[gr,br]=H.useState(!1),[yc,bl]=H.useState(!1),[qi,Os]=H.useState(""),[xl,yl]=H.useState(null),[vl,wl]=H.useState(!1),[Li,Fn]=H.useState(!1),Sl=H.useRef(null),[an,_l]=H.useState({kick:0,snare:0,hihat:0,tom:0,perc:0,bass:0,synth:0,fx:0,keys:0,vox:0,lead:0,orch:0}),[ha,xr]=H.useState({}),[jl,zi]=H.useState(null);H.useEffect(()=>{const g={};Object.keys(Rt).forEach(w=>{g[w]={pitch:0,chord:null,bend:0,volume:100,muted:!1,attack:0,decay:100,filter:100,reverb:0,distortion:0,pan:0}}),xr(g)},[]),H.useEffect(()=>{const g=localStorage.getItem("rhythmRealm_accessibility");if(g)try{const E=JSON.parse(g);ur(E.accessibilityMode||!1),dr(E.textToSpeech||!1),Wa(E.highContrast||!1),hr(E.largeText||!1),Es(E.keyboardNav||!1),fr(E.voiceControl||!1)}catch(E){console.log("Error loading accessibility settings:",E)}const w=localStorage.getItem("rhythmRealm_language");w&&Zn[w]&&vn(w)},[]),H.useEffect(()=>{const g={accessibilityMode:xn,textToSpeech:$t,highContrast:Jt,largeText:Wt,keyboardNav:yn,voiceControl:At};localStorage.setItem("rhythmRealm_accessibility",JSON.stringify(g))},[xn,$t,Jt,Wt,yn,At]),H.useEffect(()=>{let g=null,w=!0;const E=()=>{if(!w||!At)return;const O=window.SpeechRecognition||window.webkitSpeechRecognition;if(!O){console.log("Speech recognition not supported in this browser"),alert("Voice control is not supported in this browser. Please use Chrome, Edge, or Safari.");return}g=new O,g.continuous=!1,g.interimResults=!1,g.lang=Zn[La]?.code||"en-US",g.maxAlternatives=1,g.onstart=()=>{console.log("Voice recognition started"),ea(!0)},g.onend=()=>{console.log("Voice recognition ended"),ea(!1),w&&At&&setTimeout(()=>{if(w&&At)try{E()}catch(V){console.log("Restart error:",V)}},300)},g.onerror=V=>{console.log("Speech recognition error:",V.error),ea(!1),V.error!=="aborted"&&w&&At&&setTimeout(()=>{w&&At&&E()},1e3)},g.onresult=V=>{const oe=V.results[0];if(oe.isFinal){const ge=oe[0].transcript.toLowerCase().trim();console.log("Voice command received:",ge),fl(ge),vc(ge)}},tn.current=g;try{g.start(),console.log("Recognition starting...")}catch(V){console.log("Recognition start error:",V),setTimeout(()=>{w&&At&&E()},500)}};if(!At){if(tn.current){try{tn.current.stop()}catch{}tn.current=null}ea(!1);return}return E(),()=>{if(w=!1,tn.current){try{tn.current.stop()}catch{}tn.current=null}}},[At,La]);const vc=g=>{const w=E=>{if(window.speechSynthesis){window.speechSynthesis.cancel();const O=new SpeechSynthesisUtterance(E);O.rate=1,window.speechSynthesis.speak(O)}};if(console.log("Processing command:",g),g.includes("go home")||g.includes("home screen")||g.includes("main menu")||g==="home")w("Going to home screen"),S(!1),n("splash");else if(g.includes("go to modes")||g.includes("open modes")||g.includes("show modes")||g==="modes")w("Opening modes"),n("modes");else if(g.includes("go to settings")||g.includes("open settings")||g==="settings")w("Opening settings"),n("settings");else if(g.includes("free play")||g.includes("start playing")||g.includes("create beat")||g.includes("studio")){w("Starting free play mode"),R.init();const E={};Object.keys(Rt).forEach(O=>E[O]=Array(Ge).fill(!1)),St(E),y(sc),Ua(!1),Pn(null),i("splash"),n("studio")}else if(g.includes("dj mode")||g.includes("open dj")||g.includes("start dj")||g==="dj")w("Opening DJ mode"),R.init(),i("modes"),n("djmode");else if(g.includes("tutorial")||g.includes("learn")||g.includes("help me learn"))w("Opening tutorials"),n("tutorials");else if(g.includes("library")||g.includes("beat library")||g.includes("saved beats"))w("Opening beat library"),n("library");else if(g.includes("go back")||g==="back")w("Going back"),S(!1),n(r||"splash");else if(g==="play"||g==="start"||g.includes("play the beat")||g.includes("start playing"))w("Playing"),S(!0);else if(g==="stop"||g==="pause"||g.includes("stop playing")||g.includes("pause it"))w("Stopped"),S(!1);else if(g.includes("faster")||g.includes("speed up")||g.includes("increase tempo"))q(E=>{const O=Math.min(200,E+10);return w(`Tempo increased to ${O}`),O});else if(g.includes("slower")||g.includes("slow down")||g.includes("decrease tempo"))q(E=>{const O=Math.max(40,E-10);return w(`Tempo decreased to ${O}`),O});else if(g.includes("clear")||g.includes("reset")||g.includes("start over")||g.includes("clear all")){const E={};Object.keys(Rt).forEach(O=>E[O]=Array(Ge).fill(!1)),St(E),w("Beat cleared")}else g.includes("help")||g.includes("what can i say")||g.includes("voice commands")?w("You can say: play, stop, go home, modes, settings, DJ mode, free play, faster, slower, clear, or go back"):w(`I heard: ${g}. Say help for commands.`)},Ue=g=>{if(!(!$t||!g)&&window.speechSynthesis){window.speechSynthesis.cancel();const w=new SpeechSynthesisUtterance(g);w.rate=.9,w.pitch=1,w.volume=1;const E=window.speechSynthesis.getVoices(),O=E.find(V=>V.lang.includes("en")&&V.name.includes("Natural"))||E.find(V=>V.lang.includes("en-US"))||E[0];O&&(w.voice=O),window.speechSynthesis.speak(w)}},Ke=()=>{window.speechSynthesis&&window.speechSynthesis.cancel()};H.useEffect(()=>{const g=localStorage.getItem("rhythmRealm_savedBeats");if(g)try{da(JSON.parse(g))}catch(w){console.log("Error loading saved beats:",w)}},[]);const wc=async g=>{const w={id:Date.now(),name:g||`Beat ${Et.length+1}`,date:new Date().toLocaleDateString(),grid:Ot,tempo:k,activeInstrumentIds:De,instrumentConfig:an};if(Z)try{const E=await Md.saveBeat(Z.id,{name:w.name,grid:w.grid,tempo:w.tempo,activeInstrumentIds:w.activeInstrumentIds,instrumentConfig:w.instrumentConfig,isPublic:!1}),O={...w,id:E.id,cloudSaved:!0},V=[...Et,O];da(V),localStorage.setItem("rhythmRealm_savedBeats",JSON.stringify(V)),console.log("Beat saved to cloud!")}catch(E){console.error("Failed to save to cloud, saving locally:",E);const O=[...Et,w];da(O),localStorage.setItem("rhythmRealm_savedBeats",JSON.stringify(O))}else{const E=[...Et,w];da(E),localStorage.setItem("rhythmRealm_savedBeats",JSON.stringify(E))}br(!1),Os(""),Bi()},Sc=g=>{St(g.grid),q(g.tempo),ft(g.activeInstrumentIds),_l(g.instrumentConfig),bl(!1)},_c=async g=>{const w=Et.find(O=>O.id===g);if(Z&&w?.cloudSaved)try{await Md.deleteBeat(g,Z.id),console.log("Beat deleted from cloud")}catch(O){console.error("Failed to delete from cloud:",O)}const E=Et.filter(O=>O.id!==g);da(E),localStorage.setItem("rhythmRealm_savedBeats",JSON.stringify(E))},jc=async()=>{if(Z)try{const g=await Md.getUserBeats(Z.id);if(g&&g.length>0){const w=g.map(V=>({id:V.id,name:V.name,date:new Date(V.created_at).toLocaleDateString(),grid:V.grid,tempo:V.tempo,activeInstrumentIds:V.instruments,instrumentConfig:V.instrument_config,cloudSaved:!0,favorite:V.favorite||!1})),E=Et.filter(V=>!w.some(oe=>oe.id===V.id)),O=[...w,...E];da(O),localStorage.setItem("rhythmRealm_savedBeats",JSON.stringify(O))}}catch(g){console.error("Failed to load beats from cloud:",g)}};Zd.useEffect(()=>{Z&&jc()},[Z]);const Tc=g=>{const w=Et.map(E=>E.id===g?{...E,favorite:!E.favorite}:E);da(w),localStorage.setItem("rhythmRealm_savedBeats",JSON.stringify(w))},Vi=g=>{const w=Math.max(0,Math.min(Ge-1,g));T(w),Tn.current=w,v&&R.ctx&&(Wn.current=R.ctx.currentTime+.05)},Ds=g=>{if(!Sl.current)return;const w=Sl.current.getBoundingClientRect(),E=(g.touches?g.touches[0].clientX:g.clientX)-w.left,O=Math.max(0,Math.min(1,E/w.width)),V=Math.floor(O*Ge);Vi(V)};H.useEffect(()=>{const g=Pa&&(l==="splash"||l==="modes"||l==="settings"||l==="library")&&!wt,w=()=>{if(!Ja.current)try{const O=new(window.AudioContext||window.webkitAudioContext);Ma.current=O;const V=O.createGain();V.gain.value=.15,V.connect(O.destination),pn.current=V;const oe=()=>{if(!Ma.current||Ma.current.state==="closed")return;const ge=O.currentTime,ye=8;[130.81,164.81,196,246.94].forEach((J,X)=>{const ne=O.createOscillator(),Se=O.createGain(),qe=O.createBiquadFilter();ne.type="sine",ne.frequency.value=J,qe.type="lowpass",qe.frequency.value=800,qe.Q.value=1,Se.gain.setValueAtTime(0,ge),Se.gain.linearRampToValueAtTime(.08,ge+2),Se.gain.setValueAtTime(.08,ge+ye-2),Se.gain.linearRampToValueAtTime(0,ge+ye),ne.connect(qe),qe.connect(Se),Se.connect(V),ne.start(ge),ne.stop(ge+ye)}),[261.63,329.63,392,493.88,392,329.63].forEach((J,X)=>{const ne=O.createOscillator(),Se=O.createGain(),qe=O.createBiquadFilter();ne.type="triangle",ne.frequency.value=J,qe.type="lowpass",qe.frequency.value=1200;const rt=ge+X*1.2;Se.gain.setValueAtTime(0,rt),Se.gain.linearRampToValueAtTime(.06,rt+.1),Se.gain.exponentialRampToValueAtTime(.001,rt+1),ne.connect(qe),qe.connect(Se),Se.connect(V),ne.start(rt),ne.stop(rt+1)}),[0,4].forEach(J=>{const X=O.createOscillator(),ne=O.createGain();X.type="sine",X.frequency.value=65.41;const Se=ge+J;ne.gain.setValueAtTime(0,Se),ne.gain.linearRampToValueAtTime(.1,Se+.1),ne.gain.exponentialRampToValueAtTime(.001,Se+1.5),X.connect(ne),ne.connect(V),X.start(Se),X.stop(Se+1.5)}),Ja.current=setTimeout(()=>oe(),ye*1e3-100)};oe()}catch(O){console.log("Background music error:",O)}},E=()=>{Ja.current&&(clearTimeout(Ja.current),Ja.current=null),pn.current&&pn.current.gain.linearRampToValueAtTime(0,Ma.current?.currentTime+.5||0),Ma.current&&Ma.current.state!=="closed"&&setTimeout(()=>{Ma.current&&(Ma.current.close(),Ma.current=null)},600)};return g?w():E(),()=>E()},[l,Pa,wt]);const[Ot,St]=H.useState(()=>{const g={};return Object.keys(Rt).forEach(w=>g[w]=Array(Ge).fill(!1)),g});H.useRef(null);const fa=H.useRef(null),Wn=H.useRef(0),Tn=H.useRef(0),Tl=H.useRef(!1),kl=H.useRef(Ot),Nl=H.useRef(k),Al=H.useRef(De),kn=H.useRef(an),Hi=H.useRef(ha);H.useEffect(()=>{kl.current=Ot},[Ot]),H.useEffect(()=>{Nl.current=k},[k]),H.useEffect(()=>{Al.current=De},[De]),H.useEffect(()=>{kn.current=an},[an]),H.useEffect(()=>{Hi.current=ha},[ha]);const $i=(()=>{if(!gn)return 0;let g=0,w=0;return Object.keys(gn.pattern).forEach(E=>{const O=gn.pattern[E]||[];g+=O.length,O.forEach(V=>{Ot[E][V]&&w++})}),g===0?0:w/g*100})(),Gt=$i,Gi=g=>{De.length>=12||(De.includes(g)||ft([...De,g]),Kn(!1))},Ms=g=>{ft(De.filter(w=>w!==g))},Us=(g,w)=>{let E=0;return Al.current.forEach(O=>{if(kl.current[O][g]){const V=kn.current[O],oe=Rt[O][V],ge=Hi.current[O]||{pitch:0,chord:null,bend:0,volume:100,muted:!1,attack:0,decay:100,filter:100,reverb:0,distortion:0,pan:0};ge.muted||(R.trigger(oe,w,ge),E++)}}),E},kc=()=>{for(;Wn.current<R.ctx.currentTime+.1;){const w=Us(Tn.current,Wn.current),E=Tn.current,O=(Wn.current-R.ctx.currentTime)*1e3;setTimeout(()=>{T(E),w>0&&(Q(ge=>Math.min(ge+.5,100)),Re(1),setTimeout(()=>Re(0),100))},Math.max(0,O));const oe=60/Nl.current/4;Wn.current+=oe,Tn.current=(Tn.current+1)%Ge}};H.useEffect(()=>(v?(R.init(),Tl.current=!0,Wn.current=R.ctx.currentTime+.05,Tn.current=_,fa.current=setInterval(kc,25)):(Tl.current=!1,fa.current&&(clearInterval(fa.current),fa.current=null)),()=>{fa.current&&(clearInterval(fa.current),fa.current=null)}),[v]),H.useEffect(()=>(l==="studio"&&p?R.startAmbience(p.ambience):R.stopAmbience(),()=>R.stopAmbience()),[l,p]),H.useEffect(()=>{const g=()=>Ba(!1);return window.addEventListener("mouseup",g),()=>window.removeEventListener("mouseup",g)},[]),H.useEffect(()=>{if(wt&&p&&p.tutorial){const g=p.tutorial[ct];g&&g.targetInstrument&&g.soundVariant!==void 0&&_l(w=>({...w,[g.targetInstrument]:g.soundVariant}))}},[ct,wt,p]);const es=(g,w)=>{if(wt&&p&&p.tutorial){const E=p.tutorial;if(ct<E.length){const O=E[ct];if(O.targetInstrument&&O.targetSteps&&O.targetSteps.length>0&&(g!==O.targetInstrument||!O.targetSteps.includes(w)))return}}gn&&!(gn.pattern[g]||[]).includes(w)||(R.init(),or&&Ka(null),St(E=>{const O=[...E[g]];if(O[w]=!O[w],O[w]){const oe=an[g],ge=Rt[g][oe],ye={...ha[g],muted:!1};R.trigger(ge,0,ye)}const V={...E,[g]:O};if(bn&&oc[Qa]?.action==="click-grid"&&setTimeout(()=>et(oe=>oe+1),300),wt){const oe=p.tutorial;if(ct<oe.length){const ge=oe[ct];ge.targetInstrument===g&&ge.targetSteps.every(ue=>V[g][ue]===!0)&&setTimeout(()=>ll(ue=>Math.min(ue+1,oe.length-1)),300)}}return V}))},Ii=g=>{gn||St(w=>{const E=Array(Ge).fill(!1);for(let O=0;O<6;O++)E[Math.floor(Math.random()*Ge)]=!0;return{...w,[g]:E}})},Yi=()=>{const g={};Object.keys(Ot).forEach(w=>g[w]=Array(Ge).fill(!1)),St(g)},yr=(g,w,E)=>{xr(O=>({...O,[g]:{...O[g],[w]:E}}))},El=(g,w)=>{Ba(!0),es(g,w)},Pi=(g,w)=>{Ci&&es(g,w)},Ji=(g,w)=>{es(g,w)},Cl=g=>{pr(g==="left"?w=>Math.max(0,w-ua):w=>Math.min(Ge-ua,w+ua))},Bs=()=>At?o.jsxs("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col items-end gap-2",children:[o.jsxs("div",{className:`px-4 py-2 rounded-full shadow-lg flex items-center gap-2 transition-all ${en?"bg-green-500 animate-pulse":"bg-red-500"}`,children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${en?"bg-white":"bg-white/50"}`}),o.jsx("span",{className:"text-white font-bold text-sm",children:en?" Listening":" Paused"})]}),Qn&&o.jsxs("div",{className:"px-3 py-1 bg-black/80 rounded-full text-white text-xs",children:['"',Qn,'"']})]}):null,Nc=Vt?o.jsx("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",onClick:g=>g.stopPropagation(),children:o.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-purple-500/50 rounded-3xl w-full max-w-md shadow-2xl shadow-purple-500/20 animate-bounce-in",onClick:g=>g.stopPropagation(),children:[o.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between",children:[o.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[o.jsx("span",{className:"text-3xl",children:Ht==="login"?"":""}),Ht==="login"?"Welcome Back!":"Join Rhythm Realm"]}),o.jsx("button",{onClick:()=>Yt(!1),className:"p-2 hover:bg-slate-700 rounded-xl transition-all text-slate-400 hover:text-white",children:o.jsx(we.Close,{})})]}),o.jsxs("form",{onSubmit:Ht==="login"?ml:Ui,className:"p-6 space-y-4",autoComplete:"off",children:[I&&o.jsxs("div",{className:"p-4 bg-red-500/20 border border-red-500/50 rounded-xl text-red-300 text-sm",children:[" ",I]}),Ht==="register"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-slate-400 mb-2",children:"Username"}),o.jsx("input",{type:"text",value:He,onChange:g=>A(g.target.value),onKeyDown:g=>g.stopPropagation(),placeholder:"Your display name",className:"w-full p-4 bg-slate-800 border-2 border-slate-700 rounded-xl text-white focus:border-purple-500 focus:outline-none transition-all",required:!0,minLength:3,autoComplete:"off"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-slate-400 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:L,onChange:g=>ee(g.target.value),onKeyDown:g=>g.stopPropagation(),placeholder:"your@email.com",className:"w-full p-4 bg-slate-800 border-2 border-slate-700 rounded-xl text-white focus:border-purple-500 focus:outline-none transition-all",required:!0,autoComplete:"off"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-slate-400 mb-2",children:"Password"}),o.jsx("input",{type:"password",value:fe,onChange:g=>Be(g.target.value),onKeyDown:g=>g.stopPropagation(),placeholder:"",className:"w-full p-4 bg-slate-800 border-2 border-slate-700 rounded-xl text-white focus:border-purple-500 focus:outline-none transition-all",required:!0,minLength:6,autoComplete:"new-password"})]}),o.jsx("button",{type:"submit",disabled:se,className:"w-full p-4 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 rounded-xl font-bold text-white text-lg transition-all shadow-lg shadow-purple-500/30 disabled:opacity-50",children:se?" Please wait...":Ht==="login"?" Login":" Create Account"}),o.jsx("div",{className:"text-center text-slate-400 text-sm",children:Ht==="login"?o.jsxs(o.Fragment,{children:["Don't have an account? ",o.jsx("button",{type:"button",onClick:()=>{Xt("register"),F("")},className:"text-purple-400 hover:text-purple-300 font-bold",children:"Sign up"})]}):o.jsxs(o.Fragment,{children:["Already have an account? ",o.jsx("button",{type:"button",onClick:()=>{Xt("login"),F("")},className:"text-purple-400 hover:text-purple-300 font-bold",children:"Login"})]})})]})]})}):null,Ac=()=>o.jsx("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-2",children:Z?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>{za(),Me(!0)},className:"p-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 rounded-xl shadow-lg transition-all hover:scale-105",title:"Leaderboard",children:o.jsx("span",{className:"text-xl",children:""})}),o.jsx("button",{onClick:()=>{pl(),nr(!0)},className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-400 hover:to-emerald-400 rounded-xl shadow-lg transition-all hover:scale-105",title:"Achievements",children:o.jsx("span",{className:"text-xl",children:""})}),o.jsxs("button",{onClick:()=>hn(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-800/80 backdrop-blur-sm rounded-xl border border-slate-700 hover:bg-slate-700/80 transition-all cursor-pointer",title:"View Profile",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-bold text-white",children:le?.username||"Player"}),o.jsxs("div",{className:"text-xs text-slate-400",children:["Lvl ",le?.level||1,"  ",le?.rank_title||"Beginner"]})]}),o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-lg font-black text-white",children:(le?.username||"P")[0].toUpperCase()})]}),o.jsx("button",{onClick:()=>wn(!1),className:"p-3 bg-slate-800/80 hover:bg-red-500/30 rounded-xl text-slate-400 hover:text-red-400 transition-all border border-slate-700 hover:border-red-500/50",title:"Logout",children:o.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})})})]}):o.jsxs("button",{onClick:()=>Yt(!0),className:"px-5 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 rounded-xl font-bold text-white shadow-lg shadow-purple-500/30 transition-all hover:scale-105 flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:""})," Login / Sign Up"]})}),Ec=()=>o.jsx("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-amber-500/50 rounded-3xl w-full max-w-2xl shadow-2xl shadow-amber-500/20 animate-bounce-in max-h-[80vh] flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between shrink-0",children:[o.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[o.jsx("span",{className:"text-3xl",children:""})," Global Leaderboard"]}),o.jsx("button",{onClick:()=>Me(!1),className:"p-2 hover:bg-slate-700 rounded-xl transition-all text-slate-400 hover:text-white",children:o.jsx(we.Close,{})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:ks?o.jsxs("div",{className:"text-center py-12 text-slate-400",children:[o.jsx("div",{className:"text-5xl mb-4 animate-bounce",children:""}),o.jsx("p",{children:"Loading leaderboard..."})]}):Tt.length===0?o.jsxs("div",{className:"text-center py-12 text-slate-400",children:[o.jsx("div",{className:"text-5xl mb-4",children:""}),o.jsx("p",{children:"No players yet. Be the first!"})]}):o.jsx("div",{className:"space-y-2",children:Tt.map((g,w)=>{const E=w+1,O=Z&&g.id===Z.id,V=E===1?"":E===2?"":E===3?"":"";return o.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl transition-all ${O?"bg-purple-500/30 border-2 border-purple-500":E<=3?"bg-amber-500/10 border border-amber-500/30":"bg-slate-800/50 border border-slate-700/50"}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black text-lg ${E===1?"bg-amber-400 text-amber-900":E===2?"bg-slate-300 text-slate-700":E===3?"bg-amber-600 text-amber-100":"bg-slate-700 text-slate-300"}`,children:V||E}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-white",children:g.username}),O&&o.jsx("span",{className:"text-xs bg-purple-500 px-2 py-0.5 rounded-full text-white",children:"You"})]}),o.jsxs("div",{className:"text-xs text-slate-400",children:["Level ",g.level,"  ",g.rank_title]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"font-black text-xl text-white",children:g.total_score?.toLocaleString()||0}),o.jsxs("div",{className:"text-xs text-slate-400",children:[g.total_beats_created||0," beats"]})]})]},g.id)})})}),As&&As>10&&o.jsx("div",{className:"p-4 border-t border-slate-700 shrink-0",children:o.jsxs("div",{className:"text-center text-slate-400 text-sm",children:["Your rank: ",o.jsxs("span",{className:"text-purple-400 font-bold",children:["#",As]})]})})]})}),Cc=()=>{const g=new Set(sr.map(w=>w.achievement_id));return o.jsx("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-green-500/50 rounded-3xl w-full max-w-3xl shadow-2xl shadow-green-500/20 animate-bounce-in max-h-[80vh] flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between shrink-0",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[o.jsx("span",{className:"text-3xl",children:""})," Achievements"]}),o.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:[sr.length," / ",Kd.length," unlocked"]})]}),o.jsx("button",{onClick:()=>nr(!1),className:"p-2 hover:bg-slate-700 rounded-xl transition-all text-slate-400 hover:text-white",children:o.jsx(we.Close,{})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:Ti?o.jsxs("div",{className:"text-center py-12 text-slate-400",children:[o.jsx("div",{className:"text-5xl mb-4 animate-bounce",children:""}),o.jsx("p",{children:"Loading achievements..."})]}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Kd.map(w=>{const E=g.has(w.id),O=Dd.getAchievementProgress(w.id,fn);return o.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${E?"bg-green-500/20 border-green-500/50":"bg-slate-800/50 border-slate-700/50 opacity-60"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl ${E?"bg-green-500/30":"bg-slate-700/50 grayscale"}`,children:w.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-white",children:w.name}),E&&o.jsx("span",{className:"text-green-400",children:""})]}),o.jsx("p",{className:"text-xs text-slate-400 mt-1",children:w.description}),O&&!E&&o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"h-1.5 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-purple-500 transition-all",style:{width:`${Math.min(100,O.current/O.target*100)}%`}})}),o.jsxs("div",{className:"text-[10px] text-slate-500 mt-1",children:[O.current," / ",O.target]})]})]}),o.jsxs("div",{className:"text-xs text-amber-400 font-bold",children:["+",w.xp," XP"]})]})},w.id)})})})]})})},Dt=g=>{if(!g)return{complete:!1,score:0,stars:0};const w=g.requirements;let E=0,O=0,V=0;const oe={};Object.keys(Ot).forEach(ue=>{oe[ue]=Ot[ue].filter(Boolean).length});let ge=!0;Object.entries(w.mustInclude||{}).forEach(([ue,Y])=>{O+=Y;const J=oe[ue]||0;V+=Math.min(J,Y),J<Y&&(ge=!1)}),E=Math.round(V/Math.max(1,O)*100);let ye=0;return E>=100?ye=3:E>=75?ye=2:E>=50&&(ye=1),{complete:ge&&E>=100,score:E,stars:ye}},qs=async()=>{if(!Fe)return;const g=Dt(Fe);if(pc(g.score),g.complete){ia(!0);const w=!kt[Fe.id]?.completed,E=kt[Fe.id]?.stars>=3;g.stars>=3;const O={...kt,[Fe.id]:{completed:!0,stars:Math.max(g.stars,kt[Fe.id]?.stars||0),bestScore:Math.max(g.score,kt[Fe.id]?.bestScore||0)}};fc(O),localStorage.setItem("rhythmRealm_levelProgress",JSON.stringify(O));const V=Object.values(O).filter(ye=>ye?.completed).length,oe=Object.values(O).filter(ye=>ye?.stars>=3).length,ge=Fe.xpReward;Ft(ye=>({...ye,totalScore:ye.totalScore+ge,tutorialsCompleted:ye.tutorialsCompleted+(w?1:0),instrumentsUsed:De.length,tempo:k,hasPlayed:!0,levelsCompleted:V,threeStarLevels:oe})),Z&&setTimeout(()=>ca(),500)}},Ki=()=>hi.map((g,w)=>{if(w===0)return{...g,unlocked:!0};const E=hi[w-1],O=kt[E.id]?.completed;return{...g,unlocked:O||g.unlocked}}),Xi=()=>{if(!Fe)return;const g=Fe.hints||[];ir<g.length&&(dn(!0),setTimeout(()=>dn(!1),4e3),ir<g.length-1&&rl(w=>w+1))},nn=()=>un?o.jsx("div",{className:"fixed top-4 sm:top-20 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[150] animate-bounce-in",children:o.jsxs("div",{className:"bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-500 px-4 sm:px-8 py-4 sm:py-5 rounded-2xl shadow-2xl shadow-amber-500/50 flex items-center gap-3 sm:gap-4 border-2 border-yellow-300 max-w-md mx-auto",children:[o.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white/30 rounded-xl flex items-center justify-center text-2xl sm:text-4xl animate-bounce shadow-lg shrink-0",children:un.icon}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"text-xs sm:text-sm font-bold text-yellow-100 uppercase tracking-wide flex items-center gap-1 sm:gap-2",children:[o.jsx("span",{className:"text-base sm:text-xl",children:""})," Achievement! ",o.jsx("span",{className:"text-base sm:text-xl",children:""})]}),o.jsx("div",{className:"text-lg sm:text-2xl font-black text-white drop-shadow-lg truncate",children:un.name}),o.jsxs("div",{className:"text-xs sm:text-sm text-yellow-100 font-bold",children:["+",un.xp," XP"]}),o.jsx("div",{className:"text-[10px] sm:text-xs text-yellow-200 mt-1 line-clamp-2",children:un.description})]})]})}):null;if(l==="splash")return o.jsxs("div",{className:`h-screen w-full text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans ${Jt?"high-contrast":""} ${Wt?"large-text":""}`,role:"main","aria-label":"Rhythm Realm - Music Creation App",children:[o.jsx("style",{children:Gn}),o.jsx("a",{href:"#main-content",className:"skip-link",onFocus:()=>Ue("Skip to main content"),children:"Skip to main content"}),o.jsx(Bs,{}),o.jsx(Fr,{theme:Za}),o.jsx(Ac,{}),o.jsx(nn,{}),Nc,Te&&o.jsx(Ec,{}),cn&&o.jsx(Cc,{}),ki&&o.jsx("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-purple-500/50 rounded-3xl w-full max-w-lg shadow-2xl animate-bounce-in max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between",children:[o.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[o.jsx("span",{className:"text-3xl",children:""})," My Profile"]}),o.jsx("button",{onClick:()=>hn(!1),className:"p-2 hover:bg-slate-700 rounded-xl transition-all text-slate-400 hover:text-white",children:o.jsx(we.Close,{})})]}),o.jsx("div",{className:"p-6 space-y-6",children:Z&&le?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-3xl font-black text-white",children:(le.username||"P")[0].toUpperCase()}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-white",children:le.username}),o.jsx("p",{className:"text-purple-400",children:le.rank_title||"Beginner"}),o.jsx("p",{className:"text-slate-500 text-sm",children:le.email})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-3xl font-black text-purple-400",children:le.level||1}),o.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Level"})]}),o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-3xl font-black text-amber-400",children:le.total_score?.toLocaleString()||0}),o.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Total XP"})]}),o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-3xl font-black text-green-400",children:le.total_beats_created||0}),o.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Beats Created"})]}),o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-3xl font-black text-cyan-400",children:Object.values(kt).filter(g=>g?.completed).length}),o.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Levels Done"})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-slate-400",children:"XP to Next Level"}),o.jsxs("span",{className:"text-white font-bold",children:[(le.experience_points||0)%1e3," / 1000"]})]}),o.jsx("div",{className:"h-4 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500",style:{width:`${(le.experience_points||0)%1e3/10}%`}})})]}),o.jsx("div",{className:"bg-gradient-to-r from-orange-500/20 to-red-500/20 rounded-xl p-4 border border-orange-500/30",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"text-white font-bold",children:"Current Streak"})]}),o.jsxs("div",{className:"text-2xl font-black text-orange-400",children:[le.current_streak||0," days"]})]})}),o.jsx("button",{onClick:()=>wn(!0),className:"w-full p-4 bg-red-500/20 border border-red-500/50 rounded-xl text-red-400 font-bold hover:bg-red-500/30 transition-all",children:"Logout"})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Not Logged In"}),o.jsx("p",{className:"text-slate-400 mb-6",children:"Login to save your progress and compete on the leaderboard!"}),o.jsx("button",{onClick:()=>{hn(!1),Yt(!0)},className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white",children:"Login / Sign Up"})]})})]})}),o.jsxs("div",{id:"main-content",className:"z-10 text-center animate-bounce-in px-4 w-full max-w-md",children:[o.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-7xl font-black text-white drop-shadow-[0_5px_0_rgba(0,0,0,0.3)] tracking-tight mb-4 sm:mb-6 pixel-font",style:{textShadow:"4px 4px 0px #a855f7, 8px 8px 0px #06b6d4"},"aria-label":W("appTitle"),children:[W("appTitle").split(" ")[0],o.jsx("br",{}),W("appTitle").split(" ")[1]||""]}),o.jsxs("p",{className:"text-cyan-300 text-base sm:text-lg mb-4 sm:mb-6 opacity-80","aria-hidden":"true",children:[" ",W("createBeat")," "]}),Z&&le&&o.jsxs("div",{className:"mb-4 p-4 bg-slate-800/60 backdrop-blur-sm rounded-2xl border border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-3xl",children:le.rank_title?.split(" ")[0]||""}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-white font-bold",children:le.username}),o.jsxs("div",{className:"text-slate-400 text-xs",children:["Level ",le.level,"  ",le.total_score?.toLocaleString()||0," pts"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-amber-400 font-bold text-lg",children:le.total_beats_created||0}),o.jsx("div",{className:"text-slate-500 text-xs",children:"Beats"})]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[o.jsx("span",{children:"XP Progress"}),o.jsxs("span",{children:[(le.experience_points||0)%1e3," / 1000"]})]}),o.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${(le.experience_points||0)%1e3/10}%`}})})]})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",role:"navigation","aria-label":"Main menu",children:[o.jsxs(Ud,{onClick:()=>{R.init(),n("levels")},size:"lg",className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 border-purple-700 hover:from-cyan-400 hover:to-purple-400",onMouseEnter:()=>Ue(W("letsPlay")+"! Choose a level and learn to make beats"),onFocus:()=>Ue(W("letsPlay")+"! Choose a level and learn to make beats"),onMouseLeave:Ke,onBlur:Ke,"aria-label":W("letsPlay")+" - Choose a level to play",children:[o.jsx(we.Play,{})," ",W("letsPlay")]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>n("modes"),className:"flex-1 px-6 py-4 rounded-3xl text-lg font-black uppercase tracking-wide transition-all shadow-xl flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 hover:from-pink-400 hover:via-purple-400 hover:to-indigo-400 text-white border-b-8 border-purple-700 active:border-b-0 active:translate-y-2",onMouseEnter:()=>Ue(W("modes")+". Choose from Free Play, Tutorial, Beat Library, or DJ Mode"),onFocus:()=>Ue(W("modes")+". Choose from Free Play, Tutorial, Beat Library, or DJ Mode"),onMouseLeave:Ke,onBlur:Ke,"aria-label":W("modes")+" - Access different game modes",children:[o.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""})," ",W("modes")]}),o.jsxs("button",{onClick:()=>n("settings"),className:"flex-1 px-6 py-4 rounded-3xl text-lg font-black uppercase tracking-wide transition-all shadow-xl flex items-center justify-center gap-2 bg-gradient-to-r from-cyan-500 via-teal-500 to-emerald-500 hover:from-cyan-400 hover:via-teal-400 hover:to-emerald-400 text-white border-b-8 border-teal-700 active:border-b-0 active:translate-y-2",onMouseEnter:()=>Ue(W("settings")+". Adjust volume, themes, and accessibility options"),onFocus:()=>Ue(W("settings")+". Adjust volume, themes, and accessibility options"),onMouseLeave:Ke,onBlur:Ke,"aria-label":W("settings")+" - Adjust app settings and accessibility",children:[o.jsx(we.Sliders,{})," ",W("settings")]})]})]})]})]});if(l==="levels"){const g=Ki();return o.jsxs("div",{className:`h-screen w-full text-white flex flex-col overflow-hidden font-sans relative ${Jt?"high-contrast":""} ${Wt?"large-text":""}`,children:[o.jsx("style",{children:Gn}),o.jsx(Bs,{}),o.jsx(Fr,{theme:Za}),o.jsx(nn,{}),o.jsxs("div",{className:"relative z-10 px-4 sm:px-6 py-4 sm:py-6 flex items-center justify-between border-b border-white/10 bg-black/30 backdrop-blur-sm",children:[o.jsx("button",{onClick:()=>n("splash"),className:"p-2 sm:p-3 bg-white/10 hover:bg-white/20 rounded-xl sm:rounded-2xl shadow-lg transition-all active:scale-95",children:o.jsx(we.ChevronLeft,{})}),o.jsx("h2",{className:"text-xl sm:text-3xl font-black bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:" SELECT LEVEL"}),o.jsx("button",{onClick:()=>hn(!0),className:"p-2 sm:p-3 bg-white/10 hover:bg-white/20 rounded-xl sm:rounded-2xl shadow-lg transition-all active:scale-95",children:""})]}),o.jsxs("div",{className:"relative z-10 flex-1 overflow-y-auto p-4 sm:p-6",children:[o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 max-w-6xl mx-auto",children:g.map((w,E)=>{const O=kt[w.id],V=O?.completed,oe=O?.stars||0;return o.jsxs("button",{onClick:()=>{if(w.unlocked){R.init();const ge={};Object.keys(Rt).forEach(ye=>ge[ye]=Array(Ge).fill(!1)),St(ge),sl(w),rl(0),dn(!1),ia(!1),q(w.tempo),y(sc),i("levels"),n("levelPlay")}},disabled:!w.unlocked,className:`relative p-4 sm:p-6 rounded-2xl sm:rounded-3xl text-center transition-all ${w.unlocked?V?"bg-gradient-to-br from-green-500/80 to-emerald-600/80 hover:scale-105 border-2 border-green-400/50":"bg-gradient-to-br from-purple-500/80 to-pink-600/80 hover:scale-105 border-2 border-purple-400/50":"bg-slate-800/50 opacity-50 cursor-not-allowed border-2 border-slate-700/50"} backdrop-blur-sm shadow-xl`,children:[o.jsx("div",{className:`absolute -top-2 -left-2 w-8 h-8 rounded-full flex items-center justify-center font-black text-sm ${w.unlocked?"bg-white text-purple-600":"bg-slate-600 text-slate-400"}`,children:w.id}),!w.unlocked&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("span",{className:"text-4xl",children:""})}),o.jsxs("div",{className:w.unlocked?"":"opacity-30",children:[o.jsx("div",{className:"text-4xl mb-2",children:w.icon}),o.jsx("div",{className:"font-bold text-sm sm:text-base mb-1",children:w.name}),o.jsx("div",{className:"text-xs text-white/70 mb-2",children:w.difficulty}),o.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3].map(ge=>o.jsx("span",{className:`text-lg ${ge<=oe?"text-yellow-400":"text-slate-600"}`,children:""},ge))}),o.jsxs("div",{className:"mt-2 text-xs text-amber-400 font-bold",children:["+",w.xpReward," XP"]})]}),V&&o.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:""})]},w.id)})}),o.jsx("div",{className:"mt-6 sm:mt-8 max-w-md mx-auto",children:o.jsxs("div",{className:"bg-slate-800/60 backdrop-blur-sm rounded-2xl p-4 border border-slate-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"text-slate-400 font-bold",children:"Progress"}),o.jsxs("span",{className:"text-white font-black",children:[Object.values(kt).filter(w=>w?.completed).length," / ",hi.length]})]}),o.jsx("div",{className:"h-3 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${Object.values(kt).filter(w=>w?.completed).length/hi.length*100}%`}})}),o.jsxs("div",{className:"mt-3 flex justify-between text-xs text-slate-500",children:[o.jsxs("span",{children:[" ",Object.values(kt).reduce((w,E)=>w+(E?.stars||0),0)," total stars"]}),o.jsxs("span",{children:[" ",Object.values(kt).filter(w=>w?.stars===3).length," perfect"]})]})]})})]}),ki&&o.jsx("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-purple-500/50 rounded-3xl w-full max-w-lg shadow-2xl animate-bounce-in max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between",children:[o.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[o.jsx("span",{className:"text-3xl",children:""})," My Profile"]}),o.jsx("button",{onClick:()=>hn(!1),className:"p-2 hover:bg-slate-700 rounded-xl transition-all text-slate-400 hover:text-white",children:o.jsx(we.Close,{})})]}),o.jsx("div",{className:"p-6 space-y-6",children:Z&&le?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-3xl font-black text-white",children:(le.username||"P")[0].toUpperCase()}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-white",children:le.username}),o.jsx("p",{className:"text-purple-400",children:le.rank_title||"Beginner"}),o.jsx("p",{className:"text-slate-500 text-sm",children:le.email})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-3xl font-black text-purple-400",children:le.level||1}),o.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Level"})]}),o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-3xl font-black text-amber-400",children:le.total_score?.toLocaleString()||0}),o.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Total XP"})]}),o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-3xl font-black text-green-400",children:le.total_beats_created||0}),o.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Beats Created"})]}),o.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-3xl font-black text-cyan-400",children:Object.values(kt).filter(w=>w?.completed).length}),o.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Levels Done"})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-slate-400",children:"XP to Next Level"}),o.jsxs("span",{className:"text-white font-bold",children:[(le.experience_points||0)%1e3," / 1000"]})]}),o.jsx("div",{className:"h-4 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500",style:{width:`${(le.experience_points||0)%1e3/10}%`}})})]}),o.jsx("div",{className:"bg-gradient-to-r from-orange-500/20 to-red-500/20 rounded-xl p-4 border border-orange-500/30",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"text-white font-bold",children:"Current Streak"})]}),o.jsxs("div",{className:"text-2xl font-black text-orange-400",children:[le.current_streak||0," days"]})]})}),o.jsx("button",{onClick:()=>wn(!0),className:"w-full p-4 bg-red-500/20 border border-red-500/50 rounded-xl text-red-400 font-bold hover:bg-red-500/30 transition-all",children:"Logout"})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Not Logged In"}),o.jsx("p",{className:"text-slate-400 mb-6",children:"Login to save your progress and compete on the leaderboard!"}),o.jsx("button",{onClick:()=>{hn(!1),Yt(!0)},className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white",children:"Login / Sign Up"})]})})]})})]})}if(l==="levelPlay"&&Fe){const g=Dt(Fe);return o.jsxs("div",{className:`h-screen w-full flex flex-col overflow-hidden font-sans ${Jt?"high-contrast":""} ${Wt?"large-text":""}`,children:[o.jsx("style",{children:Gn}),o.jsx(nn,{}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900 to-pink-900 px-4 py-3 flex items-center justify-between border-b border-white/10",children:[o.jsx("button",{onClick:()=>{S(!1),R.stopAll(),n("levels")},className:"p-2 bg-white/10 hover:bg-white/20 rounded-xl text-white transition-all",children:o.jsx(we.ChevronLeft,{})}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx("span",{className:"text-xl",children:Fe.icon}),o.jsx("span",{className:"font-black text-white text-lg",children:Fe.name})]}),o.jsx("div",{className:"text-xs text-purple-300",children:Fe.difficulty})]}),o.jsx("button",{onClick:Xi,className:"p-2 bg-amber-500/20 hover:bg-amber-500/30 rounded-xl text-amber-400 font-bold transition-all flex items-center gap-1",children:" Hint"})]}),o.jsxs("div",{className:"bg-slate-800/80 px-4 py-3 text-center border-b border-slate-700",children:[o.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide mb-1",children:"Objective"}),o.jsx("div",{className:"text-white font-bold",children:Fe.objective}),o.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-2",children:Object.entries(Fe.requirements.mustInclude||{}).map(([w,E])=>{const O=Ot[w]?.filter(Boolean).length||0,V=O>=E;return o.jsxs("div",{className:`px-2 py-1 rounded-lg text-xs font-bold ${V?"bg-green-500/30 text-green-400":"bg-slate-700 text-slate-400"}`,children:[w.toUpperCase(),": ",O,"/",E," ",V&&""]},w)})})]}),mc&&Fe.hints&&o.jsx("div",{className:"absolute top-32 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-black px-6 py-3 rounded-2xl shadow-2xl max-w-sm text-center font-bold animate-bounce-in",children:Fe.hints[ir]}),o.jsxs("div",{className:"bg-slate-900 px-4 py-2",children:[o.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[o.jsx("span",{children:"Completion"}),o.jsxs("span",{className:g.score>=100?"text-green-400":"",children:[g.score,"%"]})]}),o.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all ${g.score>=100?"bg-green-500":"bg-purple-500"}`,style:{width:`${Math.min(100,g.score)}%`}})})]}),o.jsx("div",{className:"flex-1 overflow-auto bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-2",children:o.jsx("div",{className:"space-y-1",children:Object.keys(Rt).filter(w=>De.includes(w)).map(w=>{an[w];const E=Fe.requirements.instruments?.includes(w);return o.jsxs("div",{className:`flex items-center gap-1 ${E?"ring-2 ring-purple-500/50 rounded-xl":""}`,children:[o.jsxs("div",{className:`w-16 sm:w-20 text-xs font-black uppercase text-center py-2 rounded-l-xl ${E?"bg-purple-600 text-white":"bg-slate-700 text-slate-300"}`,children:[w,E&&o.jsx("span",{className:"ml-1 text-yellow-300",children:""})]}),o.jsx("div",{className:"flex-1 flex gap-0.5",children:Array.from({length:Ge}).map((O,V)=>{const oe=Ot[w]?.[V],ge=V%8===0;return o.jsx("button",{onClick:()=>{const ye={...Ot};ye[w]||(ye[w]=Array(Ge).fill(!1)),ye[w][V]=!ye[w][V],St(ye)},className:`flex-1 h-8 sm:h-10 rounded transition-all ${oe?"bg-gradient-to-br from-purple-500 to-pink-500 shadow-lg scale-95":ge?"bg-slate-600 hover:bg-slate-500":"bg-slate-700 hover:bg-slate-600"} ${_===V&&v?"ring-2 ring-cyan-400":""}`},V)})})]},w)})})}),o.jsxs("div",{className:"bg-slate-900 border-t border-slate-700 px-4 py-3 flex items-center justify-center gap-4",children:[o.jsx("button",{onClick:()=>{R.init(),v||gl(),S(!v)},className:`w-16 h-16 rounded-full flex items-center justify-center transition-all shadow-xl ${v?"bg-red-500 border-b-4 border-red-700":"bg-green-500 border-b-4 border-green-700"} text-white`,children:v?o.jsx(we.Stop,{}):o.jsx(we.Play,{})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-xs text-slate-400",children:"Tempo"}),o.jsxs("span",{className:"text-white font-bold",children:[k," BPM"]})]}),o.jsx("button",{onClick:qs,disabled:g.score<100,className:`px-6 py-3 rounded-xl font-bold transition-all ${g.score>=100?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg hover:scale-105":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:g.score>=100?" Submit":"Complete to Submit"})]}),Pt&&o.jsx("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-green-900 to-emerald-900 border-4 border-green-500 rounded-3xl p-8 max-w-md w-full text-center shadow-2xl animate-bounce-in",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:"Level Complete!"}),o.jsx("p",{className:"text-green-300 mb-4",children:Fe.name}),o.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3].map(w=>o.jsx("span",{className:`text-4xl ${w<=Dt(Fe).stars?"text-yellow-400":"text-slate-600"}`,children:""},w))}),o.jsx("div",{className:"bg-black/30 rounded-xl p-4 mb-6",children:o.jsxs("div",{className:"text-amber-400 font-bold text-xl",children:["+",Fe.xpReward," XP"]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{ia(!1),n("levels")},className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-bold text-white transition-all",children:"Back to Levels"}),o.jsx("button",{onClick:()=>{ia(!1);const w=hi.find(E=>E.id===Fe.id+1);if(w){const E={};Object.keys(Rt).forEach(O=>E[O]=Array(Ge).fill(!1)),St(E),sl(w),rl(0),q(w.tempo)}else n("levels")},className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white transition-all hover:scale-105",children:"Next Level "})]})]})})]})}if(l==="modes")return o.jsxs("div",{className:`h-screen w-full text-white flex flex-col overflow-hidden font-sans relative ${Jt?"high-contrast":""} ${Wt?"large-text":""}`,role:"main","aria-label":"Game Modes",children:[o.jsx("style",{children:Gn}),o.jsx("a",{href:"#modes-content",className:"skip-link",onFocus:()=>Ue("Skip to modes menu"),children:"Skip to modes"}),o.jsx(Bs,{}),o.jsx(Fr,{theme:Za}),o.jsx(nn,{}),o.jsxs("div",{className:"relative z-10 px-4 sm:px-6 py-4 sm:py-6 flex items-center justify-between border-b border-white/10 bg-black/30 backdrop-blur-sm",children:[o.jsx("button",{onClick:()=>n("splash"),className:"p-2 sm:p-3 bg-white/10 hover:bg-white/20 rounded-xl sm:rounded-2xl shadow-lg transition-all active:scale-95",onMouseEnter:()=>Ue(W("back")+" - "+W("home")),onFocus:()=>Ue(W("back")+" - "+W("home")),onMouseLeave:Ke,onBlur:Ke,"aria-label":W("back")+" - "+W("home"),children:o.jsx(we.ChevronLeft,{})}),o.jsxs("h2",{className:"text-xl sm:text-3xl font-black bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent","aria-label":W("modes"),children:[" ",W("modes").toUpperCase()]}),o.jsx("div",{className:"w-10 sm:w-12"})]}),o.jsxs("div",{id:"modes-content",className:"relative z-10 flex-1 overflow-y-auto p-4 sm:p-6 space-y-3 sm:space-y-4",role:"navigation","aria-label":"Mode selection",children:[o.jsx("button",{onClick:()=>{ja(!0)},className:"w-full p-4 sm:p-6 bg-gradient-to-br from-violet-500/90 to-fuchsia-600/90 backdrop-blur-sm rounded-2xl sm:rounded-3xl text-left border-b-8 border-fuchsia-700 active:border-b-0 active:translate-y-2 transition-all hover:scale-[1.02] shadow-2xl",onMouseEnter:()=>Ue(W("freePlay")+". "+W("freePlayDesc")),onFocus:()=>Ue(W("freePlay")+". "+W("freePlayDesc")),onMouseLeave:Ke,onBlur:Ke,"aria-label":W("freePlay")+" - "+W("freePlayDesc"),children:o.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[o.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white/20 rounded-xl sm:rounded-2xl flex items-center justify-center text-2xl sm:text-4xl","aria-hidden":"true",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-black",children:W("freePlay")}),o.jsx("div",{className:"text-xs sm:text-sm opacity-80 mt-1",children:W("freePlayDesc")})]}),o.jsx(we.ChevronRight,{})]})}),o.jsx("button",{onClick:()=>n("tutorials"),className:"w-full p-4 sm:p-6 bg-gradient-to-br from-blue-500/90 to-indigo-600/90 backdrop-blur-sm rounded-2xl sm:rounded-3xl text-left border-b-8 border-indigo-700 active:border-b-0 active:translate-y-2 transition-all hover:scale-[1.02] shadow-2xl",onMouseEnter:()=>Ue(W("tutorial")+". "+W("tutorialDesc")),onFocus:()=>Ue(W("tutorial")+". "+W("tutorialDesc")),onMouseLeave:Ke,onBlur:Ke,"aria-label":W("tutorial")+" - "+W("tutorialDesc"),children:o.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[o.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white/20 rounded-xl sm:rounded-2xl flex items-center justify-center text-2xl sm:text-4xl","aria-hidden":"true",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-black",children:W("tutorial")}),o.jsx("div",{className:"text-xs sm:text-sm opacity-80 mt-1",children:W("tutorialDesc")})]}),o.jsx(we.ChevronRight,{})]})}),o.jsx("button",{onClick:()=>n("library"),className:"w-full p-4 sm:p-6 bg-gradient-to-br from-amber-500/90 to-orange-600/90 backdrop-blur-sm rounded-2xl sm:rounded-3xl text-left border-b-8 border-orange-700 active:border-b-0 active:translate-y-2 transition-all hover:scale-[1.02] shadow-2xl",onMouseEnter:()=>Ue(W("beatLibrary")+". "+W("beatLibraryDesc")),onFocus:()=>Ue(W("beatLibrary")+". "+W("beatLibraryDesc")),onMouseLeave:Ke,onBlur:Ke,"aria-label":W("beatLibrary")+" - "+W("beatLibraryDesc"),children:o.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[o.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white/20 rounded-xl sm:rounded-2xl flex items-center justify-center text-2xl sm:text-4xl","aria-hidden":"true",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-black",children:W("beatLibrary")}),o.jsx("div",{className:"text-xs sm:text-sm opacity-80 mt-1",children:W("beatLibraryDesc")})]}),o.jsx(we.ChevronRight,{})]})}),o.jsx("button",{onClick:()=>{R.init(),i("modes"),n("djmode"),Ft(g=>({...g,usedDJMode:!0}))},className:"w-full p-4 sm:p-6 bg-gradient-to-br from-emerald-500/90 to-teal-600/90 backdrop-blur-sm rounded-2xl sm:rounded-3xl text-left border-b-8 border-teal-700 active:border-b-0 active:translate-y-2 transition-all hover:scale-[1.02] shadow-2xl",onMouseEnter:()=>Ue(W("djMode")+". "+W("djModeDesc")),onFocus:()=>Ue(W("djMode")+". "+W("djModeDesc")),onMouseLeave:Ke,onBlur:Ke,"aria-label":W("djMode")+" - "+W("djModeDesc"),children:o.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[o.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white/20 rounded-xl sm:rounded-2xl flex items-center justify-center text-2xl sm:text-4xl","aria-hidden":"true",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-black",children:W("djMode")}),o.jsx("div",{className:"text-xs sm:text-sm opacity-80 mt-1",children:W("djModeDesc")})]}),o.jsx(we.ChevronRight,{})]})})]}),il&&o.jsx("div",{className:"absolute inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"new-player-title",children:o.jsxs("div",{className:"bg-gradient-to-br from-violet-900 to-fuchsia-900 rounded-3xl p-6 sm:p-8 max-w-md w-full shadow-2xl border-4 border-white/20 animate-bounce-in",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"text-5xl sm:text-6xl mb-4","aria-hidden":"true",children:""}),o.jsx("h2",{id:"new-player-title",className:"text-2xl sm:text-3xl font-black text-white mb-2",children:"Welcome to Free Play!"}),o.jsx("p",{className:"text-white/70 text-sm sm:text-base",children:"Are you new to making beats?"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:()=>{R.init();const g={};Object.keys(Rt).forEach(w=>g[w]=Array(Ge).fill(!1)),St(g),y(sc),Ua(!1),Pn(null),i("modes"),ja(!1),Xa(!0),et(0),n("studio")},className:"w-full p-4 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-2xl text-white font-bold text-lg hover:scale-[1.02] transition-all border-b-4 border-blue-700 active:border-b-0 active:translate-y-1 flex items-center justify-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-black",children:"Yes, Show Me How!"}),o.jsx("div",{className:"text-xs opacity-80",children:"Interactive guide in the studio"})]})]}),o.jsxs("button",{onClick:()=>{ja(!1),n("tutorials")},className:"w-full p-4 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-2xl text-white font-bold text-lg hover:scale-[1.02] transition-all border-b-4 border-indigo-700 active:border-b-0 active:translate-y-1 flex items-center justify-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-black",children:"Learn Music Genres"}),o.jsx("div",{className:"text-xs opacity-80",children:"Step-by-step genre tutorials"})]})]}),o.jsxs("button",{onClick:()=>{R.init();const g={};Object.keys(Rt).forEach(w=>g[w]=Array(Ge).fill(!1)),St(g),y(sc),Ua(!1),Pn(null),i("modes"),ja(!1),n("studio")},className:"w-full p-4 bg-gradient-to-r from-fuchsia-500 to-pink-500 rounded-2xl text-white font-bold text-lg hover:scale-[1.02] transition-all border-b-4 border-pink-700 active:border-b-0 active:translate-y-1 flex items-center justify-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-black",children:"I Know What I'm Doing!"}),o.jsx("div",{className:"text-xs opacity-80",children:"Jump straight into Free Play"})]})]}),o.jsx("button",{onClick:()=>ja(!1),className:"w-full p-3 bg-white/10 hover:bg-white/20 rounded-xl text-white/70 font-bold text-sm transition-all",children:"Cancel"})]})]})})]});if(l==="tutorials"){const g=[{name:" Basics: Happy Beat",icon:"",desc:"Learn the FUNDAMENTALS - kick, snare, hi-hat, bass. Perfect for beginners!",theme:"from-yellow-400 to-orange-500",borderColor:"border-orange-600",scenarioIndex:0,difficulty:"Beginner",concepts:["Four-on-the-floor","Backbeat","Eighth notes"]},{name:" Lo-Fi & Chill",icon:"",desc:"Master the art of SPACE and GROOVE. Less is more!",theme:"from-slate-500 to-indigo-600",borderColor:"border-indigo-700",scenarioIndex:1,difficulty:"Beginner",concepts:["Swing feel","Sparse patterns","Chord pads"]},{name:" House Music 101",icon:"",desc:"The classic FOUR-ON-THE-FLOOR and offbeat hi-hats!",theme:"from-pink-500 to-purple-600",borderColor:"border-purple-700",scenarioIndex:2,difficulty:"Beginner",concepts:["Four-on-the-floor","Offbeat hi-hats","Synth stabs"]},{name:" World: Afrobeat",icon:"",desc:"Learn POLYRHYTHM - multiple rhythms playing together!",theme:"from-orange-500 to-red-600",borderColor:"border-red-700",scenarioIndex:3,difficulty:"Intermediate",concepts:["Syncopation","Polyrhythm","World rhythms"]},{name:" Drum & Bass",icon:"",desc:"Fast, intense, rolling breaks and heavy bass!",theme:"from-indigo-500 to-violet-600",borderColor:"border-violet-700",scenarioIndex:4,difficulty:"Intermediate",concepts:["Two-step pattern","Snare rolls","Rolling bass"]},{name:" Trap Beats",icon:"",desc:"Hi-hat rolls, heavy 808s, and that BOUNCE!",theme:"from-red-600 to-red-900",borderColor:"border-red-800",scenarioIndex:5,difficulty:"Intermediate",concepts:["Hi-hat rolls","808 bass","Sparse kicks"]},{name:" Reggaeton Dembow",icon:"",desc:"The DEMBOW rhythm that powers Latin hits!",theme:"from-yellow-500 to-orange-600",borderColor:"border-orange-700",scenarioIndex:6,difficulty:"Intermediate",concepts:["Dembow pattern","Latin rhythm","Dance groove"]},{name:" Hip Hop Boom Bap",icon:"",desc:"Classic hip hop - BOOM (kick) BAP (snare)!",theme:"from-amber-600 to-stone-700",borderColor:"border-stone-700",scenarioIndex:7,difficulty:"Beginner",concepts:["Boom bap","Swing","Head-nodding groove"]},{name:" Rock Drumming",icon:"",desc:"Simple, powerful, driving ROCK beat!",theme:"from-gray-600 to-red-800",borderColor:"border-red-900",scenarioIndex:8,difficulty:"Beginner",concepts:["Backbeat","Tom fills","Steady rhythm"]},{name:" Techno Hypnosis",icon:"",desc:"Minimal, hypnotic, REPETITIVE trance state!",theme:"from-cyan-500 to-gray-800",borderColor:"border-gray-800",scenarioIndex:9,difficulty:"Intermediate",concepts:["Minimalism","Repetition","Trance rhythm"]}];return o.jsxs("div",{className:"h-screen w-full text-white flex flex-col overflow-hidden font-sans relative",children:[o.jsx("style",{children:Gn}),o.jsx(Fr,{theme:Za}),o.jsxs("div",{className:"relative z-10 px-4 sm:px-6 py-4 sm:py-6 flex items-center justify-between border-b border-white/10 bg-black/30 backdrop-blur-sm",children:[o.jsx("button",{onClick:()=>n("modes"),className:"p-2 sm:p-3 bg-white/10 hover:bg-white/20 rounded-xl sm:rounded-2xl shadow-lg transition-all active:scale-95",children:o.jsx(we.ChevronLeft,{})}),o.jsx("h2",{className:"text-xl sm:text-3xl font-black bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:" TUTORIALS"}),o.jsx("div",{className:"w-10 sm:w-12"})]}),o.jsxs("div",{className:"relative z-10 flex-1 overflow-y-auto p-4 sm:p-6 space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[o.jsx("p",{className:"text-cyan-300/80 text-sm sm:text-lg font-medium",children:"Learn different music styles step by step!"}),o.jsx("p",{className:"text-white/50 text-xs sm:text-sm mt-1",children:"Each tutorial teaches you real music concepts "})]}),o.jsxs("div",{className:"flex justify-center gap-2 sm:gap-4 mb-3 sm:mb-4",children:[o.jsx("span",{className:"text-[10px] sm:text-xs bg-green-500/20 text-green-400 px-2 sm:px-3 py-1 rounded-full",children:" Beginner"}),o.jsx("span",{className:"text-[10px] sm:text-xs bg-yellow-500/20 text-yellow-400 px-2 sm:px-3 py-1 rounded-full",children:" Intermediate"})]}),g.map((w,E)=>{const O=Bd[w.scenarioIndex],V=()=>{console.log("Tutorial clicked:",w.name,"scenarioIndex:",w.scenarioIndex),R.init();const oe=Bd[w.scenarioIndex];console.log("Selected scenario:",oe);const ge={};Object.keys(Rt).forEach(Y=>ge[Y]=Array(Ge).fill(!1));const ye=oe.tutorial.filter(Y=>Y.targetInstrument).map(Y=>Y.targetInstrument),ue=[...new Set(ye)];console.log("Instruments:",ue),St(ge),y(oe),q(oe.bpm),S(!1),ft(ue),Ua(!0),ll(0),Pn(null),bc({}),i("tutorials"),n("studio")};return o.jsx("button",{onClick:V,className:`w-full p-3 sm:p-5 bg-gradient-to-br ${w.theme} backdrop-blur-sm rounded-2xl sm:rounded-3xl text-left border-b-6 ${w.borderColor} active:border-b-0 active:translate-y-1 transition-all hover:scale-[1.01] shadow-xl`,children:o.jsxs("div",{className:"flex items-start gap-2 sm:gap-4",children:[o.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 bg-white/20 rounded-xl sm:rounded-2xl flex items-center justify-center text-xl sm:text-3xl shrink-0",children:w.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap",children:[o.jsx("div",{className:"text-sm sm:text-xl font-black",children:w.name}),o.jsxs("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full font-bold ${w.difficulty==="Beginner"?"bg-green-500/50 text-green-100":"bg-yellow-500/50 text-yellow-100"}`,children:[w.difficulty==="Beginner"?"":""," ",w.difficulty]})]}),o.jsx("div",{className:"text-sm opacity-90 mt-1",children:w.desc}),o.jsxs("div",{className:"mt-2 flex gap-2 flex-wrap",children:[o.jsxs("span",{className:"inline-block bg-black/20 px-2 py-1 rounded-lg text-xs font-bold",children:[" ",O.tutorial?.length||5," Steps"]}),o.jsxs("span",{className:"inline-block bg-black/20 px-2 py-1 rounded-lg text-xs font-bold",children:[" ",O.bpm," BPM"]})]}),o.jsx("div",{className:"mt-2 flex gap-1 flex-wrap",children:w.concepts.map((oe,ge)=>o.jsx("span",{className:"text-[10px] bg-white/10 px-2 py-0.5 rounded-full",children:oe},ge))})]}),o.jsx(we.ChevronRight,{})]})},w.name)})]})]})}if(l==="library")return o.jsxs("div",{className:"h-screen w-full text-white flex flex-col overflow-hidden font-sans relative",children:[o.jsx("style",{children:Gn}),o.jsx(Fr,{theme:Za}),o.jsx(nn,{}),o.jsxs("div",{className:"relative z-10 px-4 sm:px-6 py-4 sm:py-6 flex items-center justify-between border-b border-white/10 bg-black/30 backdrop-blur-sm",children:[o.jsx("button",{onClick:()=>n("modes"),className:"p-2 sm:p-3 bg-white/10 hover:bg-white/20 rounded-xl sm:rounded-2xl shadow-lg transition-all active:scale-95",children:o.jsx(we.ChevronLeft,{})}),o.jsx("h2",{className:"text-xl sm:text-3xl font-black bg-gradient-to-r from-amber-400 via-orange-400 to-pink-400 bg-clip-text text-transparent",children:" BEAT LIBRARY"}),o.jsx("div",{className:"w-10 sm:w-12"})]}),o.jsx("div",{className:"relative z-10 flex-1 overflow-y-auto p-6 space-y-4",children:wy.map((g,w)=>o.jsxs("button",{onClick:()=>{R.init();const E={};Object.keys(Rt).forEach(V=>{E[V]=Array(Ge).fill(!1),g.pattern[V]&&g.pattern[V].forEach(oe=>{E[V][oe]=!0})}),St(E);const O=Object.keys(g.pattern).filter(V=>g.pattern[V].length>0);ft(V=>{const oe=new Set([...V,...O]);return Array.from(oe)}),Pn(null),Ua(!1),y(Bd[1]),i("library"),n("studio")},className:"w-full p-5 bg-white/10 backdrop-blur-md hover:bg-white/20 rounded-2xl text-left flex items-center gap-4 transition-all border border-white/10 hover:border-white/30 hover:scale-[1.01]",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center text-2xl shadow-lg",children:w+1}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-xl font-black",children:g.name}),o.jsx("div",{className:"text-sm opacity-70 mt-1",children:g.desc}),o.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:Object.keys(g.pattern).filter(E=>g.pattern[E].length>0).map(E=>o.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full capitalize",children:E},E))})]}),o.jsx(we.ChevronRight,{})]},g.name))})]});if(l==="settings")return o.jsxs("div",{className:"h-screen w-full text-white flex flex-col overflow-hidden font-sans relative",children:[o.jsx("style",{children:Gn}),o.jsx(Fr,{theme:Za}),o.jsx(nn,{}),o.jsxs("div",{className:"relative z-10 px-4 sm:px-6 py-4 sm:py-6 flex items-center justify-between border-b border-white/10 bg-black/30 backdrop-blur-sm",children:[o.jsx("button",{onClick:()=>n("splash"),className:"p-2 sm:p-3 bg-white/10 hover:bg-white/20 rounded-xl sm:rounded-2xl shadow-lg transition-all active:scale-95","aria-label":W("back"),children:o.jsx(we.ChevronLeft,{})}),o.jsxs("h2",{className:"text-xl sm:text-3xl font-black bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:[" ",W("settings").toUpperCase()]}),o.jsx("div",{className:"w-10 sm:w-12"})]}),o.jsxs("div",{className:"relative z-10 flex-1 overflow-y-auto p-6 space-y-6",children:[o.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-3xl p-6 border border-purple-500/30",children:[o.jsxs("h3",{className:"text-xl font-black mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center",children:""}),W("masterVolume")]}),o.jsx("input",{type:"range",min:"0",max:"100",defaultValue:"70",className:"w-full h-3 bg-white/20 rounded-lg appearance-none cursor-pointer accent-cyan-400"})]}),o.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-3xl p-6 border border-purple-500/30",children:[o.jsxs("h3",{className:"text-xl font-black mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-pink-400 to-rose-500 rounded-xl flex items-center justify-center",children:""}),W("backgroundMusic")]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-white/80",children:"Ambient music on menus"}),o.jsx("button",{onClick:()=>mn(!Pa),className:`w-16 h-8 rounded-full transition-all duration-300 ${Pa?"bg-gradient-to-r from-cyan-400 to-purple-500":"bg-white/20"}`,children:o.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-300 ${Pa?"translate-x-9":"translate-x-1"}`})})]}),o.jsx("p",{className:"text-xs text-white/50 mt-2",children:"Music automatically stops during beat creation and tutorials"})]}),o.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-3xl p-6 border border-purple-500/30",children:[o.jsxs("h3",{className:"text-xl font-black mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-violet-400 to-purple-500 rounded-xl flex items-center justify-center",children:""}),W("visualThemes")]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:Xd.map(g=>o.jsxs("button",{onClick:()=>Ri(g),className:`p-3 rounded-2xl bg-gradient-to-br ${g.primary} hover:scale-105 transition-all flex flex-col items-center gap-2 ${Za.id===g.id?"ring-4 ring-white shadow-lg scale-105":"opacity-70 hover:opacity-100"}`,children:[o.jsxs("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:[g.id==="ocean"&&"",g.id==="sunset"&&"",g.id==="golden"&&"",g.id==="forest"&&"",g.id==="neon"&&"",g.id==="midnight"&&""]}),o.jsx("span",{className:"text-xs font-bold",children:g.name})]},g.id))})]}),o.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 backdrop-blur-md rounded-3xl p-6 border-2 border-yellow-500/50",children:[o.jsxs("h3",{className:"text-xl font-black mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center",children:""}),W("accessibility")]}),o.jsx("p",{className:"text-sm text-white/70 mb-4",children:"Make the app easier to use for everyone"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/30 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:W("textToSpeech")}),o.jsx("div",{className:"text-xs opacity-70",children:W("textToSpeechDesc")})]})]}),o.jsx("button",{onClick:()=>{if(dr(!$t),!$t){const g=new SpeechSynthesisUtterance("Text to speech enabled. Hover over buttons to hear descriptions.");window.speechSynthesis.speak(g)}},"aria-label":$t?"Disable text to speech":"Enable text to speech",className:`w-16 h-8 rounded-full transition-all duration-300 ${$t?"bg-gradient-to-r from-yellow-400 to-orange-500":"bg-white/20"}`,children:o.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-300 ${$t?"translate-x-9":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/30 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:W("highContrast")}),o.jsx("div",{className:"text-xs opacity-70",children:W("highContrastDesc")})]})]}),o.jsx("button",{onClick:()=>Wa(!Jt),"aria-label":Jt?"Disable high contrast mode":"Enable high contrast mode",className:`w-16 h-8 rounded-full transition-all duration-300 ${Jt?"bg-gradient-to-r from-yellow-400 to-orange-500":"bg-white/20"}`,children:o.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-300 ${Jt?"translate-x-9":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/30 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:W("largeText")}),o.jsx("div",{className:"text-xs opacity-70",children:W("largeTextDesc")})]})]}),o.jsx("button",{onClick:()=>hr(!Wt),"aria-label":Wt?"Disable large text mode":"Enable large text mode",className:`w-16 h-8 rounded-full transition-all duration-300 ${Wt?"bg-gradient-to-r from-yellow-400 to-orange-500":"bg-white/20"}`,children:o.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-300 ${Wt?"translate-x-9":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/30 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:W("keyboardNav")}),o.jsx("div",{className:"text-xs opacity-70",children:W("keyboardNavDesc")})]})]}),o.jsx("button",{onClick:()=>Es(!yn),"aria-label":yn?"Disable keyboard navigation mode":"Enable keyboard navigation mode",className:`w-16 h-8 rounded-full transition-all duration-300 ${yn?"bg-gradient-to-r from-yellow-400 to-orange-500":"bg-white/20"}`,children:o.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-300 ${yn?"translate-x-9":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-2xl border border-purple-400/30",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:W("voiceControl")}),o.jsx("div",{className:"text-xs opacity-70",children:W("voiceControlDesc")})]})]}),o.jsx("button",{onClick:async()=>{if(At)fr(!1);else try{await navigator.mediaDevices.getUserMedia({audio:!0}),fr(!0);const g=new SpeechSynthesisUtterance("Microphone enabled. Voice control is now active. Say help to hear available commands.");window.speechSynthesis.speak(g)}catch{const w=new SpeechSynthesisUtterance("Microphone access denied. Please allow microphone access in your browser to use voice control.");window.speechSynthesis.speak(w),alert(` Microphone access required!

Please allow microphone access in your browser to use voice control.

Click the microphone icon in your browser's address bar to enable it.`)}},"aria-label":At?"Disable voice control":"Enable voice control for hands-free use",className:`w-16 h-8 rounded-full transition-all duration-300 ${At?"bg-gradient-to-r from-purple-400 to-pink-500":"bg-white/20"}`,children:o.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-300 ${At?"translate-x-9":"translate-x-1"}`})})]}),At&&o.jsxs("div",{className:"p-4 bg-purple-500/20 rounded-2xl border border-purple-400/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${en?"bg-green-400 animate-pulse":"bg-red-400"}`}),o.jsx("span",{className:"font-bold text-sm",children:en?" Listening...":" Not listening"})]}),Qn&&o.jsxs("div",{className:"text-xs opacity-70 mb-3",children:['Last command: "',Qn,'"']}),o.jsxs("div",{className:"text-xs opacity-80",children:[o.jsx("div",{className:"font-bold mb-2",children:" Say these commands:"}),o.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[o.jsx("span",{children:' "Play" / "Stop"'}),o.jsx("span",{children:' "Go home"'}),o.jsx("span",{children:' "DJ mode"'}),o.jsx("span",{children:' "Free play"'}),o.jsx("span",{children:' "Faster" / "Slower"'}),o.jsx("span",{children:' "Clear"'}),o.jsx("span",{children:' "Go back"'}),o.jsx("span",{children:' "Help"'})]})]})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-2xl border border-blue-400/30",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:W("language")}),o.jsx("div",{className:"text-xs opacity-70",children:W("languageDesc")})]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(Zn).map(([g,w])=>o.jsxs("button",{onClick:()=>{if(vn(g),localStorage.setItem("rhythmRealm_language",g),$t){const E=new SpeechSynthesisUtterance(`Language changed to ${w.name}`);E.lang=w.code,window.speechSynthesis.speak(E)}},className:`p-2 rounded-xl text-xs font-bold transition-all flex flex-col items-center gap-1 ${La===g?"bg-gradient-to-r from-blue-400 to-cyan-500 text-black":"bg-white/10 hover:bg-white/20"}`,"aria-label":`Change language to ${w.name}`,children:[o.jsx("span",{className:"text-lg",children:w.flag}),o.jsx("span",{children:w.name})]},g))})]}),o.jsx("button",{onClick:()=>{const g=!xn;if(ur(g),dr(g),Wa(g),hr(g),Es(g),fr(g),g){const w=new SpeechSynthesisUtterance("All accessibility features enabled including voice control. Say help to hear voice commands.");window.speechSynthesis.speak(w)}},className:`w-full p-4 rounded-2xl font-bold text-lg transition-all ${xn?"bg-gradient-to-r from-green-400 to-emerald-500 text-black":"bg-gradient-to-r from-yellow-400 to-orange-500 text-black hover:from-yellow-300 hover:to-orange-400"}`,"aria-label":xn?"Disable all accessibility features":"Enable all accessibility features",children:xn?` ${W("allEnabled")}`:` ${W("enableAll")}`}),o.jsxs("div",{className:"p-3 bg-blue-500/20 rounded-2xl border border-blue-400/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"font-bold text-sm",children:"Screen Reader Tips"})]}),o.jsxs("ul",{className:"text-xs opacity-80 space-y-1 ml-6",children:[o.jsx("li",{children:" Use Tab to navigate between buttons"}),o.jsx("li",{children:" Press Enter or Space to activate"}),o.jsx("li",{children:" Arrow keys work in grid areas"}),o.jsx("li",{children:" Escape closes popups and modals"})]})]})]})]}),o.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-3xl p-6 border border-purple-500/30",children:[o.jsxs("h3",{className:"text-xl font-black mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-xl flex items-center justify-center",children:""}),"Sound Packs"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{className:"w-full p-4 bg-white/10 hover:bg-white/20 rounded-2xl text-left flex items-center gap-4 transition-all border-2 border-cyan-400",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold",children:"Classic Kit"}),o.jsx("div",{className:"text-xs opacity-60",children:"Default drum sounds"})]}),o.jsx("span",{className:"text-cyan-400 font-bold",children:"ACTIVE"})]}),o.jsxs("button",{className:"w-full p-4 bg-white/10 hover:bg-white/20 rounded-2xl text-left flex items-center gap-4 transition-all border border-white/10",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold",children:"Electronic"}),o.jsx("div",{className:"text-xs opacity-60",children:"Synth & EDM sounds"})]})]}),o.jsxs("button",{className:"w-full p-4 bg-white/10 hover:bg-white/20 rounded-2xl text-left flex items-center gap-4 transition-all border border-white/10",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold",children:"Rock Band"}),o.jsx("div",{className:"text-xs opacity-60",children:"Guitar & drums"})]})]})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/20",children:[o.jsxs("h3",{className:"text-xl font-black mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-slate-400 to-slate-500 rounded-xl flex items-center justify-center",children:""}),W("about")]}),o.jsxs("div",{className:"space-y-2 text-sm opacity-80",children:[o.jsxs("p",{children:[o.jsx("strong",{children:W("appTitle")})," v1.0.0"]}),o.jsx("p",{children:"A creative music-making experience"}),o.jsx("p",{className:"text-xs opacity-60 mt-4",children:"Made with  using React & Web Audio API"})]})]})]})]});if(l==="djmode"){const g=[{id:"house",name:"House",icon:"",bpm:128,pattern:{kick:[0,4,8,12,16,20,24,28],snare:[4,12,20,28],hihat:[2,6,10,14,18,22,26,30]}},{id:"hiphop",name:"Hip Hop",icon:"",bpm:90,pattern:{kick:[0,10,16,26],snare:[4,12,20,28],hihat:[0,4,8,12,16,20,24,28]}},{id:"trap",name:"Trap",icon:"",bpm:140,pattern:{kick:[0,14,16,30],snare:[4,12,20,28],hihat:[0,2,4,5,6,8,10,12,13,14,16,18,20,21,22,24,26,28,29,30]}},{id:"techno",name:"Techno",icon:"",bpm:130,pattern:{kick:[0,4,8,12,16,20,24,28],snare:[4,12,20,28],hihat:[2,6,10,14,18,22,26,30]}},{id:"reggaeton",name:"Reggaeton",icon:"",bpm:95,pattern:{kick:[0,6,16,22],snare:[4,10,12,20,26,28],hihat:[0,4,8,12,16,20,24,28]}},{id:"dnb",name:"Drum & Bass",icon:"",bpm:170,pattern:{kick:[0,12,14,16,28,30],snare:[8,24],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30]}},{id:"lofi",name:"Lo-Fi",icon:"",bpm:80,pattern:{kick:[0,10,16,26],snare:[4,20],hihat:[0,4,8,12,16,20,24,28]}},{id:"rock",name:"Rock",icon:"",bpm:120,pattern:{kick:[0,8,16,24],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30]}}],w=[{id:"blinding_lights",name:"Blinding Lights",artist:"The Weeknd Style",icon:"",bpm:171,genre:"Synthwave Pop",color:"from-purple-500 to-pink-500",pattern:{kick:[0,4,8,12,16,20,24,28],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],synth:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,0,8,8,16,16,24,24],keys:[0,6,8,14,16,22,24,30]}},{id:"bad_guy",name:"Bad Guy",artist:"Billie Eilish Style",icon:"",bpm:135,genre:"Dark Pop",color:"from-green-400 to-emerald-600",pattern:{kick:[0,3,8,11,16,19,24,27],snare:[6,14,22,30],hihat:[],bass:[0,3,4,7,8,11,12,15,16,19,20,23,24,27,28,31],synth:[0,8,16,24],perc:[2,6,10,14,18,22,26,30]}},{id:"industry_baby",name:"Industry Baby",artist:"Lil Nas X Style",icon:"",bpm:150,genre:"Hip Hop Pop",color:"from-yellow-400 to-orange-500",pattern:{kick:[0,6,8,12,16,22,24,28],snare:[4,12,20,28],hihat:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],bass:[0,0,6,8,8,14,16,16,22,24,24,30],synth:[0,4,8,12,16,20,24,28],perc:[4,5,12,13,20,21,28,29]}},{id:"stay",name:"Stay",artist:"Kid Laroi Style",icon:"",bpm:170,genre:"Pop/EDM",color:"from-red-400 to-rose-600",pattern:{kick:[0,4,8,12,16,20,24,28],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],synth:[0,1,4,5,8,9,12,13,16,17,20,21,24,25,28,29],bass:[0,4,8,12,16,20,24,28],keys:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30]}},{id:"heat_waves",name:"Heat Waves",artist:"Glass Animals Style",icon:"",bpm:81,genre:"Indie Pop",color:"from-orange-400 to-amber-600",pattern:{kick:[0,6,8,14,16,22,24,30],snare:[8,24],hihat:[4,12,20,28],synth:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,3,8,11,16,19,24,27],keys:[0,8,16,24],perc:[2,6,10,14,18,22,26,30]}},{id:"levitating",name:"Levitating",artist:"Dua Lipa Style",icon:"",bpm:103,genre:"Disco Pop",color:"from-violet-400 to-purple-600",pattern:{kick:[0,4,8,12,16,20,24,28],snare:[4,12,20,28],hihat:[2,6,10,14,18,22,26,30],bass:[0,3,4,6,8,11,12,14,16,19,20,22,24,27,28,30],synth:[0,4,8,12,16,20,24,28],keys:[2,6,10,14,18,22,26,30],perc:[0,4,8,12,16,20,24,28]}},{id:"peaches",name:"Peaches",artist:"Justin Bieber Style",icon:"",bpm:90,genre:"R&B Pop",color:"from-pink-400 to-rose-500",pattern:{kick:[0,10,16,26],snare:[8,24],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],bass:[0,4,8,10,16,20,24,26],keys:[0,3,6,8,11,14,16,19,22,24,27,30],synth:[0,8,16,24]}},{id:"montero",name:"Montero",artist:"Lil Nas X Style",icon:"",bpm:178,genre:"Pop Trap",color:"from-amber-400 to-red-500",pattern:{kick:[0,3,8,11,16,19,24,27],snare:[4,12,20,28],hihat:[0,1,2,4,5,6,8,9,10,12,13,14,16,17,18,20,21,22,24,25,26,28,29,30],bass:[0,3,6,8,11,14,16,19,22,24,27,30],synth:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],lead:[0,8,16,24]}},{id:"save_your_tears",name:"Save Your Tears",artist:"The Weeknd Style",icon:"",bpm:118,genre:"Synth Pop",color:"from-blue-400 to-indigo-600",pattern:{kick:[0,8,16,24],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],synth:[0,4,6,8,12,14,16,20,22,24,28,30],bass:[0,4,8,12,16,20,24,28],keys:[0,2,8,10,16,18,24,26]}},{id:"drivers_license",name:"Drivers License",artist:"Olivia Rodrigo Style",icon:"",bpm:72,genre:"Sad Pop",color:"from-slate-400 to-gray-600",pattern:{kick:[0,16],snare:[8,24],hihat:[],keys:[0,2,4,8,10,12,16,18,20,24,26,28],bass:[0,8,16,24],synth:[0,4,8,12,16,20,24,28]}},{id:"as_it_was",name:"As It Was",artist:"Harry Styles Style",icon:"",bpm:174,genre:"Synth Pop",color:"from-cyan-400 to-teal-500",pattern:{kick:[0,4,8,12,16,20,24,28],snare:[4,12,20,28],hihat:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],synth:[0,3,4,7,8,11,12,15,16,19,20,23,24,27,28,31],bass:[0,4,8,12,16,20,24,28],keys:[0,8,12,16,24,28]}},{id:"watermelon_sugar",name:"Watermelon Sugar",artist:"Harry Styles Style",icon:"",bpm:95,genre:"Funk Pop",color:"from-green-400 to-lime-500",pattern:{kick:[0,6,8,14,16,22,24,30],snare:[4,12,20,28],hihat:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],bass:[0,3,6,8,11,14,16,19,22,24,27,30],keys:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],perc:[4,12,20,28]}}],E=[{id:"airhorn",name:"Air Horn",icon:"",color:"from-yellow-400 to-orange-500"},{id:"scratch",name:"Scratch",icon:"",color:"from-cyan-400 to-blue-500"},{id:"siren",name:"Siren",icon:"",color:"from-red-400 to-pink-500"},{id:"laser",name:"Laser",icon:"",color:"from-purple-400 to-indigo-500"},{id:"bomb",name:"Bomb Drop",icon:"",color:"from-gray-600 to-gray-800"},{id:"yeah",name:"Yeah!",icon:"",color:"from-green-400 to-emerald-500"},{id:"reverse",name:"Reverse",icon:"",color:"from-pink-400 to-rose-500"},{id:"buildup",name:"Build Up",icon:"",color:"from-amber-400 to-yellow-500"}],O=Y=>{R.init();const J=R.ctx.currentTime;if(Y==="airhorn"){const X=R.ctx.createOscillator(),ne=R.ctx.createGain();X.type="sawtooth",X.frequency.setValueAtTime(400,J),X.frequency.exponentialRampToValueAtTime(600,J+.1),X.frequency.setValueAtTime(600,J+.1),X.frequency.exponentialRampToValueAtTime(400,J+.3),ne.gain.setValueAtTime(.4,J),ne.gain.exponentialRampToValueAtTime(.01,J+.5),X.connect(ne),ne.connect(R.masterGain),X.start(J),X.stop(J+.5)}else if(Y==="scratch"){R.ctx.createOscillator(),R.ctx.createGain();const X=R.ctx.createBufferSource(),ne=R.ctx.createBuffer(1,R.ctx.sampleRate*.3,R.ctx.sampleRate),Se=ne.getChannelData(0);for(let ta=0;ta<Se.length;ta++)Se[ta]=Math.random()*2-1;X.buffer=ne;const qe=R.ctx.createGain(),rt=R.ctx.createBiquadFilter();rt.type="bandpass",rt.frequency.setValueAtTime(1e3,J),rt.frequency.exponentialRampToValueAtTime(3e3,J+.1),rt.frequency.exponentialRampToValueAtTime(500,J+.2),rt.Q.value=2,qe.gain.setValueAtTime(.3,J),qe.gain.exponentialRampToValueAtTime(.01,J+.3),X.connect(rt),rt.connect(qe),qe.connect(R.masterGain),X.start(J),X.stop(J+.3)}else if(Y==="siren"){const X=R.ctx.createOscillator(),ne=R.ctx.createGain();X.type="sine",X.frequency.setValueAtTime(600,J);for(let Se=0;Se<4;Se++)X.frequency.exponentialRampToValueAtTime(1200,J+Se*.25+.125),X.frequency.exponentialRampToValueAtTime(600,J+Se*.25+.25);ne.gain.setValueAtTime(.25,J),ne.gain.exponentialRampToValueAtTime(.01,J+1),X.connect(ne),ne.connect(R.masterGain),X.start(J),X.stop(J+1)}else if(Y==="laser"){const X=R.ctx.createOscillator(),ne=R.ctx.createGain();X.type="sawtooth",X.frequency.setValueAtTime(2e3,J),X.frequency.exponentialRampToValueAtTime(100,J+.3),ne.gain.setValueAtTime(.3,J),ne.gain.exponentialRampToValueAtTime(.01,J+.3),X.connect(ne),ne.connect(R.masterGain),X.start(J),X.stop(J+.3)}else if(Y==="bomb"){const X=R.ctx.createOscillator(),ne=R.ctx.createGain();X.type="sine",X.frequency.setValueAtTime(150,J),X.frequency.exponentialRampToValueAtTime(30,J+.8),ne.gain.setValueAtTime(.5,J),ne.gain.exponentialRampToValueAtTime(.01,J+.8),X.connect(ne),ne.connect(R.masterGain),X.start(J),X.stop(J+.8);const Se=R.ctx.createBufferSource(),qe=R.ctx.createBuffer(1,R.ctx.sampleRate*.2,R.ctx.sampleRate),rt=qe.getChannelData(0);for(let Rl=0;Rl<rt.length;Rl++)rt[Rl]=Math.random()*2-1;Se.buffer=qe;const ta=R.ctx.createGain();ta.gain.setValueAtTime(.4,J),ta.gain.exponentialRampToValueAtTime(.01,J+.2),Se.connect(ta),ta.connect(R.masterGain),Se.start(J),Se.stop(J+.2)}else if(Y==="yeah"){const X=R.ctx.createOscillator(),ne=R.ctx.createGain();X.type="triangle",X.frequency.setValueAtTime(200,J),X.frequency.exponentialRampToValueAtTime(400,J+.2),X.frequency.setValueAtTime(400,J+.2),X.frequency.exponentialRampToValueAtTime(350,J+.5),ne.gain.setValueAtTime(.3,J),ne.gain.exponentialRampToValueAtTime(.01,J+.5),X.connect(ne),ne.connect(R.masterGain),X.start(J),X.stop(J+.5)}else if(Y==="reverse"){const X=R.ctx.createOscillator(),ne=R.ctx.createGain();X.type="sawtooth",X.frequency.setValueAtTime(100,J),X.frequency.exponentialRampToValueAtTime(800,J+.4),ne.gain.setValueAtTime(.01,J),ne.gain.linearRampToValueAtTime(.3,J+.3),ne.gain.exponentialRampToValueAtTime(.01,J+.4),X.connect(ne),ne.connect(R.masterGain),X.start(J),X.stop(J+.4)}else if(Y==="buildup"){const X=R.ctx.createBufferSource(),ne=R.ctx.createBuffer(1,R.ctx.sampleRate*2,R.ctx.sampleRate),Se=ne.getChannelData(0);for(let ta=0;ta<Se.length;ta++)Se[ta]=Math.random()*2-1;X.buffer=ne;const qe=R.ctx.createBiquadFilter();qe.type="highpass",qe.frequency.setValueAtTime(100,J),qe.frequency.exponentialRampToValueAtTime(5e3,J+1.5);const rt=R.ctx.createGain();rt.gain.setValueAtTime(.1,J),rt.gain.linearRampToValueAtTime(.4,J+1.5),rt.gain.exponentialRampToValueAtTime(.01,J+2),X.connect(qe),qe.connect(rt),rt.connect(R.masterGain),X.start(J),X.stop(J+2)}},V=(Y,J)=>{if(Je[Y]?.id===J.id){oe(Y);return}Di(ne=>({...ne,[Y]:J})),q(J.bpm);const X={};Object.keys(Rt).forEach(ne=>X[ne]=Array(Ge).fill(!1)),Object.entries(J.pattern).forEach(([ne,Se])=>{X[ne]&&Se.forEach(qe=>{qe<Ge&&(X[ne][qe]=!0)})}),St(X),ft(Object.keys(J.pattern)),Nt&&(ke===0&&Y==="left"?setTimeout(()=>Ta(1),500):ke===2&&Y==="right"&&setTimeout(()=>Ta(3),500))},oe=Y=>{if(Di(X=>({...X,[Y]:null})),hl(X=>({...X,[Y]:!1})),!Je[Y==="left"?"right":"left"]){const X={};Object.keys(Rt).forEach(ne=>X[ne]=Array(Ge).fill(!1)),St(X)}},ge=[{title:"Welcome to DJ Mode! ",text:"Let's learn to mix like a pro! First, load a track on DECK A. Tap any track in the TRENDING TRACKS section above!",target:"tracks",action:"load_left"},{title:"Great Choice! ",text:"Now hit the PLAY button to start the beat! The turntable will spin when playing.",target:"play",action:"play"},{title:"Load Deck B! ",text:"Real DJs mix between TWO decks! Load a different track on DECK B using the quick beats below the right turntable.",target:"deck_right",action:"load_right"},{title:"Try the Crossfader! ",text:"The CROSSFADER blends between Deck A and Deck B. Slide it left for Deck A, right for Deck B!",target:"crossfader",action:"crossfader"},{title:"FX Pads! ",text:"Tap the FX PADS to trigger sound effects! Try the AIR HORN or SCRATCH - these are classic DJ moves!",target:"fx",action:"fx"},{title:"Control the BPM! ",text:"Use the BPM controls to speed up or slow down the beat. Try to match tempos between decks!",target:"bpm",action:"bpm"},{title:"Loop It! ",text:"Press LOOP on either deck to keep a section repeating. Great for building energy!",target:"loop",action:"loop"},{title:"You're a DJ Now! ",text:"You've learned the basics! Experiment with mixing tracks, effects, and creating your own style. HAVE FUN!",target:null,action:"complete"}],ye=ge[ke],ue=Y=>{Nt&&(ke===1&&Y==="play"?setTimeout(()=>Ta(2),500):ke===3&&Y==="crossfader"?setTimeout(()=>Ta(4),500):ke===4&&Y==="fx"?setTimeout(()=>Ta(5),500):ke===5&&Y==="bpm"?setTimeout(()=>Ta(6),500):ke===6&&Y==="loop"&&setTimeout(()=>Ta(7),500))};return o.jsxs("div",{className:`h-screen w-full text-white flex flex-col overflow-hidden font-sans relative bg-gradient-to-b from-gray-900 via-slate-900 to-black ${Jt?"high-contrast":""} ${Wt?"large-text":""}`,role:"main","aria-label":"DJ Mode - Live Performance Studio",children:[o.jsx("style",{children:Gn}),o.jsx("a",{href:"#dj-decks",className:"skip-link",onFocus:()=>Ue("Skip to DJ decks"),children:"Skip to DJ controls"}),o.jsx(Bs,{}),Nt&&ye&&o.jsxs("div",{className:"absolute top-16 left-1/2 -translate-x-1/2 z-50 max-w-sm w-[90%] animate-bounce-in",role:"dialog","aria-modal":"true","aria-label":"DJ Tutorial",children:[o.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-purple-600 rounded-2xl p-4 shadow-2xl border-2 border-white/30",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"text-3xl animate-bounce","aria-hidden":"true",children:[ke===0&&"",ke===1&&"",ke===2&&"",ke===3&&"",ke===4&&"",ke===5&&"",ke===6&&"",ke===7&&""]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"text-xs font-bold bg-white/20 px-2 py-0.5 rounded-full",children:["Step ",ke+1,"/",ge.length]}),o.jsx("button",{onClick:()=>cr(!1),className:"text-white/60 hover:text-white text-xs",children:"Skip "})]}),o.jsx("h3",{className:"font-black text-lg mb-1",children:ye.title}),o.jsx("p",{className:"text-sm text-white/90 leading-snug",children:ye.text}),ke===7&&o.jsx("button",{onClick:()=>cr(!1),className:"mt-3 w-full py-2 bg-white text-purple-600 font-bold rounded-xl hover:bg-white/90 transition-all",children:"Start Mixing! "})]})]})}),ye.target&&o.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-purple-600"})]}),o.jsxs("div",{className:"relative z-10 px-4 py-3 flex items-center justify-between border-b border-cyan-500/30 bg-black/60 backdrop-blur-md",children:[o.jsx("button",{onClick:()=>{S(!1),cr(!1),n("modes")},className:"p-2 bg-white/10 hover:bg-white/20 rounded-xl text-white transition-all",children:o.jsx(we.ChevronLeft,{})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-3xl animate-pulse",children:""}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-black bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"DJ MODE"}),o.jsx("div",{className:"text-xs text-cyan-400/70",children:"Live Performance"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{cr(!Nt),Ta(0)},className:`p-2 rounded-xl transition-all ${Nt?"bg-purple-500 text-white":"bg-white/10 hover:bg-white/20 text-white"}`,title:"DJ Tutorial",children:o.jsx(we.GradCap,{})}),o.jsx("div",{className:"bg-black/50 px-3 py-1.5 rounded-lg border border-cyan-500/30",children:o.jsxs("span",{className:"text-cyan-400 font-mono font-bold",children:[k," BPM"]})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.jsxs("div",{className:`bg-gradient-to-r from-purple-900/40 via-slate-800/60 to-cyan-900/40 rounded-2xl p-4 border border-white/20 transition-all ${Nt&&ke===0?"ring-4 ring-yellow-400 animate-pulse":""}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h2",{className:"text-lg font-black flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""})," TRENDING TRACKS"]}),o.jsxs("span",{className:"text-xs text-white/50",children:["Tap to load  ",w.length," tracks"]})]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 max-h-40 overflow-y-auto",children:w.map(Y=>o.jsxs("button",{onClick:()=>V("left",Y),className:`p-2 bg-gradient-to-br ${Y.color} rounded-xl text-left transition-all hover:scale-105 active:scale-95 shadow-lg`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:Y.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-xs font-black truncate",children:Y.name}),o.jsx("div",{className:"text-[9px] opacity-70 truncate",children:Y.artist})]})]}),o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o.jsxs("span",{className:"text-[8px] bg-black/30 px-1.5 py-0.5 rounded",children:[Y.bpm," BPM"]}),o.jsx("span",{className:"text-[8px] bg-black/30 px-1.5 py-0.5 rounded",children:Y.genre})]})]},Y.id))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-4 border border-cyan-500/30 shadow-lg shadow-cyan-500/10",children:[o.jsxs("div",{className:"text-center mb-3",children:[o.jsx("span",{className:"text-xs font-bold text-cyan-400 uppercase tracking-wider",children:"Deck A"}),o.jsx("div",{className:"text-lg font-black mt-1",children:Je.left?.name||"Empty"}),Je.left?.artist&&o.jsx("div",{className:"text-xs text-cyan-400/70",children:Je.left.artist})]}),o.jsxs("div",{className:"relative w-full aspect-square max-w-[150px] mx-auto mb-3",children:[o.jsxs("div",{className:`w-full h-full rounded-full bg-gradient-to-br from-slate-700 to-slate-900 border-4 border-slate-600 shadow-inner flex items-center justify-center ${v&&Je.left?"animate-spin-slow":""}`,style:{animationDuration:"2s"},children:[o.jsx("div",{className:`w-1/3 h-1/3 rounded-full bg-gradient-to-br ${Je.left?.color||"from-cyan-500 to-blue-600"} flex items-center justify-center text-2xl shadow-lg`,children:Je.left?.icon||""}),o.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-600/50"}),o.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-600/30"}),o.jsx("div",{className:"absolute inset-12 rounded-full border border-slate-600/20"})]}),o.jsx("div",{className:`absolute -right-2 top-0 w-1 h-16 bg-gradient-to-b from-gray-400 to-gray-600 rounded-full origin-top transition-transform ${Je.left?"rotate-[30deg]":"rotate-0"}`})]}),o.jsxs("div",{className:`flex justify-center gap-2 mb-3 transition-all ${Nt&&ke===6?"ring-2 ring-yellow-400 rounded-xl p-1":""}`,children:[o.jsx("button",{onClick:()=>{Je.left&&(hl(Y=>({...Y,left:!Y.left})),ue("loop"))},className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${dl.left?"bg-cyan-500 text-black":"bg-slate-700 hover:bg-slate-600"}`,children:" LOOP"}),o.jsx("button",{onClick:()=>Je.left&&O("scratch"),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded-lg text-xs font-bold transition-all",children:" SCRATCH"}),Je.left&&o.jsx("button",{onClick:()=>oe("left"),className:"px-3 py-1.5 bg-red-600 hover:bg-red-500 rounded-lg text-xs font-bold transition-all",title:"Eject track",children:" EJECT"}),o.jsx("button",{onClick:()=>Je.left&&O("scratch"),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded-lg text-xs font-bold transition-all",children:" SCRATCH"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:g.slice(0,4).map(Y=>o.jsxs("button",{onClick:()=>V("left",Y),className:`p-2 rounded-lg text-xs font-bold transition-all ${Je.left?.id===Y.id?"bg-cyan-500 text-black":"bg-slate-700 hover:bg-slate-600"}`,children:[Y.icon," ",Y.name]},Y.id))})]}),o.jsxs("div",{className:`bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-4 border border-purple-500/30 shadow-lg shadow-purple-500/10 transition-all ${Nt&&ke===2?"ring-4 ring-yellow-400 animate-pulse":""}`,children:[o.jsxs("div",{className:"text-center mb-3",children:[o.jsx("span",{className:"text-xs font-bold text-purple-400 uppercase tracking-wider",children:"Deck B"}),o.jsx("div",{className:"text-lg font-black mt-1",children:Je.right?.name||"Empty"}),Je.right?.artist&&o.jsx("div",{className:"text-xs text-purple-400/70",children:Je.right.artist})]}),o.jsxs("div",{className:"relative w-full aspect-square max-w-[150px] mx-auto mb-3",children:[o.jsxs("div",{className:`w-full h-full rounded-full bg-gradient-to-br from-slate-700 to-slate-900 border-4 border-slate-600 shadow-inner flex items-center justify-center ${v&&Je.right?"animate-spin-slow":""}`,style:{animationDuration:"2s"},children:[o.jsx("div",{className:`w-1/3 h-1/3 rounded-full bg-gradient-to-br ${Je.right?.color||"from-purple-500 to-pink-600"} flex items-center justify-center text-2xl shadow-lg`,children:Je.right?.icon||""}),o.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-600/50"}),o.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-600/30"}),o.jsx("div",{className:"absolute inset-12 rounded-full border border-slate-600/20"})]}),o.jsx("div",{className:`absolute -right-2 top-0 w-1 h-16 bg-gradient-to-b from-gray-400 to-gray-600 rounded-full origin-top transition-transform ${Je.right?"rotate-[30deg]":"rotate-0"}`})]}),o.jsxs("div",{className:`flex justify-center gap-2 mb-3 transition-all ${Nt&&ke===6?"ring-2 ring-yellow-400 rounded-xl p-1":""}`,children:[o.jsx("button",{onClick:()=>{Je.right&&(hl(Y=>({...Y,right:!Y.right})),ue("loop"))},className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${dl.right?"bg-purple-500 text-black":"bg-slate-700 hover:bg-slate-600"}`,children:" LOOP"}),o.jsx("button",{onClick:()=>Je.right&&O("scratch"),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded-lg text-xs font-bold transition-all",children:" SCRATCH"}),Je.right&&o.jsx("button",{onClick:()=>oe("right"),className:"px-3 py-1.5 bg-red-600 hover:bg-red-500 rounded-lg text-xs font-bold transition-all",title:"Eject track",children:" EJECT"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:g.slice(4,8).map(Y=>o.jsxs("button",{onClick:()=>V("right",Y),className:`p-2 rounded-lg text-xs font-bold transition-all ${Je.right?.id===Y.id?"bg-purple-500 text-black":"bg-slate-700 hover:bg-slate-600"}`,children:[Y.icon," ",Y.name]},Y.id))})]})]}),o.jsxs("div",{className:`bg-gradient-to-r from-cyan-900/30 via-slate-800 to-purple-900/30 rounded-2xl p-4 border border-white/10 transition-all ${Nt&&ke===3?"ring-4 ring-yellow-400 animate-pulse":""}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-cyan-400",children:"A"}),o.jsx("span",{className:"text-sm font-black text-white/80",children:"CROSSFADER"}),o.jsx("span",{className:"text-xs font-bold text-purple-400",children:"B"})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:qa,onChange:Y=>{Xn(Number(Y.target.value)),ue("crossfader")},className:"w-full h-3 bg-gradient-to-r from-cyan-500 via-slate-600 to-purple-500 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #06b6d4 0%, #06b6d4 ${qa}%, #a855f7 ${qa}%, #a855f7 100%)`}})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:`flex-1 bg-slate-800/80 rounded-2xl p-4 border border-white/10 flex items-center justify-center gap-4 transition-all ${Nt&&ke===1?"ring-4 ring-yellow-400 animate-pulse":""}`,children:[o.jsx("button",{onClick:()=>T(0),className:"w-12 h-12 bg-slate-700 hover:bg-slate-600 rounded-xl flex items-center justify-center text-xl transition-all",children:""}),o.jsx("button",{onClick:()=>{R.init(),S(!v),ue("play")},className:`w-16 h-16 rounded-full flex items-center justify-center text-3xl transition-all shadow-lg ${v?"bg-red-500 hover:bg-red-600 animate-pulse":"bg-green-500 hover:bg-green-600"}`,children:v?"":""}),o.jsx("button",{onClick:()=>T(0),className:"w-12 h-12 bg-slate-700 hover:bg-slate-600 rounded-xl flex items-center justify-center text-xl transition-all",children:""})]}),o.jsxs("div",{className:`bg-slate-800/80 rounded-2xl p-4 border border-white/10 transition-all ${Nt&&ke===5?"ring-4 ring-yellow-400 animate-pulse":""}`,children:[o.jsx("div",{className:"text-xs font-bold text-white/60 mb-2 text-center",children:"BPM"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>{q(Y=>Math.max(60,Y-5)),ue("bpm")},className:"px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded-lg font-bold text-sm",children:"-5"}),o.jsx("button",{onClick:()=>{q(Y=>Math.max(60,Y-1)),ue("bpm")},className:"px-2 py-1 bg-slate-600 hover:bg-slate-500 rounded-lg font-bold text-xs",children:"-1"}),o.jsx("div",{className:"w-12 text-center font-mono text-xl font-black text-cyan-400",children:k}),o.jsx("button",{onClick:()=>{q(Y=>Math.min(200,Y+1)),ue("bpm")},className:"px-2 py-1 bg-slate-600 hover:bg-slate-500 rounded-lg font-bold text-xs",children:"+1"}),o.jsx("button",{onClick:()=>{q(Y=>Math.min(200,Y+5)),ue("bpm")},className:"px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded-lg font-bold text-sm",children:"+5"})]})]})]}),o.jsxs("div",{className:`bg-slate-800/80 rounded-2xl p-4 border border-white/10 transition-all ${Nt&&ke===4?"ring-4 ring-yellow-400 animate-pulse":""}`,children:[o.jsxs("div",{className:"text-sm font-black text-white/80 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""})," FX PADS"]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:E.map(Y=>o.jsxs("button",{onClick:()=>{O(Y.id),ue("fx")},className:`p-3 bg-gradient-to-br ${Y.color} rounded-xl text-center transition-all hover:scale-105 active:scale-95 shadow-lg`,children:[o.jsx("div",{className:"text-2xl mb-1",children:Y.icon}),o.jsx("div",{className:"text-[10px] font-bold text-white/90",children:Y.name})]},Y.id))})]}),o.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-4 border border-white/10",children:[o.jsxs("div",{className:"text-sm font-black text-white/80 mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""})," EFFECTS"]}),o.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{id:"filter",name:"Filter",icon:"",color:"cyan"},{id:"echo",name:"Echo",icon:"",color:"purple"},{id:"flanger",name:"Flanger",icon:"",color:"pink"},{id:"reverb",name:"Reverb",icon:"",color:"amber"}].map(Y=>o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"text-xl mb-1",children:Y.icon}),o.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-700 border-4 border-slate-600 relative cursor-pointer",style:{background:`conic-gradient(from 180deg, ${Y.color==="cyan"?"#06b6d4":Y.color==="purple"?"#a855f7":Y.color==="pink"?"#ec4899":"#f59e0b"} ${ol[Y.id]}%, #374151 ${ol[Y.id]}%)`},onClick:()=>Oi(J=>({...J,[Y.id]:(J[Y.id]+25)%125})),children:o.jsx("div",{className:"absolute inset-2 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold",children:ol[Y.id]})}),o.jsx("div",{className:"text-[10px] font-bold text-white/60 mt-1",children:Y.name})]},Y.id))})]}),o.jsxs("div",{className:"bg-slate-800/80 rounded-2xl p-4 border border-white/10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-black text-white/80",children:" BEAT GRID"}),o.jsxs("span",{className:"text-xs font-mono text-cyan-400",children:["Step: ",_+1,"/32"]})]}),o.jsx("div",{className:"flex gap-0.5",children:[...Array(32)].map((Y,J)=>o.jsx("div",{className:`flex-1 h-8 rounded transition-all ${J===_?"bg-gradient-to-t from-cyan-500 to-purple-500 shadow-lg shadow-cyan-500/50":J%4===0?"bg-slate-600":"bg-slate-700"}`},J))})]})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-cyan-500/20 via-purple-500/10 to-transparent pointer-events-none"})]})}const Qi=()=>{const g=["","","","","","","","",""],w=["#ff6b6b","#4ecdc4","#ffe66d","#95e1d3","#f38181","#aa96da","#fcbad3","#a8d8ea","#ff9a9e"];return o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-20",children:[...Array(20)].map((E,O)=>o.jsx("div",{className:"absolute text-2xl md:text-3xl",style:{left:`${Math.random()*100}%`,top:"-50px",color:w[O%w.length],animation:`note-rain ${3+Math.random()*4}s linear infinite`,animationDelay:`${Math.random()*5}s`,filter:`drop-shadow(0 0 8px ${w[O%w.length]})`,opacity:.8},children:g[O%g.length]},O))})};return o.jsxs("div",{className:`h-screen w-full ${p?p.bgClass:"bg-slate-100"} text-slate-800 flex flex-col font-sans select-none transition-colors duration-500 relative ${Ni?"bass-shake":""} ${Jt?"high-contrast":""} ${Wt?"large-text":""}`,role:"main","aria-label":"Music Studio - Beat Creation",children:[o.jsx("style",{children:Gn}),o.jsx("a",{href:"#beat-grid",className:"skip-link",onFocus:()=>Ue("Skip to beat grid"),children:"Skip to beat grid"}),o.jsx(Bs,{}),o.jsx(nn,{}),v&&o.jsx(Qi,{}),o.jsxs("div",{className:`${at?"h-32":"h-64"} w-full shrink-0 relative z-0 bg-slate-900 overflow-hidden`,"aria-hidden":"true",children:[p?.renderScene&&p.renderScene(he,$i),o.jsxs("div",{className:"absolute top-0 left-0 w-full p-2 sm:p-4 flex justify-between items-start z-10",children:[o.jsx("button",{onClick:()=>{S(!1),n(r||"splash")},className:"p-2 sm:p-3 bg-white/90 rounded-xl sm:rounded-2xl shadow-lg border-b-4 border-white/50 text-slate-600 hover:scale-105 active:scale-95 transition-all",onMouseEnter:()=>Ue("Go back"),onFocus:()=>Ue("Go back"),onMouseLeave:Ke,onBlur:Ke,"aria-label":"Go back to previous screen",children:o.jsx(we.ChevronLeft,{})}),o.jsxs("div",{className:"flex gap-2",role:"toolbar","aria-label":"Studio controls",children:[o.jsx("button",{onClick:()=>{S(!1),n("splash")},className:"p-2 sm:p-3 bg-white/90 rounded-xl sm:rounded-2xl shadow-lg border-b-4 border-white/50 text-slate-600 hover:scale-105 active:scale-95 transition-all",onMouseEnter:()=>Ue("Home"),onFocus:()=>Ue("Home"),onMouseLeave:Ke,onBlur:Ke,"aria-label":"Go to home screen",children:o.jsx(we.Home,{})}),o.jsx("button",{onClick:()=>{Ua(!wt),ll(0)},className:`p-2 sm:p-3 rounded-xl sm:rounded-2xl shadow-lg border-b-4 transition-all ${wt?"bg-indigo-500 text-white border-indigo-700":"bg-white/90 border-white/50 text-indigo-500"}`,onMouseEnter:()=>Ue(wt?"Turn off tutorial":"Turn on tutorial guide"),onFocus:()=>Ue(wt?"Turn off tutorial":"Turn on tutorial guide"),onMouseLeave:Ke,onBlur:Ke,"aria-label":wt?"Disable tutorial":"Enable tutorial","aria-pressed":wt,children:o.jsx(we.GradCap,{})}),o.jsx("button",{onClick:()=>{Xa(!0),et(0)},className:"p-2 sm:p-3 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-xl sm:rounded-2xl shadow-lg border-b-4 border-blue-600 text-white hover:scale-105 active:scale-95 transition-all",onMouseEnter:()=>Ue("Open help tutorial"),onFocus:()=>Ue("Open help tutorial"),onMouseLeave:Ke,onBlur:Ke,"aria-label":"Open interactive help tutorial",title:"Help Tutorial",children:""}),o.jsx("button",{onClick:()=>P(!0),className:`p-2 sm:p-3 rounded-xl sm:rounded-2xl shadow-lg border-b-4 text-white hover:scale-105 active:scale-95 transition-all ${Gt>=50?"bg-green-400 border-green-600":"bg-slate-400 border-slate-600 cursor-not-allowed"}`,disabled:Gt<50,onMouseEnter:()=>Ue(Gt>=50?"Complete and show victory":"Need 50 percent score to complete"),onFocus:()=>Ue(Gt>=50?"Complete and show victory":"Need 50 percent score to complete"),onMouseLeave:Ke,onBlur:Ke,"aria-label":Gt>=50?"Complete and show victory screen":"Victory unavailable - need 50% score",children:o.jsx(we.Star,{})})]})]})]}),wt&&p&&p.tutorial&&o.jsxs("div",{className:"absolute top-2 sm:top-4 left-1/2 -translate-x-1/2 z-50 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-2 sm:px-4 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-xl border-2 border-white animate-bounce-in flex flex-col items-center gap-1 max-w-[90%] sm:max-w-md w-full pointer-events-none",children:[o.jsxs("div",{className:"flex items-center gap-2 w-full",children:[o.jsx("div",{className:"text-lg sm:text-2xl animate-bounce",children:""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"font-bold uppercase tracking-wider text-[8px] sm:text-[10px] text-indigo-200 mb-0.5 flex flex-wrap items-center gap-1",children:[o.jsxs("span",{className:"bg-white/20 px-1.5 py-0.5 rounded-full",children:["Step ",ct+1,"/",p.tutorial.length]}),p.tutorial[ct].targetInstrument&&o.jsxs("span",{className:"bg-green-500 px-1.5 py-0.5 rounded-full animate-pulse",children:[p.tutorial[ct].targetSteps.filter(g=>!Ot[p.tutorial[ct].targetInstrument][g]).length," left"]})]}),o.jsx("div",{className:"font-bold text-sm sm:text-base leading-tight truncate",children:p.tutorial[ct].text})]})]}),p.tutorial[ct].targetInstrument&&o.jsxs("div",{className:"w-full bg-white/10 rounded-lg p-2 mt-1",children:[o.jsxs("div",{className:"text-[10px] sm:text-xs text-indigo-200 mb-1",children:["Tap ",o.jsx("span",{className:"text-yellow-300 font-black",children:"YELLOW"})," squares:"]}),o.jsx("div",{className:"flex gap-0.5 flex-wrap justify-center",children:p.tutorial[ct].targetSteps.map(g=>o.jsx("div",{className:`w-5 h-5 sm:w-6 sm:h-6 rounded flex items-center justify-center text-[10px] sm:text-xs font-bold transition-all ${Ot[p.tutorial[ct].targetInstrument]?.[g]?"bg-green-500 text-white":"bg-yellow-400 text-yellow-900 animate-pulse"}`,children:g+1},g))})]}),!p.tutorial[ct].targetInstrument&&o.jsxs("button",{onClick:()=>{Ua(!1),S(!0)},className:"mt-1 bg-green-500 hover:bg-green-400 text-white font-black px-4 py-2 rounded-full text-sm sm:text-base flex items-center gap-2 shadow-lg pointer-events-auto",children:[o.jsx(we.Play,{})," PLAY YOUR BEAT!"]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden bg-slate-900 relative z-10 rounded-t-3xl shadow-[0_-20px_40px_rgba(0,0,0,0.3)] -mt-6 flex flex-col",children:[at&&o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-slate-800 border-b border-slate-700",children:[o.jsx("button",{onClick:()=>Cl("left"),disabled:jn===0,className:`p-2 rounded-lg ${jn===0?"opacity-30":"bg-slate-700 active:bg-slate-600"}`,children:o.jsx(we.ChevronLeft,{})}),o.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:["Steps ",jn+1,"-",Math.min(jn+ua,Ge)," of ",Ge]}),o.jsx("button",{onClick:()=>Cl("right"),disabled:jn>=Ge-ua,className:`p-2 rounded-lg ${jn>=Ge-ua?"opacity-30":"bg-slate-700 active:bg-slate-600"}`,children:o.jsx(we.ChevronRight,{})})]}),o.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-auto p-2 sm:p-4",children:o.jsxs("div",{className:`${at?"":"min-w-max"} space-y-1 pb-24`,children:[!at&&o.jsxs("div",{className:"flex items-center gap-3 mb-1 p-2",children:[o.jsx("div",{className:"w-[180px] shrink-0 text-xs text-slate-500 text-right pr-2",children:"Click to seek "}),o.jsx("div",{className:"grid gap-0.5 flex-1 p-1",style:{gridTemplateColumns:"repeat(32, minmax(24px, 1fr))"},children:[...Array(Ge)].map((g,w)=>o.jsx("div",{onClick:()=>Vi(w),className:`h-3 rounded-full cursor-pointer transition-all hover:scale-y-150 ${_===w?"bg-cyan-400 shadow-lg shadow-cyan-400/50":w%4===0?"bg-slate-500 hover:bg-slate-400":"bg-slate-800 hover:bg-slate-600"} relative`,children:w%4===0&&o.jsx("span",{className:"text-[10px] font-bold text-slate-500 absolute -top-4 left-1/2 -translate-x-1/2",children:Math.floor(w/4)+1})},w))})]}),De.map(g=>{const w=an[g],E=Rt[g][w],O=Pm.find(ue=>ue.id===g);let V=!1,oe=[];if(wt&&p&&p.tutorial){const ue=p.tutorial[ct];ue&&ue.targetInstrument===g&&(V=!0,oe=ue.targetSteps)}const ge=wt&&!V?"opacity-30 pointer-events-none grayscale":"opacity-100",ye=at?[...Array(ua)].map((ue,Y)=>Y+jn):[...Array(Ge)].map((ue,Y)=>Y);return o.jsxs("div",{className:`relative flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 group rounded-lg p-1.5 sm:p-2 transition-all ${ge} ${V?"bg-indigo-500/20 ring-2 ring-indigo-400 shadow-lg z-20":"hover:bg-slate-800/30"}`,children:[V&&!at&&o.jsx("div",{className:"absolute -left-10 top-1/2 -translate-y-1/2 animate-[bounce_1s_infinite] text-3xl z-50 filter drop-shadow-lg",children:""}),o.jsxs("div",{className:"flex items-center gap-1 w-full sm:w-[180px] shrink-0 relative",children:[o.jsx("button",{onClick:()=>Ms(g),className:`${at?"":"opacity-0 group-hover:opacity-100"} bg-red-500 hover:bg-red-400 text-white rounded-full w-5 h-5 flex items-center justify-center transition-all z-10 shadow-md shrink-0 text-xs`,title:"Remove Track",children:o.jsx(we.Minus,{})}),o.jsxs("button",{onClick:()=>Ka(or===g?null:g),className:"flex items-center gap-1.5 bg-slate-800/80 hover:bg-slate-700 p-1 pr-2 rounded-lg transition-all border border-slate-700/50 active:scale-95 relative",children:[o.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-sm shadow-inner ${O.color} text-white`,children:E.icon}),o.jsxs("div",{className:"flex flex-col text-left",children:[o.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase leading-tight",children:g}),o.jsx("span",{className:"text-[9px] font-bold text-slate-300 truncate w-10",children:E.name})]}),o.jsx("span",{className:"text-[8px] text-slate-500",children:""})]}),or===g&&o.jsxs("div",{className:"absolute top-full left-0 mt-1 z-50 bg-slate-900 border border-slate-700 rounded-xl shadow-2xl p-2 min-w-[200px] animate-bounce-in",onClick:ue=>ue.stopPropagation(),children:[o.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 px-1",children:["Select Sound for ",g]}),o.jsx("div",{className:"grid grid-cols-2 gap-1",children:Rt[g].map((ue,Y)=>o.jsxs("button",{onClick:()=>{_l(J=>({...J,[g]:Y})),R.init(),R.trigger(ue,0,ha[g]||{}),Ka(null)},className:`flex items-center gap-2 p-2 rounded-lg transition-all text-left ${an[g]===Y?`${O.color} text-white shadow-lg`:"bg-slate-800 hover:bg-slate-700 text-slate-300"}`,children:[o.jsx("span",{className:"text-lg",children:ue.icon}),o.jsx("span",{className:"text-xs font-bold",children:ue.name})]},Y))}),o.jsx("button",{onClick:()=>Ka(null),className:"w-full mt-2 p-1.5 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs text-slate-400 font-bold",children:"Close"})]}),o.jsx("button",{onClick:()=>yr(g,"muted",!ha[g]?.muted),className:`w-6 h-6 rounded-md flex items-center justify-center transition-all text-xs ${ha[g]?.muted?"bg-red-500/90 text-white":"bg-slate-800/80 text-slate-400 hover:text-white hover:bg-slate-700 border border-slate-700/50"}`,title:ha[g]?.muted?"Unmute":"Mute",children:ha[g]?.muted?"":""}),o.jsx("button",{onClick:()=>zi(jl===g?null:g),className:`w-6 h-6 rounded-md flex items-center justify-center transition-all text-xs ${jl===g?"bg-indigo-500 text-white":"bg-slate-800/80 text-slate-400 hover:text-white hover:bg-slate-700 border border-slate-700/50"}`,children:o.jsx(we.Sliders,{})}),o.jsx("button",{onClick:()=>Ii(g),className:"w-6 h-6 rounded-md bg-gradient-to-br from-indigo-500 to-purple-600 text-white flex items-center justify-center hover:from-indigo-400 hover:to-purple-500 shadow-sm text-xs",children:o.jsx(we.Wand,{})})]}),jl===g&&ha[g]&&o.jsx(yy,{instKey:g,config:ha[g],onChange:(ue,Y)=>yr(g,ue,Y),onClose:()=>zi(null)}),o.jsx("div",{className:"grid gap-0.5 p-1 bg-slate-950/80 rounded-lg border border-slate-800/50 flex-1",style:{gridTemplateColumns:`repeat(${at?ua:32}, minmax(24px, 1fr))`},children:ye.map(ue=>{const Y=Ot[g][ue],J=_===ue,X=ue%4===0,ne=V&&oe.includes(ue)&&!Y,Se=V&&oe.includes(ue)&&Y;return o.jsxs("button",{onMouseDown:()=>El(g,ue),onMouseEnter:()=>Pi(g,ue),onTouchStart:qe=>{qe.preventDefault(),Ji(g,ue)},className:`
                                 aspect-square rounded transition-all duration-75 ease-out relative overflow-hidden mobile-step
                                 ${Y?`${O.color} shadow-md shadow-current/30 scale-95`:"bg-slate-700/40 border border-slate-600/30 hover:bg-slate-600/50 hover:border-slate-500/50"}
                                 ${J?"ring-2 ring-cyan-400 z-10 brightness-125":""}
                                 ${!Y&&X?"bg-slate-600/50 border-slate-500/40":""} 
                                 ${ne?"bg-yellow-400 border-yellow-500 border-2 shadow-[0_0_15px_rgba(250,204,21,0.8)] z-30":""}
                                 ${Se?"ring-2 ring-green-400 shadow-[0_0_10px_rgba(74,222,128,0.6)]":""}
                               `,style:ne?{animation:"pulse 0.5s ease-in-out infinite"}:{},children:[ne&&o.jsx("span",{className:"absolute inset-0 rounded bg-yellow-300 animate-ping opacity-50 pointer-events-none"}),ne&&o.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-black text-yellow-900 pointer-events-none",children:"!"}),Se&&o.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs pointer-events-none",children:""})]},ue)})})]},g)}),De.length<12&&o.jsx("div",{className:`${at?"pl-2":"ml-[180px] pl-3"} pt-3`,children:Jn?o.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl p-4 animate-bounce-in w-full max-w-3xl shadow-2xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h4",{className:"text-white font-black text-sm uppercase tracking-wide",children:" All Instruments"}),o.jsx("button",{onClick:()=>Kn(!1),className:"text-slate-400 hover:text-white p-1 hover:bg-slate-800 rounded-lg transition-all",children:o.jsx(we.Close,{})})]}),o.jsx("p",{className:"text-[10px] text-slate-500 mb-3",children:"Click to add  Green = already added"}),o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:Pm.map(g=>{const w=De.includes(g.id),E=Rt[g.id][0];return o.jsxs("button",{onClick:()=>!w&&Gi(g.id),disabled:w,className:`flex flex-col items-center gap-1 p-3 rounded-xl transition-all text-center ${w?"bg-green-500/20 border-2 border-green-500/50 cursor-default":"bg-slate-800 border border-slate-700 hover:border-slate-500 hover:bg-slate-700 active:scale-95 cursor-pointer"}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-xl ${g.color} flex items-center justify-center text-xl shadow-lg ${w?"opacity-60":""}`,children:E.icon}),o.jsx("span",{className:`text-xs font-bold ${w?"text-green-400":"text-slate-300"}`,children:g.name}),w&&o.jsx("span",{className:"text-[8px] text-green-400 font-bold",children:" ADDED"})]},g.id)})}),o.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700 flex justify-between items-center",children:[o.jsxs("span",{className:"text-xs text-slate-500",children:[De.length,"/12 tracks added"]}),o.jsx("button",{onClick:()=>Kn(!1),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs font-bold text-slate-300 transition-all",children:"Done"})]})]}):o.jsxs("button",{onClick:()=>Kn(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800/60 border-2 border-dashed border-slate-600/50 rounded-lg text-slate-400 hover:text-white hover:border-slate-400 hover:bg-slate-700 transition-all font-bold text-xs active:scale-95",children:[o.jsx(we.Plus,{})," ADD TRACK"]})})]})})]}),o.jsx("div",{className:"bg-slate-900 border-t border-slate-700 px-3 sm:px-6 py-2 shrink-0",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs("span",{className:"text-xs font-mono text-slate-400 w-10 sm:w-12 text-right",children:[Math.floor(_/4)+1,":",_%4+1]}),o.jsxs("div",{ref:Sl,className:"flex-1 h-8 sm:h-10 bg-slate-800 rounded-xl cursor-pointer relative overflow-hidden group touch-none",onClick:Ds,onMouseDown:g=>{Fn(!0),Ds(g)},onMouseMove:g=>Li&&Ds(g),onMouseUp:()=>Fn(!1),onMouseLeave:()=>Fn(!1),onTouchStart:g=>{Fn(!0),Ds(g)},onTouchMove:g=>Li&&Ds(g),onTouchEnd:()=>Fn(!1),children:[o.jsx("div",{className:"absolute inset-0 flex",children:[...Array(8)].map((g,w)=>o.jsx("div",{className:`flex-1 border-r border-slate-700 ${w%2===0?"bg-slate-800":"bg-slate-750"}`,children:o.jsx("span",{className:"text-[8px] sm:text-[10px] text-slate-500 ml-1",children:w+1})},w))}),o.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-cyan-500/40 to-purple-500/40 transition-all duration-75",style:{width:`${_/Ge*100}%`}}),o.jsxs("div",{className:"absolute top-0 bottom-0 w-1 bg-cyan-400 shadow-lg shadow-cyan-500/50 transition-all duration-75",style:{left:`${_/Ge*100}%`},children:[o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-cyan-400 rounded-full shadow-lg"}),o.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-cyan-400 rounded-full shadow-lg"})]}),o.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"})]}),o.jsxs("span",{className:"text-xs font-mono text-slate-400 w-10 sm:w-12",children:[Ge/4,":4"]})]})}),o.jsxs("div",{className:"h-auto sm:h-24 bg-white border-t-2 border-slate-100 flex flex-wrap sm:flex-nowrap items-center justify-center gap-2 sm:gap-3 shrink-0 z-20 shadow-[0_-10px_30px_rgba(0,0,0,0.05)] px-2 sm:px-4 py-2 sm:py-0 mobile-controls",children:[o.jsx("div",{className:`flex items-center ${at?"order-first w-full justify-center mb-2":""} gap-3 sm:gap-6 bg-slate-50 px-3 sm:px-6 py-2 rounded-[2rem] border border-slate-100`,children:o.jsx("button",{onClick:()=>{R.init(),v||Ft(g=>({...g,hasPlayedBeat:!0})),S(!v)},className:`w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center transition-all duration-200 transform border-b-8 active:border-b-0 active:translate-y-2 ${v?"bg-red-500 border-red-700 text-white":"bg-green-500 border-green-700 text-white hover:bg-green-400"}`,children:v?o.jsx(we.Stop,{}):o.jsx(we.Play,{})})}),o.jsx(Ud,{onClick:Yi,variant:"secondary",className:"w-10 h-10 sm:w-12 sm:h-12 !px-0 !py-2 sm:!py-3 !rounded-xl sm:!rounded-2xl text-slate-400 hover:text-slate-600 flex justify-center items-center",children:o.jsx(we.Trash,{})}),o.jsx("button",{onClick:()=>br(!0),className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl sm:rounded-2xl flex items-center justify-center text-white shadow-lg hover:scale-105 transition-all border-b-4 border-emerald-600 active:border-b-0 active:translate-y-1",title:"Save Beat",children:o.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[o.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),o.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),o.jsx("polyline",{points:"7 3 7 8 15 8"})]})}),o.jsx("button",{onClick:()=>bl(!0),className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl sm:rounded-2xl flex items-center justify-center text-white shadow-lg hover:scale-105 transition-all border-b-4 border-indigo-600 active:border-b-0 active:translate-y-1",title:"Load Beat",children:o.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M3 15v4c0 1.1.9 2 2 2h14a2 2 0 002-2v-4M17 8l-5-5-5 5M12 3v12"})})}),o.jsxs("div",{className:"flex flex-col items-center justify-center bg-slate-50 px-2 sm:px-3 py-1 sm:py-2 rounded-xl sm:rounded-2xl border border-slate-100",children:[o.jsx("span",{className:"text-[8px] sm:text-[10px] text-slate-400 font-black uppercase tracking-widest leading-none mb-1",children:"Tempo"}),o.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1",children:[o.jsx("button",{onClick:()=>q(g=>Math.max(60,g-5)),className:"px-1 sm:px-1.5 py-0.5 bg-slate-200 hover:bg-slate-300 rounded text-[10px] sm:text-xs font-bold text-slate-600",children:"-5"}),o.jsx("button",{onClick:()=>q(g=>Math.max(60,g-1)),className:"px-1 sm:px-1.5 py-0.5 bg-slate-100 hover:bg-slate-200 rounded text-[10px] sm:text-xs font-bold text-slate-500",children:"-1"}),o.jsx("span",{className:"text-sm sm:text-lg font-black text-slate-700 leading-none w-8 sm:w-10 text-center",children:k}),o.jsx("button",{onClick:()=>q(g=>Math.min(200,g+1)),className:"px-1 sm:px-1.5 py-0.5 bg-slate-100 hover:bg-slate-200 rounded text-[10px] sm:text-xs font-bold text-slate-500",children:"+1"}),o.jsx("button",{onClick:()=>q(g=>Math.min(200,g+5)),className:"px-1 sm:px-1.5 py-0.5 bg-slate-200 hover:bg-slate-300 rounded text-[10px] sm:text-xs font-bold text-slate-600",children:"+5"})]})]})]}),gr&&o.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl animate-bounce-in",children:[o.jsxs("h2",{className:"text-2xl font-black text-slate-800 mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center text-white",children:o.jsxs("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[o.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),o.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),o.jsx("polyline",{points:"7 3 7 8 15 8"})]})}),"Save Your Beat"]}),o.jsx("input",{type:"text",placeholder:"Enter beat name...",value:qi,onChange:g=>Os(g.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-2xl text-lg font-bold text-slate-700 focus:outline-none focus:border-green-400 mb-4",autoFocus:!0}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{br(!1),Os("")},className:"flex-1 p-4 bg-slate-100 hover:bg-slate-200 rounded-2xl font-bold text-slate-600 transition-all",children:"Cancel"}),o.jsx("button",{onClick:()=>wc(qi),className:"flex-1 p-4 bg-gradient-to-r from-green-400 to-emerald-500 rounded-2xl font-bold text-white hover:scale-[1.02] transition-all shadow-lg",children:" Save Beat"})]})]})}),yc&&o.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-3xl p-6 sm:p-8 max-w-lg w-full shadow-2xl animate-bounce-in max-h-[80vh] flex flex-col",children:[o.jsxs("h2",{className:"text-xl sm:text-2xl font-black text-slate-800 mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center text-white",children:o.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M3 15v4c0 1.1.9 2 2 2h14a2 2 0 002-2v-4M17 8l-5-5-5 5M12 3v12"})})}),"Load a Beat"]}),Et.length>0&&o.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-3 border-b border-slate-200",children:[o.jsxs("button",{onClick:()=>wl(!1),className:`px-4 py-2 rounded-xl font-bold text-sm transition-all ${vl?"bg-slate-100 text-slate-500 hover:bg-slate-200":"bg-indigo-500 text-white"}`,children:["All (",Et.length,")"]}),o.jsxs("button",{onClick:()=>wl(!0),className:`px-4 py-2 rounded-xl font-bold text-sm transition-all flex items-center gap-1 ${vl?"bg-amber-500 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[" Favorites (",Et.filter(g=>g.favorite).length,")"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:Et.length===0?o.jsxs("div",{className:"text-center py-12 text-slate-400",children:[o.jsx("div",{className:"text-5xl mb-4",children:""}),o.jsx("p",{className:"font-bold",children:"No saved beats yet!"}),o.jsx("p",{className:"text-sm",children:"Create a beat and save it to see it here."})]}):(()=>{const g=vl?Et.filter(w=>w.favorite):Et;return g.length===0?o.jsxs("div",{className:"text-center py-12 text-slate-400",children:[o.jsx("div",{className:"text-5xl mb-4",children:""}),o.jsx("p",{className:"font-bold",children:"No favorites yet!"}),o.jsx("p",{className:"text-sm",children:"Tap the star icon on a beat to add it to favorites."})]}):g.map(w=>o.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 p-3 sm:p-4 rounded-2xl transition-all group ${w.favorite?"bg-amber-50 border-2 border-amber-200":"bg-slate-50 hover:bg-slate-100"}`,children:[o.jsx("button",{onClick:()=>Tc(w.id),className:`p-2 rounded-xl transition-all ${w.favorite?"text-amber-500 hover:text-amber-600":"text-slate-300 hover:text-amber-400"}`,title:w.favorite?"Remove from favorites":"Add to favorites",children:w.favorite?"":""}),o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center text-white text-lg sm:text-xl shrink-0",children:""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-bold text-slate-800 truncate",children:w.name}),o.jsxs("div",{className:"text-xs text-slate-400",children:[w.date,"  ",w.tempo," BPM  ",w.activeInstrumentIds.length," tracks"]})]}),o.jsx("button",{onClick:()=>Sc(w),className:"px-3 sm:px-4 py-2 bg-gradient-to-r from-blue-400 to-indigo-500 text-white rounded-xl font-bold hover:scale-105 transition-all shadow-md text-sm",children:"Load"}),o.jsx("button",{onClick:()=>yl(w),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",title:"Delete beat",children:o.jsx(we.Trash,{})})]},w.id))})()}),o.jsx("button",{onClick:()=>{bl(!1),wl(!1)},className:"w-full p-4 bg-slate-100 hover:bg-slate-200 rounded-2xl font-bold text-slate-600 transition-all",children:"Close"})]})}),xl&&o.jsx("div",{className:"absolute inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-sm w-full shadow-2xl animate-bounce-in text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"Delete Beat?"}),o.jsx("p",{className:"text-slate-500 mb-1",children:"Are you sure you want to delete"}),o.jsxs("p",{className:"text-lg font-bold text-slate-800 mb-4",children:['"',xl.name,'"']}),o.jsx("p",{className:"text-xs text-red-500 mb-6",children:" This action cannot be undone!"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>yl(null),className:"flex-1 p-3 bg-slate-100 hover:bg-slate-200 rounded-xl font-bold text-slate-600 transition-all",children:"Cancel"}),o.jsx("button",{onClick:()=>{_c(xl.id),yl(null)},className:"flex-1 p-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-400 hover:to-red-500 rounded-xl font-bold text-white transition-all shadow-lg",children:" Delete"})]})]})}),bn&&o.jsx(vy,{step:Qa,onNext:()=>{oc[Qa]?.action==="click-grid"?Object.values(Ot).some(w=>w.some(E=>E))&&et(w=>w+1):et(g=>g+1)},onSkip:()=>{Xa(!1),et(0)},onFinish:()=>{Xa(!1),et(0)}}),te&&o.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white border-8 border-yellow-400 rounded-[3rem] p-12 max-w-md w-full text-center shadow-2xl transform scale-100",children:[o.jsx("div",{className:"text-yellow-400 mx-auto mb-6 flex justify-center drop-shadow-lg animate-bounce",children:o.jsx(we.Trophy,{})}),o.jsx("h2",{className:"text-5xl font-black text-slate-800 mb-2 tracking-tight",children:"YOU DID IT!"}),o.jsx("p",{className:"text-slate-500 mb-4 font-bold text-xl",children:Gt>=90?"PERFECT RHYTHM! ":Gt>=70?"GREAT BEAT! ":"GOOD START! "}),o.jsxs("div",{className:"flex justify-center gap-3 mb-8 text-yellow-400",children:[o.jsx(we.Star,{}),Gt>=70&&o.jsx(we.Star,{}),Gt>=90&&o.jsx(we.Star,{})]}),Z&&o.jsxs("div",{className:"mb-6 p-4 bg-slate-100 rounded-2xl text-left",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-slate-600 font-bold",children:"Score:"}),o.jsxs("span",{className:"text-2xl font-black text-purple-600",children:["+",Math.round(Gt*10)]})]}),o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-slate-600 font-bold",children:"Accuracy:"}),o.jsxs("span",{className:"text-lg font-bold text-green-600",children:[Math.round(Gt),"%"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-slate-600 font-bold",children:"XP Earned:"}),o.jsxs("span",{className:"text-lg font-bold text-amber-600",children:["+",Math.round(Gt)," XP"]})]})]}),!Z&&o.jsxs("div",{className:"mb-6 p-4 bg-purple-100 rounded-2xl",children:[o.jsx("p",{className:"text-purple-700 font-bold text-sm mb-2",children:" Login to save your scores!"}),o.jsx("button",{onClick:()=>{P(!1),Yt(!0)},className:"px-4 py-2 bg-purple-500 text-white rounded-xl font-bold text-sm hover:bg-purple-400 transition-all",children:"Login Now"})]}),o.jsx(Ud,{onClick:()=>{Z&&p&&wt&&mr(p.id,p.name,Gt),P(!1),n("splash")},size:"lg",className:"w-full",children:"Back to Menu"})]})})]})}Lg.createRoot(document.getElementById("root")).render(o.jsx(Zd.StrictMode,{children:o.jsx(Sy,{})}));
